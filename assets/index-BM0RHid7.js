(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))u(m);new MutationObserver(m=>{for(const y of m)if(y.type==="childList")for(const g of y.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&u(g)}).observe(document,{childList:!0,subtree:!0});function c(m){const y={};return m.integrity&&(y.integrity=m.integrity),m.referrerPolicy&&(y.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?y.credentials="include":m.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function u(m){if(m.ep)return;m.ep=!0;const y=c(m);fetch(m.href,y)}})();var Is=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jd(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Yh={exports:{}},Cl={};var my;function w1(){if(my)return Cl;my=1;var i=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function c(u,m,y){var g=null;if(y!==void 0&&(g=""+y),m.key!==void 0&&(g=""+m.key),"key"in m){y={};for(var T in m)T!=="key"&&(y[T]=m[T])}else y=m;return m=y.ref,{$$typeof:i,type:u,key:g,ref:m!==void 0?m:null,props:y}}return Cl.Fragment=a,Cl.jsx=c,Cl.jsxs=c,Cl}var py;function R1(){return py||(py=1,Yh.exports=w1()),Yh.exports}var P=R1(),Kh={exports:{}},xe={};var gy;function E1(){if(gy)return xe;gy=1;var i=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),g=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),M=Symbol.iterator;function D(U){return U===null||typeof U!="object"?null:(U=M&&U[M]||U["@@iterator"],typeof U=="function"?U:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,H={};function F(U,ne,fe){this.props=U,this.context=ne,this.refs=H,this.updater=fe||B}F.prototype.isReactComponent={},F.prototype.setState=function(U,ne){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,ne,"setState")},F.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function W(){}W.prototype=F.prototype;function Y(U,ne,fe){this.props=U,this.context=ne,this.refs=H,this.updater=fe||B}var re=Y.prototype=new W;re.constructor=Y,X(re,F.prototype),re.isPureReactComponent=!0;var ae=Array.isArray;function G(){}var me={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function be(U,ne,fe){var he=fe.ref;return{$$typeof:i,type:U,key:ne,ref:he!==void 0?he:null,props:fe}}function Pe(U,ne){return be(U.type,ne,U.props)}function He(U){return typeof U=="object"&&U!==null&&U.$$typeof===i}function ut(U){var ne={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(fe){return ne[fe]})}var S=/\/+/g;function _t(U,ne){return typeof U=="object"&&U!==null&&U.key!=null?ut(""+U.key):ne.toString(36)}function kt(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(G,G):(U.status="pending",U.then(function(ne){U.status==="pending"&&(U.status="fulfilled",U.value=ne)},function(ne){U.status==="pending"&&(U.status="rejected",U.reason=ne)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function _(U,ne,fe,he,Ee){var De=typeof U;(De==="undefined"||De==="boolean")&&(U=null);var Ve=!1;if(U===null)Ve=!0;else switch(De){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(U.$$typeof){case i:case a:Ve=!0;break;case w:return Ve=U._init,_(Ve(U._payload),ne,fe,he,Ee)}}if(Ve)return Ee=Ee(U),Ve=he===""?"."+_t(U,0):he,ae(Ee)?(fe="",Ve!=null&&(fe=Ve.replace(S,"$&/")+"/"),_(Ee,ne,fe,"",function(is){return is})):Ee!=null&&(He(Ee)&&(Ee=Pe(Ee,fe+(Ee.key==null||U&&U.key===Ee.key?"":(""+Ee.key).replace(S,"$&/")+"/")+Ve)),ne.push(Ee)),1;Ve=0;var Ut=he===""?".":he+":";if(ae(U))for(var nt=0;nt<U.length;nt++)he=U[nt],De=Ut+_t(he,nt),Ve+=_(he,ne,fe,De,Ee);else if(nt=D(U),typeof nt=="function")for(U=nt.call(U),nt=0;!(he=U.next()).done;)he=he.value,De=Ut+_t(he,nt++),Ve+=_(he,ne,fe,De,Ee);else if(De==="object"){if(typeof U.then=="function")return _(kt(U),ne,fe,he,Ee);throw ne=String(U),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function se(U,ne,fe){if(U==null)return U;var he=[],Ee=0;return _(U,he,"","",function(De){return ne.call(fe,De,Ee++)}),he}function ye(U){if(U._status===-1){var ne=U._result;ne=ne(),ne.then(function(fe){(U._status===0||U._status===-1)&&(U._status=1,U._result=fe)},function(fe){(U._status===0||U._status===-1)&&(U._status=2,U._result=fe)}),U._status===-1&&(U._status=0,U._result=ne)}if(U._status===1)return U._result.default;throw U._result}var ue=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Oe={map:se,forEach:function(U,ne,fe){se(U,function(){ne.apply(this,arguments)},fe)},count:function(U){var ne=0;return se(U,function(){ne++}),ne},toArray:function(U){return se(U,function(ne){return ne})||[]},only:function(U){if(!He(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return xe.Activity=x,xe.Children=Oe,xe.Component=F,xe.Fragment=c,xe.Profiler=m,xe.PureComponent=Y,xe.StrictMode=u,xe.Suspense=C,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=me,xe.__COMPILER_RUNTIME={__proto__:null,c:function(U){return me.H.useMemoCache(U)}},xe.cache=function(U){return function(){return U.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(U,ne,fe){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var he=X({},U.props),Ee=U.key;if(ne!=null)for(De in ne.key!==void 0&&(Ee=""+ne.key),ne)!ce.call(ne,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ne.ref===void 0||(he[De]=ne[De]);var De=arguments.length-2;if(De===1)he.children=fe;else if(1<De){for(var Ve=Array(De),Ut=0;Ut<De;Ut++)Ve[Ut]=arguments[Ut+2];he.children=Ve}return be(U.type,Ee,he)},xe.createContext=function(U){return U={$$typeof:g,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:y,_context:U},U},xe.createElement=function(U,ne,fe){var he,Ee={},De=null;if(ne!=null)for(he in ne.key!==void 0&&(De=""+ne.key),ne)ce.call(ne,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ee[he]=ne[he]);var Ve=arguments.length-2;if(Ve===1)Ee.children=fe;else if(1<Ve){for(var Ut=Array(Ve),nt=0;nt<Ve;nt++)Ut[nt]=arguments[nt+2];Ee.children=Ut}if(U&&U.defaultProps)for(he in Ve=U.defaultProps,Ve)Ee[he]===void 0&&(Ee[he]=Ve[he]);return be(U,De,Ee)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(U){return{$$typeof:T,render:U}},xe.isValidElement=He,xe.lazy=function(U){return{$$typeof:w,_payload:{_status:-1,_result:U},_init:ye}},xe.memo=function(U,ne){return{$$typeof:A,type:U,compare:ne===void 0?null:ne}},xe.startTransition=function(U){var ne=me.T,fe={};me.T=fe;try{var he=U(),Ee=me.S;Ee!==null&&Ee(fe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(G,ue)}catch(De){ue(De)}finally{ne!==null&&fe.types!==null&&(ne.types=fe.types),me.T=ne}},xe.unstable_useCacheRefresh=function(){return me.H.useCacheRefresh()},xe.use=function(U){return me.H.use(U)},xe.useActionState=function(U,ne,fe){return me.H.useActionState(U,ne,fe)},xe.useCallback=function(U,ne){return me.H.useCallback(U,ne)},xe.useContext=function(U){return me.H.useContext(U)},xe.useDebugValue=function(){},xe.useDeferredValue=function(U,ne){return me.H.useDeferredValue(U,ne)},xe.useEffect=function(U,ne){return me.H.useEffect(U,ne)},xe.useEffectEvent=function(U){return me.H.useEffectEvent(U)},xe.useId=function(){return me.H.useId()},xe.useImperativeHandle=function(U,ne,fe){return me.H.useImperativeHandle(U,ne,fe)},xe.useInsertionEffect=function(U,ne){return me.H.useInsertionEffect(U,ne)},xe.useLayoutEffect=function(U,ne){return me.H.useLayoutEffect(U,ne)},xe.useMemo=function(U,ne){return me.H.useMemo(U,ne)},xe.useOptimistic=function(U,ne){return me.H.useOptimistic(U,ne)},xe.useReducer=function(U,ne,fe){return me.H.useReducer(U,ne,fe)},xe.useRef=function(U){return me.H.useRef(U)},xe.useState=function(U){return me.H.useState(U)},xe.useSyncExternalStore=function(U,ne,fe){return me.H.useSyncExternalStore(U,ne,fe)},xe.useTransition=function(){return me.H.useTransition()},xe.version="19.2.4",xe}var yy;function $d(){return yy||(yy=1,Kh.exports=E1()),Kh.exports}var k=$d();const x1=Jd(k);var Xh={exports:{}},wl={},Qh={exports:{}},Fh={};var vy;function O1(){return vy||(vy=1,(function(i){function a(_,se){var ye=_.length;_.push(se);e:for(;0<ye;){var ue=ye-1>>>1,Oe=_[ue];if(0<m(Oe,se))_[ue]=se,_[ye]=Oe,ye=ue;else break e}}function c(_){return _.length===0?null:_[0]}function u(_){if(_.length===0)return null;var se=_[0],ye=_.pop();if(ye!==se){_[0]=ye;e:for(var ue=0,Oe=_.length,U=Oe>>>1;ue<U;){var ne=2*(ue+1)-1,fe=_[ne],he=ne+1,Ee=_[he];if(0>m(fe,ye))he<Oe&&0>m(Ee,fe)?(_[ue]=Ee,_[he]=ye,ue=he):(_[ue]=fe,_[ne]=ye,ue=ne);else if(he<Oe&&0>m(Ee,ye))_[ue]=Ee,_[he]=ye,ue=he;else break e}}return se}function m(_,se){var ye=_.sortIndex-se.sortIndex;return ye!==0?ye:_.id-se.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;i.unstable_now=function(){return y.now()}}else{var g=Date,T=g.now();i.unstable_now=function(){return g.now()-T}}var C=[],A=[],w=1,x=null,M=3,D=!1,B=!1,X=!1,H=!1,F=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function re(_){for(var se=c(A);se!==null;){if(se.callback===null)u(A);else if(se.startTime<=_)u(A),se.sortIndex=se.expirationTime,a(C,se);else break;se=c(A)}}function ae(_){if(X=!1,re(_),!B)if(c(C)!==null)B=!0,G||(G=!0,ut());else{var se=c(A);se!==null&&kt(ae,se.startTime-_)}}var G=!1,me=-1,ce=5,be=-1;function Pe(){return H?!0:!(i.unstable_now()-be<ce)}function He(){if(H=!1,G){var _=i.unstable_now();be=_;var se=!0;try{e:{B=!1,X&&(X=!1,W(me),me=-1),D=!0;var ye=M;try{t:{for(re(_),x=c(C);x!==null&&!(x.expirationTime>_&&Pe());){var ue=x.callback;if(typeof ue=="function"){x.callback=null,M=x.priorityLevel;var Oe=ue(x.expirationTime<=_);if(_=i.unstable_now(),typeof Oe=="function"){x.callback=Oe,re(_),se=!0;break t}x===c(C)&&u(C),re(_)}else u(C);x=c(C)}if(x!==null)se=!0;else{var U=c(A);U!==null&&kt(ae,U.startTime-_),se=!1}}break e}finally{x=null,M=ye,D=!1}se=void 0}}finally{se?ut():G=!1}}}var ut;if(typeof Y=="function")ut=function(){Y(He)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,_t=S.port2;S.port1.onmessage=He,ut=function(){_t.postMessage(null)}}else ut=function(){F(He,0)};function kt(_,se){me=F(function(){_(i.unstable_now())},se)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(_){_.callback=null},i.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<_?Math.floor(1e3/_):5},i.unstable_getCurrentPriorityLevel=function(){return M},i.unstable_next=function(_){switch(M){case 1:case 2:case 3:var se=3;break;default:se=M}var ye=M;M=se;try{return _()}finally{M=ye}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(_,se){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var ye=M;M=_;try{return se()}finally{M=ye}},i.unstable_scheduleCallback=function(_,se,ye){var ue=i.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?ue+ye:ue):ye=ue,_){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=ye+Oe,_={id:w++,callback:se,priorityLevel:_,startTime:ye,expirationTime:Oe,sortIndex:-1},ye>ue?(_.sortIndex=ye,a(A,_),c(C)===null&&_===c(A)&&(X?(W(me),me=-1):X=!0,kt(ae,ye-ue))):(_.sortIndex=Oe,a(C,_),B||D||(B=!0,G||(G=!0,ut()))),_},i.unstable_shouldYield=Pe,i.unstable_wrapCallback=function(_){var se=M;return function(){var ye=M;M=se;try{return _.apply(this,arguments)}finally{M=ye}}}})(Fh)),Fh}var by;function M1(){return by||(by=1,Qh.exports=O1()),Qh.exports}var Wh={exports:{}},Qt={};var Sy;function _1(){if(Sy)return Qt;Sy=1;var i=$d();function a(C){var A="https://react.dev/errors/"+C;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)A+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+C+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var u={d:{f:c,r:function(){throw Error(a(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},m=Symbol.for("react.portal");function y(C,A,w){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:x==null?null:""+x,children:C,containerInfo:A,implementation:w}}var g=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(C,A){if(C==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return Qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,Qt.createPortal=function(C,A){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(a(299));return y(C,A,null,w)},Qt.flushSync=function(C){var A=g.T,w=u.p;try{if(g.T=null,u.p=2,C)return C()}finally{g.T=A,u.p=w,u.d.f()}},Qt.preconnect=function(C,A){typeof C=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,u.d.C(C,A))},Qt.prefetchDNS=function(C){typeof C=="string"&&u.d.D(C)},Qt.preinit=function(C,A){if(typeof C=="string"&&A&&typeof A.as=="string"){var w=A.as,x=T(w,A.crossOrigin),M=typeof A.integrity=="string"?A.integrity:void 0,D=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;w==="style"?u.d.S(C,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:x,integrity:M,fetchPriority:D}):w==="script"&&u.d.X(C,{crossOrigin:x,integrity:M,fetchPriority:D,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},Qt.preinitModule=function(C,A){if(typeof C=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var w=T(A.as,A.crossOrigin);u.d.M(C,{crossOrigin:w,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&u.d.M(C)},Qt.preload=function(C,A){if(typeof C=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var w=A.as,x=T(w,A.crossOrigin);u.d.L(C,w,{crossOrigin:x,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},Qt.preloadModule=function(C,A){if(typeof C=="string")if(A){var w=T(A.as,A.crossOrigin);u.d.m(C,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:w,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else u.d.m(C)},Qt.requestFormReset=function(C){u.d.r(C)},Qt.unstable_batchedUpdates=function(C,A){return C(A)},Qt.useFormState=function(C,A,w){return g.H.useFormState(C,A,w)},Qt.useFormStatus=function(){return g.H.useHostTransitionStatus()},Qt.version="19.2.4",Qt}var Ty;function N1(){if(Ty)return Wh.exports;Ty=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(a){console.error(a)}}return i(),Wh.exports=_1(),Wh.exports}var Ay;function D1(){if(Ay)return wl;Ay=1;var i=M1(),a=$d(),c=N1();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function y(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function g(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function T(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function C(e){if(y(e)!==e)throw Error(u(188))}function A(e){var t=e.alternate;if(!t){if(t=y(e),t===null)throw Error(u(188));return t!==e?null:e}for(var n=e,o=t;;){var f=n.return;if(f===null)break;var h=f.alternate;if(h===null){if(o=f.return,o!==null){n=o;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===n)return C(f),e;if(h===o)return C(f),t;h=h.sibling}throw Error(u(188))}if(n.return!==o.return)n=f,o=h;else{for(var b=!1,R=f.child;R;){if(R===n){b=!0,n=f,o=h;break}if(R===o){b=!0,o=f,n=h;break}R=R.sibling}if(!b){for(R=h.child;R;){if(R===n){b=!0,n=h,o=f;break}if(R===o){b=!0,o=h,n=f;break}R=R.sibling}if(!b)throw Error(u(189))}}if(n.alternate!==o)throw Error(u(190))}if(n.tag!==3)throw Error(u(188));return n.stateNode.current===n?e:t}function w(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=w(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,M=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),be=Symbol.for("react.activity"),Pe=Symbol.for("react.memo_cache_sentinel"),He=Symbol.iterator;function ut(e){return e===null||typeof e!="object"?null:(e=He&&e[He]||e["@@iterator"],typeof e=="function"?e:null)}var S=Symbol.for("react.client.reference");function _t(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===S?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case X:return"Fragment";case F:return"Profiler";case H:return"StrictMode";case ae:return"Suspense";case G:return"SuspenseList";case be:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case Y:return e.displayName||"Context";case W:return(e._context.displayName||"Context")+".Consumer";case re:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case me:return t=e.displayName||null,t!==null?t:_t(e.type)||"Memo";case ce:t=e._payload,e=e._init;try{return _t(e(t))}catch{}}return null}var kt=Array.isArray,_=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},ue=[],Oe=-1;function U(e){return{current:e}}function ne(e){0>Oe||(e.current=ue[Oe],ue[Oe]=null,Oe--)}function fe(e,t){Oe++,ue[Oe]=e.current,e.current=t}var he=U(null),Ee=U(null),De=U(null),Ve=U(null);function Ut(e,t){switch(fe(De,t),fe(Ee,e),fe(he,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Bg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Bg(t),e=Pg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ne(he),fe(he,e)}function nt(){ne(he),ne(Ee),ne(De)}function is(e){e.memoizedState!==null&&fe(Ve,e);var t=he.current,n=Pg(t,e.type);t!==n&&(fe(Ee,e),fe(he,n))}function Ws(e){Ee.current===e&&(ne(he),ne(Ee)),Ve.current===e&&(ne(Ve),bl._currentValue=ye)}var Ga,Ql;function gn(e){if(Ga===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ga=t&&t[1]||"",Ql=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ga+e+Ql}var Ha=!1;function qa(e,t){if(!e||Ha)return"";Ha=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Q){var K=Q}Reflect.construct(e,[],ie)}else{try{ie.call()}catch(Q){K=Q}e.call(ie.prototype)}}else{try{throw Error()}catch(Q){K=Q}(ie=e())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),b=h[0],R=h[1];if(b&&R){var N=b.split(`
`),I=R.split(`
`);for(f=o=0;o<N.length&&!N[o].includes("DetermineComponentFrameRoot");)o++;for(;f<I.length&&!I[f].includes("DetermineComponentFrameRoot");)f++;if(o===N.length||f===I.length)for(o=N.length-1,f=I.length-1;1<=o&&0<=f&&N[o]!==I[f];)f--;for(;1<=o&&0<=f;o--,f--)if(N[o]!==I[f]){if(o!==1||f!==1)do if(o--,f--,0>f||N[o]!==I[f]){var ee=`
`+N[o].replace(" at new "," at ");return e.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",e.displayName)),ee}while(1<=o&&0<=f);break}}}finally{Ha=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?gn(n):""}function rf(e,t){switch(e.tag){case 26:case 27:case 5:return gn(e.type);case 16:return gn("Lazy");case 13:return e.child!==t&&t!==null?gn("Suspense Fallback"):gn("Suspense");case 19:return gn("SuspenseList");case 0:case 15:return qa(e.type,!1);case 11:return qa(e.type.render,!1);case 1:return qa(e.type,!0);case 31:return gn("Activity");default:return""}}function Zr(e){try{var t="",n=null;do t+=rf(e,n),n=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Zs=Object.prototype.hasOwnProperty,Ei=i.unstable_scheduleCallback,Js=i.unstable_cancelCallback,Ia=i.unstable_shouldYield,Jr=i.unstable_requestPaint,Me=i.unstable_now,Fl=i.unstable_getCurrentPriorityLevel,$r=i.unstable_ImmediatePriority,$s=i.unstable_UserBlockingPriority,ea=i.unstable_NormalPriority,Wl=i.unstable_LowPriority,Gt=i.unstable_IdlePriority,St=i.log,yn=i.unstable_setDisableYieldValue,xi=null,Ht=null;function Gn(e){if(typeof St=="function"&&yn(e),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(xi,e)}catch{}}var qt=Math.clz32?Math.clz32:Zl,eo=Math.log,to=Math.LN2;function Zl(e){return e>>>=0,e===0?32:31-(eo(e)/to|0)|0}var ta=256,Oi=262144,na=4194304;function En(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function mt(e,t,n){var o=e.pendingLanes;if(o===0)return 0;var f=0,h=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var R=o&134217727;return R!==0?(o=R&~h,o!==0?f=En(o):(b&=R,b!==0?f=En(b):n||(n=R&~e,n!==0&&(f=En(n))))):(R=o&~h,R!==0?f=En(R):b!==0?f=En(b):n||(n=o&~e,n!==0&&(f=En(n)))),f===0?0:t!==0&&t!==f&&(t&h)===0&&(h=f&-f,n=t&-t,h>=n||h===32&&(n&4194048)!==0)?t:f}function ss(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function of(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function no(){var e=na;return na<<=1,(na&62914560)===0&&(na=4194304),e}function io(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function lf(e,t,n,o,f,h){var b=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var R=e.entanglements,N=e.expirationTimes,I=e.hiddenUpdates;for(n=b&~n;0<n;){var ee=31-qt(n),ie=1<<ee;R[ee]=0,N[ee]=-1;var K=I[ee];if(K!==null)for(I[ee]=null,ee=0;ee<K.length;ee++){var Q=K[ee];Q!==null&&(Q.lane&=-536870913)}n&=~ie}o!==0&&Jl(e,o,0),h!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=h&~(b&~t))}function Jl(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-qt(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|n&261930}function so(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-qt(n),f=1<<o;f&t|e[o]&t&&(e[o]|=t),n&=~f}}function ao(e,t){var n=t&-t;return n=(n&42)!==0?1:Ya(n),(n&(e.suspendedLanes|t))!==0?0:n}function Ya(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ka(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ro(){var e=se.p;return e!==0?e:(e=window.event,e===void 0?32:oy(e.type))}function $l(e,t){var n=se.p;try{return se.p=e,t()}finally{se.p=n}}var Hn=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Hn,Nt="__reactProps$"+Hn,as="__reactContainer$"+Hn,oo="__reactEvents$"+Hn,cf="__reactListeners$"+Hn,Xa="__reactHandles$"+Hn,lo="__reactResources$"+Hn,rs="__reactMarker$"+Hn;function co(e){delete e[Rt],delete e[Nt],delete e[oo],delete e[cf],delete e[Xa]}function os(e){var t=e[Rt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[as]||n[Rt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Yg(e);e!==null;){if(n=e[Rt])return n;e=Yg(e)}return t}e=n,n=e.parentNode}return null}function Se(e){if(e=e[Rt]||e[as]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ia(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function ls(e){var t=e[lo];return t||(t=e[lo]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function pt(e){e[rs]=!0}var uo=new Set,it={};function ii(e,t){cs(e,t),cs(e+"Capture",t)}function cs(e,t){for(it[e]=t,e=0;e<t.length;e++)uo.add(t[e])}var Qa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fa={},ec={};function uf(e){return Zs.call(ec,e)?!0:Zs.call(Fa,e)?!1:Qa.test(e)?ec[e]=!0:(Fa[e]=!0,!1)}function sa(e,t,n){if(uf(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Wa(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function xn(e,t,n,o){if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+o)}}function Wt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nc(e,t,n){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,h=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return f.call(this)},set:function(b){n=""+b,h.call(this,b)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return n},setValue:function(b){n=""+b},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fo(e){if(!e._valueTracker){var t=tc(e)?"checked":"value";e._valueTracker=nc(e,t,""+e[t])}}function ic(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=tc(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function Za(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ff=/[\n"\\]/g;function ft(e){return e.replace(ff,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function aa(e,t,n,o,f,h,b,R){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),t!=null?b==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Wt(t)):e.value!==""+Wt(t)&&(e.value=""+Wt(t)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),t!=null?ho(e,b,Wt(t)):n!=null?ho(e,b,Wt(n)):o!=null&&e.removeAttribute("value"),f==null&&h!=null&&(e.defaultChecked=!!h),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?e.name=""+Wt(R):e.removeAttribute("name")}function Mi(e,t,n,o,f,h,b,R){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||n!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){fo(e);return}n=n!=null?""+Wt(n):"",t=t!=null?""+Wt(t):n,R||t===e.value||(e.value=t),e.defaultValue=t}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=R?e.checked:!!o,e.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b),fo(e)}function ho(e,t,n){t==="number"&&Za(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function us(e,t,n,o){if(e=e.options,t){t={};for(var f=0;f<n.length;f++)t["$"+n[f]]=!0;for(n=0;n<e.length;n++)f=t.hasOwnProperty("$"+e[n].value),e[n].selected!==f&&(e[n].selected=f),f&&o&&(e[n].defaultSelected=!0)}else{for(n=""+Wt(n),t=null,f=0;f<e.length;f++){if(e[f].value===n){e[f].selected=!0,o&&(e[f].defaultSelected=!0);return}t!==null||e[f].disabled||(t=e[f])}t!==null&&(t.selected=!0)}}function Ja(e,t,n){if(t!=null&&(t=""+Wt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Wt(n):""}function sc(e,t,n,o){if(t==null){if(o!=null){if(n!=null)throw Error(u(92));if(kt(o)){if(1<o.length)throw Error(u(93));o=o[0]}n=o}n==null&&(n=""),t=n}n=Wt(t),e.defaultValue=n,o=e.textContent,o===n&&o!==""&&o!==null&&(e.value=o),fo(e)}function si(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var hf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gt(e,t,n){var o=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,n):typeof n!="number"||n===0||hf.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ae(e,t,n){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,n!=null){for(var o in n)!n.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var f in t)o=t[f],t.hasOwnProperty(f)&&n[f]!==o&&gt(e,f,o)}else for(var h in t)t.hasOwnProperty(h)&&gt(e,h,t[h])}function $a(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),df=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ra(e){return df.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function qn(){}var er=null;function mo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _i=null,ai=null;function po(e){var t=Se(e);if(t&&(e=t.stateNode)){var n=e[Nt]||null;e:switch(e=t.stateNode,t.type){case"input":if(aa(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var f=o[Nt]||null;if(!f)throw Error(u(90));aa(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(t=0;t<n.length;t++)o=n[t],o.form===e.form&&ic(o)}break e;case"textarea":Ja(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&us(e,!!n.multiple,t,!1)}}}var oa=!1;function go(e,t,n){if(oa)return e(t,n);oa=!0;try{var o=e(t);return o}finally{if(oa=!1,(_i!==null||ai!==null)&&(su(),_i&&(t=_i,e=ai,ai=_i=null,po(t),e)))for(t=0;t<e.length;t++)po(e[t])}}function Ni(e,t){var n=e.stateNode;if(n===null)return null;var o=n[Nt]||null;if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(u(231,t,typeof n));return n}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fs=!1;if(On)try{var ri={};Object.defineProperty(ri,"passive",{get:function(){fs=!0}}),window.addEventListener("test",ri,ri),window.removeEventListener("test",ri,ri)}catch{fs=!1}var Zt=null,oi=null,la=null;function yo(){if(la)return la;var e,t=oi,n=t.length,o,f="value"in Zt?Zt.value:Zt.textContent,h=f.length;for(e=0;e<n&&t[e]===f[e];e++);var b=n-e;for(o=1;o<=b&&t[n-o]===f[h-o];o++);return la=f.slice(e,1<o?1-o:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function In(){return!0}function vo(){return!1}function Yt(e){function t(n,o,f,h,b){this._reactName=n,this._targetInst=f,this.type=o,this.nativeEvent=h,this.target=b,this.currentTarget=null;for(var R in e)e.hasOwnProperty(R)&&(n=e[R],this[R]=n?n(h):h[R]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?In:vo,this.isPropagationStopped=vo,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=In)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=In)},persist:function(){},isPersistent:In}),t}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nr=Yt(Di),Qe=x({},Di,{view:0,detail:0}),mf=Yt(Qe),bo,So,ca,ua=x({},Qe,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ir,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ca&&(ca&&e.type==="mousemove"?(bo=e.screenX-ca.screenX,So=e.screenY-ca.screenY):So=bo=0,ca=e),bo)},movementY:function(e){return"movementY"in e?e.movementY:So}}),ac=Yt(ua),vn=x({},ua,{dataTransfer:0}),rc=Yt(vn),pf=x({},Qe,{relatedTarget:0}),hs=Yt(pf),gf=x({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),yf=Yt(gf),vf=x({},Di,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bf=Yt(vf),Sf=x({},Di,{data:0}),To=Yt(Sf),oc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Af={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Af[e])?!!t[e]:!1}function ir(){return lc}var fa=x({},Qe,{key:function(e){if(e.key){var t=oc[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Tf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ir,charCode:function(e){return e.type==="keypress"?tr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),li=Yt(fa),Cf=x({},ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cc=Yt(Cf),uc=x({},Qe,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ir}),wf=Yt(uc),Rf=x({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),fc=Yt(Rf),Ef=x({},ua,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hc=Yt(Ef),dc=x({},Di,{newState:0,oldState:0}),mc=Yt(dc),pc=[9,13,27,32],sr=On&&"CompositionEvent"in window,ds=null;On&&"documentMode"in document&&(ds=document.documentMode);var ha=On&&"TextEvent"in window&&!ds,bn=On&&(!sr||ds&&8<ds&&11>=ds),gc=" ",yc=!1;function vc(e,t){switch(e){case"keyup":return pc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ms=!1;function xf(e,t){switch(e){case"compositionend":return bc(t);case"keypress":return t.which!==32?null:(yc=!0,gc);case"textInput":return e=t.data,e===gc&&yc?null:e;default:return null}}function Sc(e,t){if(ms)return e==="compositionend"||!sr&&vc(e,t)?(e=yo(),la=oi=Zt=null,ms=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bn&&t.locale!=="ko"?null:t.data;default:return null}}var Of={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ao(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Of[e.type]:t==="textarea"}function Tc(e,t,n,o){_i?ai?ai.push(o):ai=[o]:_i=o,t=fu(t,"onChange"),0<t.length&&(n=new nr("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var da=null,ps=null;function Ac(e){Ng(e,0)}function ma(e){var t=ia(e);if(ic(t))return e}function Co(e,t){if(e==="change")return t}var wo=!1;if(On){var Ro;if(On){var Eo="oninput"in document;if(!Eo){var Cc=document.createElement("div");Cc.setAttribute("oninput","return;"),Eo=typeof Cc.oninput=="function"}Ro=Eo}else Ro=!1;wo=Ro&&(!document.documentMode||9<document.documentMode)}function xo(){da&&(da.detachEvent("onpropertychange",Li),ps=da=null)}function Li(e){if(e.propertyName==="value"&&ma(ps)){var t=[];Tc(t,ps,e,mo(e)),go(Ac,t)}}function pa(e,t,n){e==="focusin"?(xo(),da=t,ps=n,da.attachEvent("onpropertychange",Li)):e==="focusout"&&xo()}function wc(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ma(ps)}function Rc(e,t){if(e==="click")return ma(t)}function Ec(e,t){if(e==="input"||e==="change")return ma(t)}function xc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Jt=typeof Object.is=="function"?Object.is:xc;function ki(e,t){if(Jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var f=n[o];if(!Zs.call(t,f)||!Jt(e[f],t[f]))return!1}return!0}function Oc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ga(e,t){var n=Oc(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Oc(n)}}function Mc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ar(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Za(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Za(e.document)}return t}function rr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Kt=On&&"documentMode"in document&&11>=document.documentMode,ci=null,ya=null,va=null,Oo=!1;function or(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Oo||ci==null||ci!==Za(o)||(o=ci,"selectionStart"in o&&rr(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),va&&ki(va,o)||(va=o,o=fu(ya,"onSelect"),0<o.length&&(t=new nr("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=ci)))}function ui(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var gs={animationend:ui("Animation","AnimationEnd"),animationiteration:ui("Animation","AnimationIteration"),animationstart:ui("Animation","AnimationStart"),transitionrun:ui("Transition","TransitionRun"),transitionstart:ui("Transition","TransitionStart"),transitioncancel:ui("Transition","TransitionCancel"),transitionend:ui("Transition","TransitionEnd")},Mo={},_o={};On&&(_o=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Sn(e){if(Mo[e])return Mo[e];if(!gs[e])return e;var t=gs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _o)return Mo[e]=t[n];return e}var _c=Sn("animationend"),No=Sn("animationiteration"),fi=Sn("animationstart"),Do=Sn("transitionrun"),Mf=Sn("transitionstart"),Nc=Sn("transitioncancel"),Lo=Sn("transitionend"),Dc=new Map,ko="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ko.push("scrollEnd");function Tn(e,t){Dc.set(e,t),ii(t,[e])}var Ui=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},yt=[],ys=0,Uo=0;function Mn(){for(var e=ys,t=Uo=ys=0;t<e;){var n=yt[t];yt[t++]=null;var o=yt[t];yt[t++]=null;var f=yt[t];yt[t++]=null;var h=yt[t];if(yt[t++]=null,o!==null&&f!==null){var b=o.pending;b===null?f.next=f:(f.next=b.next,b.next=f),o.pending=f}h!==0&&Bi(n,f,h)}}function lr(e,t,n,o){yt[ys++]=e,yt[ys++]=t,yt[ys++]=n,yt[ys++]=o,Uo|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function jo(e,t,n,o){return lr(e,t,n,o),Et(e)}function ji(e,t){return lr(e,null,null,t),Et(e)}function Bi(e,t,n){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n);for(var f=!1,h=e.return;h!==null;)h.childLanes|=n,o=h.alternate,o!==null&&(o.childLanes|=n),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(f=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,f&&t!==null&&(f=31-qt(n),e=h.hiddenUpdates,o=e[f],o===null?e[f]=[t]:o.push(t),t.lane=n|536870912),h):null}function Et(e){if(50<hl)throw hl=0,ph=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var vs={};function Bo(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(e,t,n,o){return new Bo(e,t,n,o)}function cr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function An(e,t){var n=e.alternate;return n===null?(n=xt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ur(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function fr(e,t,n,o,f,h){var b=0;if(o=e,typeof e=="function")cr(e)&&(b=1);else if(typeof e=="string")b=h1(e,n,he.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case be:return e=xt(31,n,t,f),e.elementType=be,e.lanes=h,e;case X:return Pi(n.children,f,h,t);case H:b=8,f|=24;break;case F:return e=xt(12,n,t,f|2),e.elementType=F,e.lanes=h,e;case ae:return e=xt(13,n,t,f),e.elementType=ae,e.lanes=h,e;case G:return e=xt(19,n,t,f),e.elementType=G,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y:b=10;break e;case W:b=9;break e;case re:b=11;break e;case me:b=14;break e;case ce:b=16,o=null;break e}b=29,n=Error(u(130,e===null?"null":typeof e,"")),o=null}return t=xt(b,n,t,f),t.elementType=e,t.type=o,t.lanes=h,t}function Pi(e,t,n,o){return e=xt(7,e,o,t),e.lanes=n,e}function hr(e,t,n){return e=xt(6,e,null,t),e.lanes=n,e}function Lc(e){var t=xt(18,null,null,0);return t.stateNode=e,t}function Po(e,t,n){return t=xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vo=new WeakMap;function an(e,t){if(typeof e=="object"&&e!==null){var n=Vo.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Zr(t)},Vo.set(e,t),t)}return{value:e,source:t,stack:Zr(t)}}var bs=[],Ss=0,dr=null,Vi=0,rn=[],Xt=0,hi=null,_n=1,Nn="";function Yn(e,t){bs[Ss++]=Vi,bs[Ss++]=dr,dr=e,Vi=t}function kc(e,t,n){rn[Xt++]=_n,rn[Xt++]=Nn,rn[Xt++]=hi,hi=e;var o=_n;e=Nn;var f=32-qt(o)-1;o&=~(1<<f),n+=1;var h=32-qt(t)+f;if(30<h){var b=f-f%5;h=(o&(1<<b)-1).toString(32),o>>=b,f-=b,_n=1<<32-qt(t)+f|n<<f|o,Nn=h+e}else _n=1<<h|n<<f|o,Nn=e}function mr(e){e.return!==null&&(Yn(e,1),kc(e,1,0))}function zo(e){for(;e===dr;)dr=bs[--Ss],bs[Ss]=null,Vi=bs[--Ss],bs[Ss]=null;for(;e===hi;)hi=rn[--Xt],rn[Xt]=null,Nn=rn[--Xt],rn[Xt]=null,_n=rn[--Xt],rn[Xt]=null}function $t(e,t){rn[Xt++]=_n,rn[Xt++]=Nn,rn[Xt++]=hi,_n=t.id,Nn=t.overflow,hi=e}var vt=null,Ye=null,_e=!1,Dn=null,en=!1,pr=Error(u(519));function on(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ba(an(t,e)),pr}function Go(e){var t=e.stateNode,n=e.type,o=e.memoizedProps;switch(t[Rt]=e,t[Nt]=o,n){case"dialog":ke("cancel",t),ke("close",t);break;case"iframe":case"object":case"embed":ke("load",t);break;case"video":case"audio":for(n=0;n<ml.length;n++)ke(ml[n],t);break;case"source":ke("error",t);break;case"img":case"image":case"link":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"input":ke("invalid",t),Mi(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":ke("invalid",t);break;case"textarea":ke("invalid",t),sc(t,o.value,o.defaultValue,o.children)}n=o.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||o.suppressHydrationWarning===!0||Ug(t.textContent,n)?(o.popover!=null&&(ke("beforetoggle",t),ke("toggle",t)),o.onScroll!=null&&ke("scroll",t),o.onScrollEnd!=null&&ke("scrollend",t),o.onClick!=null&&(t.onclick=qn),t=!0):t=!1,t||on(e,!0)}function Ts(e){for(vt=e.return;vt;)switch(vt.tag){case 5:case 31:case 13:en=!1;return;case 27:case 3:en=!0;return;default:vt=vt.return}}function Ln(e){if(e!==vt)return!1;if(!_e)return Ts(e),_e=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||_h(e.type,e.memoizedProps)),n=!n),n&&Ye&&on(e),Ts(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Ye=Ig(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Ye=Ig(e)}else t===27?(t=Ye,Ps(e.type)?(e=Uh,Uh=null,Ye=e):Ye=t):Ye=vt?jn(e.stateNode.nextSibling):null;return!0}function Kn(){Ye=vt=null,_e=!1}function As(){var e=Dn;return e!==null&&(mn===null?mn=e:mn.push.apply(mn,e),Dn=null),e}function ba(e){Dn===null?Dn=[e]:Dn.push(e)}var Sa=U(null),Dt=null,ln=null;function di(e,t,n){fe(Sa,t._currentValue),t._currentValue=n}function Xn(e){e._currentValue=Sa.current,ne(Sa)}function gr(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function Ho(e,t,n,o){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var h=f.dependencies;if(h!==null){var b=f.child;h=h.firstContext;e:for(;h!==null;){var R=h;h=f;for(var N=0;N<t.length;N++)if(R.context===t[N]){h.lanes|=n,R=h.alternate,R!==null&&(R.lanes|=n),gr(h.return,n,e),o||(b=null);break e}h=R.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(u(341));b.lanes|=n,h=b.alternate,h!==null&&(h.lanes|=n),gr(b,n,e),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===e){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function zi(e,t,n,o){e=null;for(var f=t,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(u(387));if(b=b.memoizedProps,b!==null){var R=f.type;Jt(f.pendingProps.value,b.value)||(e!==null?e.push(R):e=[R])}}else if(f===Ve.current){if(b=f.alternate,b===null)throw Error(u(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(bl):e=[bl])}f=f.return}e!==null&&Ho(t,e,n,o),t.flags|=262144}function cn(e){for(e=e.firstContext;e!==null;){if(!Jt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function mi(e){Dt=e,ln=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function rt(e){return qo(Dt,e)}function Ta(e,t){return Dt===null&&mi(e),qo(e,t)}function qo(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ln===null){if(e===null)throw Error(u(308));ln=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ln=ln.next=t;return n}var Cs=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},ws=i.unstable_scheduleCallback,_f=i.unstable_NormalPriority,ot={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function st(){return{controller:new Cs,data:new Map,refCount:0}}function Aa(e){e.refCount--,e.refCount===0&&ws(_f,function(){e.controller.abort()})}var Ca=null,Io=0,Rs=0,Es=null;function Nf(e,t){if(Ca===null){var n=Ca=[];Io=0,Rs=Th(),Es={status:"pending",value:void 0,then:function(o){n.push(o)}}}return Io++,t.then(Yo,Yo),t}function Yo(){if(--Io===0&&Ca!==null){Es!==null&&(Es.status="fulfilled");var e=Ca;Ca=null,Rs=0,Es=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Df(e,t){var n=[],o={status:"pending",value:null,reason:null,then:function(f){n.push(f)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var f=0;f<n.length;f++)(0,n[f])(t)},function(f){for(o.status="rejected",o.reason=f,f=0;f<n.length;f++)(0,n[f])(void 0)}),o}var yr=_.S;_.S=function(e,t){ag=Me(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Nf(e,t),yr!==null&&yr(e,t)};var Gi=U(null);function Ko(){var e=Gi.current;return e!==null?e:$e.pooledCache}function vr(e,t){t===null?fe(Gi,Gi.current):fe(Gi,t.pool)}function Uc(){var e=Ko();return e===null?null:{parent:ot._currentValue,pool:e}}var xs=Error(u(460)),Xo=Error(u(474)),wa=Error(u(542)),br={then:function(){}};function jc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Bc(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(qn,qn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pc(e),e;default:if(typeof t.status=="string")t.then(qn,qn);else{if(e=$e,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var f=t;f.status="fulfilled",f.value=o}},function(o){if(t.status==="pending"){var f=t;f.status="rejected",f.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Pc(e),e}throw pi=t,xs}}function Hi(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(pi=n,xs):n}}var pi=null;function Qo(){if(pi===null)throw Error(u(459));var e=pi;return pi=null,e}function Pc(e){if(e===xs||e===wa)throw Error(u(483))}var Os=null,Ra=0;function Sr(e){var t=Ra;return Ra+=1,Os===null&&(Os=[]),Bc(Os,e,t)}function Ea(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Tr(e,t){throw t.$$typeof===M?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Vc(e){function t(z,L){if(e){var q=z.deletions;q===null?(z.deletions=[L],z.flags|=16):q.push(L)}}function n(z,L){if(!e)return null;for(;L!==null;)t(z,L),L=L.sibling;return null}function o(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=An(z,L),z.index=0,z.sibling=null,z}function h(z,L,q){return z.index=q,e?(q=z.alternate,q!==null?(q=q.index,q<L?(z.flags|=67108866,L):q):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function b(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function R(z,L,q,te){return L===null||L.tag!==6?(L=hr(q,z.mode,te),L.return=z,L):(L=f(L,q),L.return=z,L)}function N(z,L,q,te){var Te=q.type;return Te===X?ee(z,L,q.props.children,te,q.key):L!==null&&(L.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===ce&&Hi(Te)===L.type)?(L=f(L,q.props),Ea(L,q),L.return=z,L):(L=fr(q.type,q.key,q.props,null,z.mode,te),Ea(L,q),L.return=z,L)}function I(z,L,q,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=Po(q,z.mode,te),L.return=z,L):(L=f(L,q.children||[]),L.return=z,L)}function ee(z,L,q,te,Te){return L===null||L.tag!==7?(L=Pi(q,z.mode,te,Te),L.return=z,L):(L=f(L,q),L.return=z,L)}function ie(z,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=hr(""+L,z.mode,q),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case D:return q=fr(L.type,L.key,L.props,null,z.mode,q),Ea(q,L),q.return=z,q;case B:return L=Po(L,z.mode,q),L.return=z,L;case ce:return L=Hi(L),ie(z,L,q)}if(kt(L)||ut(L))return L=Pi(L,z.mode,q,null),L.return=z,L;if(typeof L.then=="function")return ie(z,Sr(L),q);if(L.$$typeof===Y)return ie(z,Ta(z,L),q);Tr(z,L)}return null}function K(z,L,q,te){var Te=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Te!==null?null:R(z,L,""+q,te);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case D:return q.key===Te?N(z,L,q,te):null;case B:return q.key===Te?I(z,L,q,te):null;case ce:return q=Hi(q),K(z,L,q,te)}if(kt(q)||ut(q))return Te!==null?null:ee(z,L,q,te,null);if(typeof q.then=="function")return K(z,L,Sr(q),te);if(q.$$typeof===Y)return K(z,L,Ta(z,q),te);Tr(z,q)}return null}function Q(z,L,q,te,Te){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return z=z.get(q)||null,R(L,z,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case D:return z=z.get(te.key===null?q:te.key)||null,N(L,z,te,Te);case B:return z=z.get(te.key===null?q:te.key)||null,I(L,z,te,Te);case ce:return te=Hi(te),Q(z,L,q,te,Te)}if(kt(te)||ut(te))return z=z.get(q)||null,ee(L,z,te,Te,null);if(typeof te.then=="function")return Q(z,L,q,Sr(te),Te);if(te.$$typeof===Y)return Q(z,L,q,Ta(L,te),Te);Tr(L,te)}return null}function pe(z,L,q,te){for(var Te=null,ze=null,ve=L,Ne=L=0,je=null;ve!==null&&Ne<q.length;Ne++){ve.index>Ne?(je=ve,ve=null):je=ve.sibling;var Ge=K(z,ve,q[Ne],te);if(Ge===null){ve===null&&(ve=je);break}e&&ve&&Ge.alternate===null&&t(z,ve),L=h(Ge,L,Ne),ze===null?Te=Ge:ze.sibling=Ge,ze=Ge,ve=je}if(Ne===q.length)return n(z,ve),_e&&Yn(z,Ne),Te;if(ve===null){for(;Ne<q.length;Ne++)ve=ie(z,q[Ne],te),ve!==null&&(L=h(ve,L,Ne),ze===null?Te=ve:ze.sibling=ve,ze=ve);return _e&&Yn(z,Ne),Te}for(ve=o(ve);Ne<q.length;Ne++)je=Q(ve,z,Ne,q[Ne],te),je!==null&&(e&&je.alternate!==null&&ve.delete(je.key===null?Ne:je.key),L=h(je,L,Ne),ze===null?Te=je:ze.sibling=je,ze=je);return e&&ve.forEach(function(qs){return t(z,qs)}),_e&&Yn(z,Ne),Te}function we(z,L,q,te){if(q==null)throw Error(u(151));for(var Te=null,ze=null,ve=L,Ne=L=0,je=null,Ge=q.next();ve!==null&&!Ge.done;Ne++,Ge=q.next()){ve.index>Ne?(je=ve,ve=null):je=ve.sibling;var qs=K(z,ve,Ge.value,te);if(qs===null){ve===null&&(ve=je);break}e&&ve&&qs.alternate===null&&t(z,ve),L=h(qs,L,Ne),ze===null?Te=qs:ze.sibling=qs,ze=qs,ve=je}if(Ge.done)return n(z,ve),_e&&Yn(z,Ne),Te;if(ve===null){for(;!Ge.done;Ne++,Ge=q.next())Ge=ie(z,Ge.value,te),Ge!==null&&(L=h(Ge,L,Ne),ze===null?Te=Ge:ze.sibling=Ge,ze=Ge);return _e&&Yn(z,Ne),Te}for(ve=o(ve);!Ge.done;Ne++,Ge=q.next())Ge=Q(ve,z,Ne,Ge.value,te),Ge!==null&&(e&&Ge.alternate!==null&&ve.delete(Ge.key===null?Ne:Ge.key),L=h(Ge,L,Ne),ze===null?Te=Ge:ze.sibling=Ge,ze=Ge);return e&&ve.forEach(function(C1){return t(z,C1)}),_e&&Yn(z,Ne),Te}function Je(z,L,q,te){if(typeof q=="object"&&q!==null&&q.type===X&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case D:e:{for(var Te=q.key;L!==null;){if(L.key===Te){if(Te=q.type,Te===X){if(L.tag===7){n(z,L.sibling),te=f(L,q.props.children),te.return=z,z=te;break e}}else if(L.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===ce&&Hi(Te)===L.type){n(z,L.sibling),te=f(L,q.props),Ea(te,q),te.return=z,z=te;break e}n(z,L);break}else t(z,L);L=L.sibling}q.type===X?(te=Pi(q.props.children,z.mode,te,q.key),te.return=z,z=te):(te=fr(q.type,q.key,q.props,null,z.mode,te),Ea(te,q),te.return=z,z=te)}return b(z);case B:e:{for(Te=q.key;L!==null;){if(L.key===Te)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){n(z,L.sibling),te=f(L,q.children||[]),te.return=z,z=te;break e}else{n(z,L);break}else t(z,L);L=L.sibling}te=Po(q,z.mode,te),te.return=z,z=te}return b(z);case ce:return q=Hi(q),Je(z,L,q,te)}if(kt(q))return pe(z,L,q,te);if(ut(q)){if(Te=ut(q),typeof Te!="function")throw Error(u(150));return q=Te.call(q),we(z,L,q,te)}if(typeof q.then=="function")return Je(z,L,Sr(q),te);if(q.$$typeof===Y)return Je(z,L,Ta(z,q),te);Tr(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(n(z,L.sibling),te=f(L,q),te.return=z,z=te):(n(z,L),te=hr(q,z.mode,te),te.return=z,z=te),b(z)):n(z,L)}return function(z,L,q,te){try{Ra=0;var Te=Je(z,L,q,te);return Os=null,Te}catch(ve){if(ve===xs||ve===wa)throw ve;var ze=xt(29,ve,null,z.mode);return ze.lanes=te,ze.return=z,ze}}}var qi=Vc(!0),Ms=Vc(!1),Qn=!1;function xa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function kn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Fn(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ie&2)!==0){var f=o.pending;return f===null?t.next=t:(t.next=f.next,f.next=t),o.pending=t,t=Et(e),Bi(e,null,n),t}return lr(e,o,t,n),Et(e)}function Oa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,so(e,n)}}function Wo(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var f=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var b={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};h===null?f=h=b:h=h.next=b,n=n.next}while(n!==null);h===null?f=h=t:h=h.next=t}else f=h=t;n={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Zo=!1;function Ma(){if(Zo){var e=Es;if(e!==null)throw e}}function _a(e,t,n,o){Zo=!1;var f=e.updateQueue;Qn=!1;var h=f.firstBaseUpdate,b=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var N=R,I=N.next;N.next=null,b===null?h=I:b.next=I,b=N;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,R=ee.lastBaseUpdate,R!==b&&(R===null?ee.firstBaseUpdate=I:R.next=I,ee.lastBaseUpdate=N))}if(h!==null){var ie=f.baseState;b=0,ee=I=N=null,R=h;do{var K=R.lane&-536870913,Q=K!==R.lane;if(Q?(Ue&K)===K:(o&K)===K){K!==0&&K===Rs&&(Zo=!0),ee!==null&&(ee=ee.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var pe=e,we=R;K=t;var Je=n;switch(we.tag){case 1:if(pe=we.payload,typeof pe=="function"){ie=pe.call(Je,ie,K);break e}ie=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=we.payload,K=typeof pe=="function"?pe.call(Je,ie,K):pe,K==null)break e;ie=x({},ie,K);break e;case 2:Qn=!0}}K=R.callback,K!==null&&(e.flags|=64,Q&&(e.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ee===null?(I=ee=Q,N=ie):ee=ee.next=Q,b|=K;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;Q=R,R=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);ee===null&&(N=ie),f.baseState=N,f.firstBaseUpdate=I,f.lastBaseUpdate=ee,h===null&&(f.shared.lanes=0),Ls|=b,e.lanes=b,e.memoizedState=ie}}function zc(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function Jo(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)zc(n[e],t)}var Un=U(null),gi=U(0);function Ar(e,t){e=Zi,fe(gi,e),fe(Un,t),Zi=e|t.baseLanes}function $o(){fe(gi,Zi),fe(Un,Un.current)}function el(){Zi=gi.current,ne(Un),ne(gi)}var tn=U(null),un=null;function yi(e){var t=e.alternate;fe(r,r.current&1),fe(tn,e),un===null&&(t===null||Un.current!==null||t.memoizedState!==null)&&(un=e)}function Cr(e){fe(r,r.current),fe(tn,e),un===null&&(un=e)}function Gc(e){e.tag===22?(fe(r,r.current),fe(tn,e),un===null&&(un=e)):vi()}function vi(){fe(r,r.current),fe(tn,tn.current)}function s(e){ne(tn),un===e&&(un=null),ne(r)}var r=U(0);function l(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Lh(n)||kh(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var d=0,p=null,v=null,E=null,O=!1,V=!1,j=!1,Z=0,$=0,oe=null,J=0;function le(){throw Error(u(321))}function de(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jt(e[n],t[n]))return!1;return!0}function Ce(e,t,n,o,f,h){return d=h,p=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=e===null||e.memoizedState===null?gp:If,j=!1,h=n(o,f),j=!1,V&&(h=qe(t,n,o,f)),Be(e),h}function Be(e){_.H=il;var t=v!==null&&v.next!==null;if(d=0,E=v=p=null,O=!1,$=0,oe=null,t)throw Error(u(300));e===null||At||(e=e.dependencies,e!==null&&cn(e)&&(At=!0))}function qe(e,t,n,o){p=e;var f=0;do{if(V&&(oe=null),$=0,V=!1,25<=f)throw Error(u(301));if(f+=1,E=v=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}_.H=yp,h=t(n,o)}while(V);return h}function Fe(){var e=_.H,t=e.useState()[0];return t=typeof t.then=="function"?tl(t):t,e=e.useState()[0],(v!==null?v.memoizedState:null)!==e&&(p.flags|=1024),t}function Re(){var e=Z!==0;return Z=0,e}function Bt(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Tt(e){if(O){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}O=!1}d=0,E=v=p=null,V=!1,$=Z=0,oe=null}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return E===null?p.memoizedState=E=e:E=E.next=e,E}function We(){if(v===null){var e=p.alternate;e=e!==null?e.memoizedState:null}else e=v.next;var t=E===null?p.memoizedState:E.next;if(t!==null)E=t,v=e;else{if(e===null)throw p.alternate===null?Error(u(467)):Error(u(310));v=e,e={memoizedState:v.memoizedState,baseState:v.baseState,baseQueue:v.baseQueue,queue:v.queue,next:null},E===null?p.memoizedState=E=e:E=E.next=e}return E}function _s(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tl(e){var t=$;return $+=1,oe===null&&(oe=[]),e=Bc(oe,e,t),t=p,(E===null?t.memoizedState:E.next)===null&&(t=t.alternate,_.H=t===null||t.memoizedState===null?gp:If),e}function Hc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return tl(e);if(e.$$typeof===Y)return rt(e)}throw Error(u(438,String(e)))}function Lf(e){var t=null,n=p.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var o=p.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(f){return f.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=_s(),p.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),o=0;o<e;o++)n[o]=Pe;return t.index++,n}function Ii(e,t){return typeof t=="function"?t(e):t}function qc(e){var t=We();return kf(t,v,e)}function kf(e,t,n){var o=e.queue;if(o===null)throw Error(u(311));o.lastRenderedReducer=n;var f=e.baseQueue,h=o.pending;if(h!==null){if(f!==null){var b=f.next;f.next=h.next,h.next=b}t.baseQueue=f=h,o.pending=null}if(h=e.baseState,f===null)e.memoizedState=h;else{t=f.next;var R=b=null,N=null,I=t,ee=!1;do{var ie=I.lane&-536870913;if(ie!==I.lane?(Ue&ie)===ie:(d&ie)===ie){var K=I.revertLane;if(K===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),ie===Rs&&(ee=!0);else if((d&K)===K){I=I.next,K===Rs&&(ee=!0);continue}else ie={lane:0,revertLane:I.revertLane,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},N===null?(R=N=ie,b=h):N=N.next=ie,p.lanes|=K,Ls|=K;ie=I.action,j&&n(h,ie),h=I.hasEagerState?I.eagerState:n(h,ie)}else K={lane:ie,revertLane:I.revertLane,gesture:I.gesture,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},N===null?(R=N=K,b=h):N=N.next=K,p.lanes|=ie,Ls|=ie;I=I.next}while(I!==null&&I!==t);if(N===null?b=h:N.next=R,!Jt(h,e.memoizedState)&&(At=!0,ee&&(n=Es,n!==null)))throw n;e.memoizedState=h,e.baseState=b,e.baseQueue=N,o.lastRenderedState=h}return f===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Uf(e){var t=We(),n=t.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=e;var o=n.dispatch,f=n.pending,h=t.memoizedState;if(f!==null){n.pending=null;var b=f=f.next;do h=e(h,b.action),b=b.next;while(b!==f);Jt(h,t.memoizedState)||(At=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,o]}function jm(e,t,n){var o=p,f=We(),h=_e;if(h){if(n===void 0)throw Error(u(407));n=n()}else n=t();var b=!Jt((v||f).memoizedState,n);if(b&&(f.memoizedState=n,At=!0),f=f.queue,Pf(Vm.bind(null,o,f,e),[e]),f.getSnapshot!==t||b||E!==null&&E.memoizedState.tag&1){if(o.flags|=2048,wr(9,{destroy:void 0},Pm.bind(null,o,f,n,t),null),$e===null)throw Error(u(349));h||(d&127)!==0||Bm(o,t,n)}return n}function Bm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=p.updateQueue,t===null?(t=_s(),p.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Pm(e,t,n,o){t.value=n,t.getSnapshot=o,zm(t)&&Gm(e)}function Vm(e,t,n){return n(function(){zm(t)&&Gm(e)})}function zm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jt(e,n)}catch{return!0}}function Gm(e){var t=ji(e,2);t!==null&&pn(t,e,2)}function jf(e){var t=bt();if(typeof e=="function"){var n=e;if(e=n(),j){Gn(!0);try{n()}finally{Gn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:e},t}function Hm(e,t,n,o){return e.baseState=n,kf(e,v,typeof o=="function"?o:Ii)}function pS(e,t,n,o,f){if(Kc(e))throw Error(u(485));if(e=t.action,e!==null){var h={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){h.listeners.push(b)}};_.T!==null?n(!0):h.isTransition=!1,o(h),n=t.pending,n===null?(h.next=t.pending=h,qm(t,h)):(h.next=n.next,t.pending=n.next=h)}}function qm(e,t){var n=t.action,o=t.payload,f=e.state;if(t.isTransition){var h=_.T,b={};_.T=b;try{var R=n(f,o),N=_.S;N!==null&&N(b,R),Im(e,t,R)}catch(I){Bf(e,t,I)}finally{h!==null&&b.types!==null&&(h.types=b.types),_.T=h}}else try{h=n(f,o),Im(e,t,h)}catch(I){Bf(e,t,I)}}function Im(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(o){Ym(e,t,o)},function(o){return Bf(e,t,o)}):Ym(e,t,n)}function Ym(e,t,n){t.status="fulfilled",t.value=n,Km(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,qm(e,n)))}function Bf(e,t,n){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=n,Km(t),t=t.next;while(t!==o)}e.action=null}function Km(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Xm(e,t){return t}function Qm(e,t){if(_e){var n=$e.formState;if(n!==null){e:{var o=p;if(_e){if(Ye){t:{for(var f=Ye,h=en;f.nodeType!==8;){if(!h){f=null;break t}if(f=jn(f.nextSibling),f===null){f=null;break t}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){Ye=jn(f.nextSibling),o=f.data==="F!";break e}}on(o)}o=!1}o&&(t=n[0])}}return n=bt(),n.memoizedState=n.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xm,lastRenderedState:t},n.queue=o,n=dp.bind(null,p,o),o.dispatch=n,o=jf(!1),h=qf.bind(null,p,!1,o.queue),o=bt(),f={state:t,dispatch:null,action:e,pending:null},o.queue=f,n=pS.bind(null,p,f,h,n),f.dispatch=n,o.memoizedState=e,[t,n,!1]}function Fm(e){var t=We();return Wm(t,v,e)}function Wm(e,t,n){if(t=kf(e,t,Xm)[0],e=qc(Ii)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=tl(t)}catch(b){throw b===xs?wa:b}else o=t;t=We();var f=t.queue,h=f.dispatch;return n!==t.memoizedState&&(p.flags|=2048,wr(9,{destroy:void 0},gS.bind(null,f,n),null)),[o,h,e]}function gS(e,t){e.action=t}function Zm(e){var t=We(),n=v;if(n!==null)return Wm(t,n,e);We(),t=t.memoizedState,n=We();var o=n.queue.dispatch;return n.memoizedState=e,[t,o,!1]}function wr(e,t,n,o){return e={tag:e,create:n,deps:o,inst:t,next:null},t=p.updateQueue,t===null&&(t=_s(),p.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e),e}function Jm(){return We().memoizedState}function Ic(e,t,n,o){var f=bt();p.flags|=e,f.memoizedState=wr(1|t,{destroy:void 0},n,o===void 0?null:o)}function Yc(e,t,n,o){var f=We();o=o===void 0?null:o;var h=f.memoizedState.inst;v!==null&&o!==null&&de(o,v.memoizedState.deps)?f.memoizedState=wr(t,h,n,o):(p.flags|=e,f.memoizedState=wr(1|t,h,n,o))}function $m(e,t){Ic(8390656,8,e,t)}function Pf(e,t){Yc(2048,8,e,t)}function yS(e){p.flags|=4;var t=p.updateQueue;if(t===null)t=_s(),p.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function ep(e){var t=We().memoizedState;return yS({ref:t,nextImpl:e}),function(){if((Ie&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function tp(e,t){return Yc(4,2,e,t)}function np(e,t){return Yc(4,4,e,t)}function ip(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sp(e,t,n){n=n!=null?n.concat([e]):null,Yc(4,4,ip.bind(null,t,e),n)}function Vf(){}function ap(e,t){var n=We();t=t===void 0?null:t;var o=n.memoizedState;return t!==null&&de(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function rp(e,t){var n=We();t=t===void 0?null:t;var o=n.memoizedState;if(t!==null&&de(t,o[1]))return o[0];if(o=e(),j){Gn(!0);try{e()}finally{Gn(!1)}}return n.memoizedState=[o,t],o}function zf(e,t,n){return n===void 0||(d&1073741824)!==0&&(Ue&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=og(),p.lanes|=e,Ls|=e,n)}function op(e,t,n,o){return Jt(n,t)?n:Un.current!==null?(e=zf(e,n,o),Jt(e,t)||(At=!0),e):(d&42)===0||(d&1073741824)!==0&&(Ue&261930)===0?(At=!0,e.memoizedState=n):(e=og(),p.lanes|=e,Ls|=e,t)}function lp(e,t,n,o,f){var h=se.p;se.p=h!==0&&8>h?h:8;var b=_.T,R={};_.T=R,qf(e,!1,t,n);try{var N=f(),I=_.S;if(I!==null&&I(R,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var ee=Df(N,o);nl(e,t,ee,Rn(e))}else nl(e,t,o,Rn(e))}catch(ie){nl(e,t,{then:function(){},status:"rejected",reason:ie},Rn())}finally{se.p=h,b!==null&&R.types!==null&&(b.types=R.types),_.T=b}}function vS(){}function Gf(e,t,n,o){if(e.tag!==5)throw Error(u(476));var f=cp(e).queue;lp(e,f,t,ye,n===null?vS:function(){return up(e),n(o)})}function cp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:ye},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function up(e){var t=cp(e);t.next===null&&(t=e.alternate.memoizedState),nl(e,t.next.queue,{},Rn())}function Hf(){return rt(bl)}function fp(){return We().memoizedState}function hp(){return We().memoizedState}function bS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Rn();e=kn(n);var o=Fn(t,e,n);o!==null&&(pn(o,t,n),Oa(o,t,n)),t={cache:st()},e.payload=t;return}t=t.return}}function SS(e,t,n){var o=Rn();n={lane:o,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Kc(e)?mp(t,n):(n=jo(e,t,n,o),n!==null&&(pn(n,e,o),pp(n,t,o)))}function dp(e,t,n){var o=Rn();nl(e,t,n,o)}function nl(e,t,n,o){var f={lane:o,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kc(e))mp(t,f);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var b=t.lastRenderedState,R=h(b,n);if(f.hasEagerState=!0,f.eagerState=R,Jt(R,b))return lr(e,t,f,0),$e===null&&Mn(),!1}catch{}if(n=jo(e,t,f,o),n!==null)return pn(n,e,o),pp(n,t,o),!0}return!1}function qf(e,t,n,o){if(o={lane:2,revertLane:Th(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Kc(e)){if(t)throw Error(u(479))}else t=jo(e,n,o,2),t!==null&&pn(t,e,2)}function Kc(e){var t=e.alternate;return e===p||t!==null&&t===p}function mp(e,t){V=O=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pp(e,t,n){if((n&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,so(e,n)}}var il={readContext:rt,use:Hc,useCallback:le,useContext:le,useEffect:le,useImperativeHandle:le,useLayoutEffect:le,useInsertionEffect:le,useMemo:le,useReducer:le,useRef:le,useState:le,useDebugValue:le,useDeferredValue:le,useTransition:le,useSyncExternalStore:le,useId:le,useHostTransitionStatus:le,useFormState:le,useActionState:le,useOptimistic:le,useMemoCache:le,useCacheRefresh:le};il.useEffectEvent=le;var gp={readContext:rt,use:Hc,useCallback:function(e,t){return bt().memoizedState=[e,t===void 0?null:t],e},useContext:rt,useEffect:$m,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ic(4194308,4,ip.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ic(4194308,4,e,t)},useInsertionEffect:function(e,t){Ic(4,2,e,t)},useMemo:function(e,t){var n=bt();t=t===void 0?null:t;var o=e();if(j){Gn(!0);try{e()}finally{Gn(!1)}}return n.memoizedState=[o,t],o},useReducer:function(e,t,n){var o=bt();if(n!==void 0){var f=n(t);if(j){Gn(!0);try{n(t)}finally{Gn(!1)}}}else f=t;return o.memoizedState=o.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},o.queue=e,e=e.dispatch=SS.bind(null,p,e),[o.memoizedState,e]},useRef:function(e){var t=bt();return e={current:e},t.memoizedState=e},useState:function(e){e=jf(e);var t=e.queue,n=dp.bind(null,p,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Vf,useDeferredValue:function(e,t){var n=bt();return zf(n,e,t)},useTransition:function(){var e=jf(!1);return e=lp.bind(null,p,e.queue,!0,!1),bt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var o=p,f=bt();if(_e){if(n===void 0)throw Error(u(407));n=n()}else{if(n=t(),$e===null)throw Error(u(349));(Ue&127)!==0||Bm(o,t,n)}f.memoizedState=n;var h={value:n,getSnapshot:t};return f.queue=h,$m(Vm.bind(null,o,h,e),[e]),o.flags|=2048,wr(9,{destroy:void 0},Pm.bind(null,o,h,n,t),null),n},useId:function(){var e=bt(),t=$e.identifierPrefix;if(_e){var n=Nn,o=_n;n=(o&~(1<<32-qt(o)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Z++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=J++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Hf,useFormState:Qm,useActionState:Qm,useOptimistic:function(e){var t=bt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=qf.bind(null,p,!0,n),n.dispatch=t,[e,t]},useMemoCache:Lf,useCacheRefresh:function(){return bt().memoizedState=bS.bind(null,p)},useEffectEvent:function(e){var t=bt(),n={impl:e};return t.memoizedState=n,function(){if((Ie&2)!==0)throw Error(u(440));return n.impl.apply(void 0,arguments)}}},If={readContext:rt,use:Hc,useCallback:ap,useContext:rt,useEffect:Pf,useImperativeHandle:sp,useInsertionEffect:tp,useLayoutEffect:np,useMemo:rp,useReducer:qc,useRef:Jm,useState:function(){return qc(Ii)},useDebugValue:Vf,useDeferredValue:function(e,t){var n=We();return op(n,v.memoizedState,e,t)},useTransition:function(){var e=qc(Ii)[0],t=We().memoizedState;return[typeof e=="boolean"?e:tl(e),t]},useSyncExternalStore:jm,useId:fp,useHostTransitionStatus:Hf,useFormState:Fm,useActionState:Fm,useOptimistic:function(e,t){var n=We();return Hm(n,v,e,t)},useMemoCache:Lf,useCacheRefresh:hp};If.useEffectEvent=ep;var yp={readContext:rt,use:Hc,useCallback:ap,useContext:rt,useEffect:Pf,useImperativeHandle:sp,useInsertionEffect:tp,useLayoutEffect:np,useMemo:rp,useReducer:Uf,useRef:Jm,useState:function(){return Uf(Ii)},useDebugValue:Vf,useDeferredValue:function(e,t){var n=We();return v===null?zf(n,e,t):op(n,v.memoizedState,e,t)},useTransition:function(){var e=Uf(Ii)[0],t=We().memoizedState;return[typeof e=="boolean"?e:tl(e),t]},useSyncExternalStore:jm,useId:fp,useHostTransitionStatus:Hf,useFormState:Zm,useActionState:Zm,useOptimistic:function(e,t){var n=We();return v!==null?Hm(n,v,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Lf,useCacheRefresh:hp};yp.useEffectEvent=ep;function Yf(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:x({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Kf={enqueueSetState:function(e,t,n){e=e._reactInternals;var o=Rn(),f=kn(o);f.payload=t,n!=null&&(f.callback=n),t=Fn(e,f,o),t!==null&&(pn(t,e,o),Oa(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=Rn(),f=kn(o);f.tag=1,f.payload=t,n!=null&&(f.callback=n),t=Fn(e,f,o),t!==null&&(pn(t,e,o),Oa(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rn(),o=kn(n);o.tag=2,t!=null&&(o.callback=t),t=Fn(e,o,n),t!==null&&(pn(t,e,n),Oa(t,e,n))}};function vp(e,t,n,o,f,h,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,b):t.prototype&&t.prototype.isPureReactComponent?!ki(n,o)||!ki(f,h):!0}function bp(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&Kf.enqueueReplaceState(t,t.state,null)}function Na(e,t){var n=t;if("ref"in t){n={};for(var o in t)o!=="ref"&&(n[o]=t[o])}if(e=e.defaultProps){n===t&&(n=x({},n));for(var f in e)n[f]===void 0&&(n[f]=e[f])}return n}function Sp(e){Ui(e)}function Tp(e){console.error(e)}function Ap(e){Ui(e)}function Xc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function Cp(e,t,n){try{var o=e.onCaughtError;o(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Xf(e,t,n){return n=kn(n),n.tag=3,n.payload={element:null},n.callback=function(){Xc(e,t)},n}function wp(e){return e=kn(e),e.tag=3,e}function Rp(e,t,n,o){var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var h=o.value;e.payload=function(){return f(h)},e.callback=function(){Cp(t,n,o)}}var b=n.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Cp(t,n,o),typeof f!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var R=o.stack;this.componentDidCatch(o.value,{componentStack:R!==null?R:""})})}function TS(e,t,n,o,f){if(n.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=n.alternate,t!==null&&zi(t,n,f,!0),n=tn.current,n!==null){switch(n.tag){case 31:case 13:return un===null?au():n.alternate===null&&ht===0&&(ht=3),n.flags&=-257,n.flags|=65536,n.lanes=f,o===br?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([o]):t.add(o),vh(e,o,f)),!1;case 22:return n.flags|=65536,o===br?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([o]):n.add(o)),vh(e,o,f)),!1}throw Error(u(435,n.tag))}return vh(e,o,f),au(),!1}if(_e)return t=tn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=f,o!==pr&&(e=Error(u(422),{cause:o}),ba(an(e,n)))):(o!==pr&&(t=Error(u(423),{cause:o}),ba(an(t,n))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,o=an(o,n),f=Xf(e.stateNode,o,f),Wo(e,f),ht!==4&&(ht=2)),!1;var h=Error(u(520),{cause:o});if(h=an(h,n),fl===null?fl=[h]:fl.push(h),ht!==4&&(ht=2),t===null)return!0;o=an(o,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=f&-f,n.lanes|=e,e=Xf(n.stateNode,o,e),Wo(n,e),!1;case 1:if(t=n.type,h=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(ks===null||!ks.has(h))))return n.flags|=65536,f&=-f,n.lanes|=f,f=wp(f),Rp(f,e,n,o),Wo(n,f),!1}n=n.return}while(n!==null);return!1}var Qf=Error(u(461)),At=!1;function Pt(e,t,n,o){t.child=e===null?Ms(t,null,n,o):qi(t,e.child,n,o)}function Ep(e,t,n,o,f){n=n.render;var h=t.ref;if("ref"in o){var b={};for(var R in o)R!=="ref"&&(b[R]=o[R])}else b=o;return mi(t),o=Ce(e,t,n,b,h,f),R=Re(),e!==null&&!At?(Bt(e,t,f),Yi(e,t,f)):(_e&&R&&mr(t),t.flags|=1,Pt(e,t,o,f),t.child)}function xp(e,t,n,o,f){if(e===null){var h=n.type;return typeof h=="function"&&!cr(h)&&h.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=h,Op(e,t,h,o,f)):(e=fr(n.type,null,o,t,t.mode,f),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!nh(e,f)){var b=h.memoizedProps;if(n=n.compare,n=n!==null?n:ki,n(b,o)&&e.ref===t.ref)return Yi(e,t,f)}return t.flags|=1,e=An(h,o),e.ref=t.ref,e.return=t,t.child=e}function Op(e,t,n,o,f){if(e!==null){var h=e.memoizedProps;if(ki(h,o)&&e.ref===t.ref)if(At=!1,t.pendingProps=o=h,nh(e,f))(e.flags&131072)!==0&&(At=!0);else return t.lanes=e.lanes,Yi(e,t,f)}return Ff(e,t,n,o,f)}function Mp(e,t,n,o){var f=o.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|n:n,e!==null){for(o=t.child=e.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~h}else o=0,t.child=null;return _p(e,t,h,n,o)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&vr(t,h!==null?h.cachePool:null),h!==null?Ar(t,h):$o(),Gc(t);else return o=t.lanes=536870912,_p(e,t,h!==null?h.baseLanes|n:n,n,o)}else h!==null?(vr(t,h.cachePool),Ar(t,h),vi(),t.memoizedState=null):(e!==null&&vr(t,null),$o(),vi());return Pt(e,t,f,n),t.child}function sl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function _p(e,t,n,o,f){var h=Ko();return h=h===null?null:{parent:ot._currentValue,pool:h},t.memoizedState={baseLanes:n,cachePool:h},e!==null&&vr(t,null),$o(),Gc(t),e!==null&&zi(e,t,o,!0),t.childLanes=f,null}function Qc(e,t){return t=Wc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Np(e,t,n){return qi(t,e.child,null,n),e=Qc(t,t.pendingProps),e.flags|=2,s(t),t.memoizedState=null,e}function AS(e,t,n){var o=t.pendingProps,f=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(_e){if(o.mode==="hidden")return e=Qc(t,o),t.lanes=536870912,sl(null,e);if(Cr(t),(e=Ye)?(e=qg(e,en),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:hi!==null?{id:_n,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},n=Lc(e),n.return=t,t.child=n,vt=t,Ye=null)):e=null,e===null)throw on(t);return t.lanes=536870912,null}return Qc(t,o)}var h=e.memoizedState;if(h!==null){var b=h.dehydrated;if(Cr(t),f)if(t.flags&256)t.flags&=-257,t=Np(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(At||zi(e,t,n,!1),f=(n&e.childLanes)!==0,At||f){if(o=$e,o!==null&&(b=ao(o,n),b!==0&&b!==h.retryLane))throw h.retryLane=b,ji(e,b),pn(o,e,b),Qf;au(),t=Np(e,t,n)}else e=h.treeContext,Ye=jn(b.nextSibling),vt=t,_e=!0,Dn=null,en=!1,e!==null&&$t(t,e),t=Qc(t,o),t.flags|=4096;return t}return e=An(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Fc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(u(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ff(e,t,n,o,f){return mi(t),n=Ce(e,t,n,o,void 0,f),o=Re(),e!==null&&!At?(Bt(e,t,f),Yi(e,t,f)):(_e&&o&&mr(t),t.flags|=1,Pt(e,t,n,f),t.child)}function Dp(e,t,n,o,f,h){return mi(t),t.updateQueue=null,n=qe(t,o,n,f),Be(e),o=Re(),e!==null&&!At?(Bt(e,t,h),Yi(e,t,h)):(_e&&o&&mr(t),t.flags|=1,Pt(e,t,n,h),t.child)}function Lp(e,t,n,o,f){if(mi(t),t.stateNode===null){var h=vs,b=n.contextType;typeof b=="object"&&b!==null&&(h=rt(b)),h=new n(o,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Kf,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=o,h.state=t.memoizedState,h.refs={},xa(t),b=n.contextType,h.context=typeof b=="object"&&b!==null?rt(b):vs,h.state=t.memoizedState,b=n.getDerivedStateFromProps,typeof b=="function"&&(Yf(t,n,b,o),h.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(b=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),b!==h.state&&Kf.enqueueReplaceState(h,h.state,null),_a(t,o,h,f),Ma(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){h=t.stateNode;var R=t.memoizedProps,N=Na(n,R);h.props=N;var I=h.context,ee=n.contextType;b=vs,typeof ee=="object"&&ee!==null&&(b=rt(ee));var ie=n.getDerivedStateFromProps;ee=typeof ie=="function"||typeof h.getSnapshotBeforeUpdate=="function",R=t.pendingProps!==R,ee||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(R||I!==b)&&bp(t,h,o,b),Qn=!1;var K=t.memoizedState;h.state=K,_a(t,o,h,f),Ma(),I=t.memoizedState,R||K!==I||Qn?(typeof ie=="function"&&(Yf(t,n,ie,o),I=t.memoizedState),(N=Qn||vp(t,n,N,o,K,I,b))?(ee||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=I),h.props=o,h.state=I,h.context=b,o=N):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{h=t.stateNode,Fo(e,t),b=t.memoizedProps,ee=Na(n,b),h.props=ee,ie=t.pendingProps,K=h.context,I=n.contextType,N=vs,typeof I=="object"&&I!==null&&(N=rt(I)),R=n.getDerivedStateFromProps,(I=typeof R=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(b!==ie||K!==N)&&bp(t,h,o,N),Qn=!1,K=t.memoizedState,h.state=K,_a(t,o,h,f),Ma();var Q=t.memoizedState;b!==ie||K!==Q||Qn||e!==null&&e.dependencies!==null&&cn(e.dependencies)?(typeof R=="function"&&(Yf(t,n,R,o),Q=t.memoizedState),(ee=Qn||vp(t,n,ee,o,K,Q,N)||e!==null&&e.dependencies!==null&&cn(e.dependencies))?(I||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,Q,N),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,Q,N)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||b===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=Q),h.props=o,h.state=Q,h.context=N,o=ee):(typeof h.componentDidUpdate!="function"||b===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),o=!1)}return h=o,Fc(e,t),o=(t.flags&128)!==0,h||o?(h=t.stateNode,n=o&&typeof n.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&o?(t.child=qi(t,e.child,null,f),t.child=qi(t,null,n,f)):Pt(e,t,n,f),t.memoizedState=h.state,e=t.child):e=Yi(e,t,f),e}function kp(e,t,n,o){return Kn(),t.flags|=256,Pt(e,t,n,o),t.child}var Wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zf(e){return{baseLanes:e,cachePool:Uc()}}function Jf(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=wn),e}function Up(e,t,n){var o=t.pendingProps,f=!1,h=(t.flags&128)!==0,b;if((b=h)||(b=e!==null&&e.memoizedState===null?!1:(r.current&2)!==0),b&&(f=!0,t.flags&=-129),b=(t.flags&32)!==0,t.flags&=-33,e===null){if(_e){if(f?yi(t):vi(),(e=Ye)?(e=qg(e,en),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:hi!==null?{id:_n,overflow:Nn}:null,retryLane:536870912,hydrationErrors:null},n=Lc(e),n.return=t,t.child=n,vt=t,Ye=null)):e=null,e===null)throw on(t);return kh(e)?t.lanes=32:t.lanes=536870912,null}var R=o.children;return o=o.fallback,f?(vi(),f=t.mode,R=Wc({mode:"hidden",children:R},f),o=Pi(o,f,n,null),R.return=t,o.return=t,R.sibling=o,t.child=R,o=t.child,o.memoizedState=Zf(n),o.childLanes=Jf(e,b,n),t.memoizedState=Wf,sl(null,o)):(yi(t),$f(t,R))}var N=e.memoizedState;if(N!==null&&(R=N.dehydrated,R!==null)){if(h)t.flags&256?(yi(t),t.flags&=-257,t=eh(e,t,n)):t.memoizedState!==null?(vi(),t.child=e.child,t.flags|=128,t=null):(vi(),R=o.fallback,f=t.mode,o=Wc({mode:"visible",children:o.children},f),R=Pi(R,f,n,null),R.flags|=2,o.return=t,R.return=t,o.sibling=R,t.child=o,qi(t,e.child,null,n),o=t.child,o.memoizedState=Zf(n),o.childLanes=Jf(e,b,n),t.memoizedState=Wf,t=sl(null,o));else if(yi(t),kh(R)){if(b=R.nextSibling&&R.nextSibling.dataset,b)var I=b.dgst;b=I,o=Error(u(419)),o.stack="",o.digest=b,ba({value:o,source:null,stack:null}),t=eh(e,t,n)}else if(At||zi(e,t,n,!1),b=(n&e.childLanes)!==0,At||b){if(b=$e,b!==null&&(o=ao(b,n),o!==0&&o!==N.retryLane))throw N.retryLane=o,ji(e,o),pn(b,e,o),Qf;Lh(R)||au(),t=eh(e,t,n)}else Lh(R)?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,Ye=jn(R.nextSibling),vt=t,_e=!0,Dn=null,en=!1,e!==null&&$t(t,e),t=$f(t,o.children),t.flags|=4096);return t}return f?(vi(),R=o.fallback,f=t.mode,N=e.child,I=N.sibling,o=An(N,{mode:"hidden",children:o.children}),o.subtreeFlags=N.subtreeFlags&65011712,I!==null?R=An(I,R):(R=Pi(R,f,n,null),R.flags|=2),R.return=t,o.return=t,o.sibling=R,t.child=o,sl(null,o),o=t.child,R=e.child.memoizedState,R===null?R=Zf(n):(f=R.cachePool,f!==null?(N=ot._currentValue,f=f.parent!==N?{parent:N,pool:N}:f):f=Uc(),R={baseLanes:R.baseLanes|n,cachePool:f}),o.memoizedState=R,o.childLanes=Jf(e,b,n),t.memoizedState=Wf,sl(e.child,o)):(yi(t),n=e.child,e=n.sibling,n=An(n,{mode:"visible",children:o.children}),n.return=t,n.sibling=null,e!==null&&(b=t.deletions,b===null?(t.deletions=[e],t.flags|=16):b.push(e)),t.child=n,t.memoizedState=null,n)}function $f(e,t){return t=Wc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Wc(e,t){return e=xt(22,e,null,t),e.lanes=0,e}function eh(e,t,n){return qi(t,e.child,null,n),e=$f(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jp(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),gr(e.return,t,n)}function th(e,t,n,o,f,h){var b=e.memoizedState;b===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:f,treeForkCount:h}:(b.isBackwards=t,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=n,b.tailMode=f,b.treeForkCount=h)}function Bp(e,t,n){var o=t.pendingProps,f=o.revealOrder,h=o.tail;o=o.children;var b=r.current,R=(b&2)!==0;if(R?(b=b&1|2,t.flags|=128):b&=1,fe(r,b),Pt(e,t,o,n),o=_e?Vi:0,!R&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jp(e,n,t);else if(e.tag===19)jp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(n=t.child,f=null;n!==null;)e=n.alternate,e!==null&&l(e)===null&&(f=n),n=n.sibling;n=f,n===null?(f=t.child,t.child=null):(f=n.sibling,n.sibling=null),th(t,!1,f,n,h,o);break;case"backwards":case"unstable_legacy-backwards":for(n=null,f=t.child,t.child=null;f!==null;){if(e=f.alternate,e!==null&&l(e)===null){t.child=f;break}e=f.sibling,f.sibling=n,n=f,f=e}th(t,!0,n,null,h,o);break;case"together":th(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function Yi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ls|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(zi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,n=An(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=An(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nh(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&cn(e)))}function CS(e,t,n){switch(t.tag){case 3:Ut(t,t.stateNode.containerInfo),di(t,ot,e.memoizedState.cache),Kn();break;case 27:case 5:is(t);break;case 4:Ut(t,t.stateNode.containerInfo);break;case 10:di(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Cr(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(yi(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Up(e,t,n):(yi(t),e=Yi(e,t,n),e!==null?e.sibling:null);yi(t);break;case 19:var f=(e.flags&128)!==0;if(o=(n&t.childLanes)!==0,o||(zi(e,t,n,!1),o=(n&t.childLanes)!==0),f){if(o)return Bp(e,t,n);t.flags|=128}if(f=t.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),fe(r,r.current),o)break;return null;case 22:return t.lanes=0,Mp(e,t,n,t.pendingProps);case 24:di(t,ot,e.memoizedState.cache)}return Yi(e,t,n)}function Pp(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)At=!0;else{if(!nh(e,n)&&(t.flags&128)===0)return At=!1,CS(e,t,n);At=(e.flags&131072)!==0}else At=!1,_e&&(t.flags&1048576)!==0&&kc(t,Vi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=Hi(t.elementType),t.type=e,typeof e=="function")cr(e)?(o=Na(e,o),t.tag=1,t=Lp(null,t,e,o,n)):(t.tag=0,t=Ff(null,t,e,o,n));else{if(e!=null){var f=e.$$typeof;if(f===re){t.tag=11,t=Ep(null,t,e,o,n);break e}else if(f===me){t.tag=14,t=xp(null,t,e,o,n);break e}}throw t=_t(e)||e,Error(u(306,t,""))}}return t;case 0:return Ff(e,t,t.type,t.pendingProps,n);case 1:return o=t.type,f=Na(o,t.pendingProps),Lp(e,t,o,f,n);case 3:e:{if(Ut(t,t.stateNode.containerInfo),e===null)throw Error(u(387));o=t.pendingProps;var h=t.memoizedState;f=h.element,Fo(e,t),_a(t,o,null,n);var b=t.memoizedState;if(o=b.cache,di(t,ot,o),o!==h.cache&&Ho(t,[ot],n,!0),Ma(),o=b.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:b.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=kp(e,t,o,n);break e}else if(o!==f){f=an(Error(u(424)),t),ba(f),t=kp(e,t,o,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ye=jn(e.firstChild),vt=t,_e=!0,Dn=null,en=!0,n=Ms(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kn(),o===f){t=Yi(e,t,n);break e}Pt(e,t,o,n)}t=t.child}return t;case 26:return Fc(e,t),e===null?(n=Fg(t.type,null,t.pendingProps,null))?t.memoizedState=n:_e||(n=t.type,e=t.pendingProps,o=hu(De.current).createElement(n),o[Rt]=t,o[Nt]=e,Vt(o,n,e),pt(o),t.stateNode=o):t.memoizedState=Fg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return is(t),e===null&&_e&&(o=t.stateNode=Kg(t.type,t.pendingProps,De.current),vt=t,en=!0,f=Ye,Ps(t.type)?(Uh=f,Ye=jn(o.firstChild)):Ye=f),Pt(e,t,t.pendingProps.children,n),Fc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&_e&&((f=o=Ye)&&(o=$S(o,t.type,t.pendingProps,en),o!==null?(t.stateNode=o,vt=t,Ye=jn(o.firstChild),en=!1,f=!0):f=!1),f||on(t)),is(t),f=t.type,h=t.pendingProps,b=e!==null?e.memoizedProps:null,o=h.children,_h(f,h)?o=null:b!==null&&_h(f,b)&&(t.flags|=32),t.memoizedState!==null&&(f=Ce(e,t,Fe,null,null,n),bl._currentValue=f),Fc(e,t),Pt(e,t,o,n),t.child;case 6:return e===null&&_e&&((e=n=Ye)&&(n=e1(n,t.pendingProps,en),n!==null?(t.stateNode=n,vt=t,Ye=null,e=!0):e=!1),e||on(t)),null;case 13:return Up(e,t,n);case 4:return Ut(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=qi(t,null,o,n):Pt(e,t,o,n),t.child;case 11:return Ep(e,t,t.type,t.pendingProps,n);case 7:return Pt(e,t,t.pendingProps,n),t.child;case 8:return Pt(e,t,t.pendingProps.children,n),t.child;case 12:return Pt(e,t,t.pendingProps.children,n),t.child;case 10:return o=t.pendingProps,di(t,t.type,o.value),Pt(e,t,o.children,n),t.child;case 9:return f=t.type._context,o=t.pendingProps.children,mi(t),f=rt(f),o=o(f),t.flags|=1,Pt(e,t,o,n),t.child;case 14:return xp(e,t,t.type,t.pendingProps,n);case 15:return Op(e,t,t.type,t.pendingProps,n);case 19:return Bp(e,t,n);case 31:return AS(e,t,n);case 22:return Mp(e,t,n,t.pendingProps);case 24:return mi(t),o=rt(ot),e===null?(f=Ko(),f===null&&(f=$e,h=st(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=n),f=h),t.memoizedState={parent:o,cache:f},xa(t),di(t,ot,f)):((e.lanes&n)!==0&&(Fo(e,t),_a(t,null,null,n),Ma()),f=e.memoizedState,h=t.memoizedState,f.parent!==o?(f={parent:o,cache:o},t.memoizedState=f,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=f),di(t,ot,o)):(o=h.cache,di(t,ot,o),o!==f.cache&&Ho(t,[ot],n,!0))),Pt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function Ki(e){e.flags|=4}function ih(e,t,n,o,f){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(fg())e.flags|=8192;else throw pi=br,Xo}else e.flags&=-16777217}function Vp(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ey(t))if(fg())e.flags|=8192;else throw pi=br,Xo}function Zc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?no():536870912,e.lanes|=t,Or|=t)}function al(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var f=e.child;f!==null;)n|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)n|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function wS(e,t,n){var o=t.pendingProps;switch(zo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return tt(t),null;case 3:return n=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Xn(ot),nt(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ln(t)?Ki(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,As())),tt(t),null;case 26:var f=t.type,h=t.memoizedState;return e===null?(Ki(t),h!==null?(tt(t),Vp(t,h)):(tt(t),ih(t,f,null,o,n))):h?h!==e.memoizedState?(Ki(t),tt(t),Vp(t,h)):(tt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&Ki(t),tt(t),ih(t,f,e,o,n)),null;case 27:if(Ws(t),n=De.current,f=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Ki(t);else{if(!o){if(t.stateNode===null)throw Error(u(166));return tt(t),null}e=he.current,Ln(t)?Go(t):(e=Kg(f,o,n),t.stateNode=e,Ki(t))}return tt(t),null;case 5:if(Ws(t),f=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Ki(t);else{if(!o){if(t.stateNode===null)throw Error(u(166));return tt(t),null}if(h=he.current,Ln(t))Go(t);else{var b=hu(De.current);switch(h){case 1:h=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:h=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":h=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":h=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":h=b.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?b.createElement(f,{is:o.is}):b.createElement(f)}}h[Rt]=t,h[Nt]=o;e:for(b=t.child;b!==null;){if(b.tag===5||b.tag===6)h.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}t.stateNode=h;e:switch(Vt(h,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ki(t)}}return tt(t),ih(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&Ki(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(u(166));if(e=De.current,Ln(t)){if(e=t.stateNode,n=t.memoizedProps,o=null,f=vt,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}e[Rt]=t,e=!!(e.nodeValue===n||o!==null&&o.suppressHydrationWarning===!0||Ug(e.nodeValue,n)),e||on(t,!0)}else e=hu(e).createTextNode(o),e[Rt]=t,t.stateNode=e}return tt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(o=Ln(t),n!==null){if(e===null){if(!o)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[Rt]=t}else Kn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;tt(t),e=!1}else n=As(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(s(t),t):(s(t),null);if((t.flags&128)!==0)throw Error(u(558))}return tt(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Ln(t),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(u(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(u(317));f[Rt]=t}else Kn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;tt(t),f=!1}else f=As(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return t.flags&256?(s(t),t):(s(t),null)}return s(t),(t.flags&128)!==0?(t.lanes=n,t):(n=o!==null,e=e!==null&&e.memoizedState!==null,n&&(o=t.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==f&&(o.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Zc(t,t.updateQueue),tt(t),null);case 4:return nt(),e===null&&Rh(t.stateNode.containerInfo),tt(t),null;case 10:return Xn(t.type),tt(t),null;case 19:if(ne(r),o=t.memoizedState,o===null)return tt(t),null;if(f=(t.flags&128)!==0,h=o.rendering,h===null)if(f)al(o,!1);else{if(ht!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=l(e),h!==null){for(t.flags|=128,al(o,!1),e=h.updateQueue,t.updateQueue=e,Zc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ur(n,e),n=n.sibling;return fe(r,r.current&1|2),_e&&Yn(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&Me()>nu&&(t.flags|=128,f=!0,al(o,!1),t.lanes=4194304)}else{if(!f)if(e=l(h),e!==null){if(t.flags|=128,f=!0,e=e.updateQueue,t.updateQueue=e,Zc(t,e),al(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!_e)return tt(t),null}else 2*Me()-o.renderingStartTime>nu&&n!==536870912&&(t.flags|=128,f=!0,al(o,!1),t.lanes=4194304);o.isBackwards?(h.sibling=t.child,t.child=h):(e=o.last,e!==null?e.sibling=h:t.child=h,o.last=h)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Me(),e.sibling=null,n=r.current,fe(r,f?n&1|2:n&1),_e&&Yn(t,o.treeForkCount),e):(tt(t),null);case 22:case 23:return s(t),el(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(n&536870912)!==0&&(t.flags&128)===0&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),n=t.updateQueue,n!==null&&Zc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==n&&(t.flags|=2048),e!==null&&ne(Gi),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Xn(ot),tt(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function RS(e,t){switch(zo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xn(ot),nt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ws(t),null;case 31:if(t.memoizedState!==null){if(s(t),t.alternate===null)throw Error(u(340));Kn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(s(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));Kn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ne(r),null;case 4:return nt(),null;case 10:return Xn(t.type),null;case 22:case 23:return s(t),el(),e!==null&&ne(Gi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Xn(ot),null;case 25:return null;default:return null}}function zp(e,t){switch(zo(t),t.tag){case 3:Xn(ot),nt();break;case 26:case 27:case 5:Ws(t);break;case 4:nt();break;case 31:t.memoizedState!==null&&s(t);break;case 13:s(t);break;case 19:ne(r);break;case 10:Xn(t.type);break;case 22:case 23:s(t),el(),e!==null&&ne(Gi);break;case 24:Xn(ot)}}function rl(e,t){try{var n=t.updateQueue,o=n!==null?n.lastEffect:null;if(o!==null){var f=o.next;n=f;do{if((n.tag&e)===e){o=void 0;var h=n.create,b=n.inst;o=h(),b.destroy=o}n=n.next}while(n!==f)}}catch(R){Xe(t,t.return,R)}}function Ns(e,t,n){try{var o=t.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var h=f.next;o=h;do{if((o.tag&e)===e){var b=o.inst,R=b.destroy;if(R!==void 0){b.destroy=void 0,f=t;var N=n,I=R;try{I()}catch(ee){Xe(f,N,ee)}}}o=o.next}while(o!==h)}}catch(ee){Xe(t,t.return,ee)}}function Gp(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Jo(t,n)}catch(o){Xe(e,e.return,o)}}}function Hp(e,t,n){n.props=Na(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(o){Xe(e,t,o)}}function ol(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof n=="function"?e.refCleanup=n(o):n.current=o}}catch(f){Xe(e,t,f)}}function bi(e,t){var n=e.ref,o=e.refCleanup;if(n!==null)if(typeof o=="function")try{o()}catch(f){Xe(e,t,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(f){Xe(e,t,f)}else n.current=null}function qp(e){var t=e.type,n=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&o.focus();break e;case"img":n.src?o.src=n.src:n.srcSet&&(o.srcset=n.srcSet)}}catch(f){Xe(e,e.return,f)}}function sh(e,t,n){try{var o=e.stateNode;XS(o,e.type,n,t),o[Nt]=t}catch(f){Xe(e,e.return,f)}}function Ip(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ps(e.type)||e.tag===4}function ah(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ip(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ps(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rh(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=qn));else if(o!==4&&(o===27&&Ps(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(rh(e,t,n),e=e.sibling;e!==null;)rh(e,t,n),e=e.sibling}function Jc(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(o===27&&Ps(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Jc(e,t,n),e=e.sibling;e!==null;)Jc(e,t,n),e=e.sibling}function Yp(e){var t=e.stateNode,n=e.memoizedProps;try{for(var o=e.type,f=t.attributes;f.length;)t.removeAttributeNode(f[0]);Vt(t,o,n),t[Rt]=e,t[Nt]=n}catch(h){Xe(e,e.return,h)}}var Xi=!1,Ct=!1,oh=!1,Kp=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function ES(e,t){if(e=e.containerInfo,Oh=bu,e=ar(e),rr(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var f=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var b=0,R=-1,N=-1,I=0,ee=0,ie=e,K=null;t:for(;;){for(var Q;ie!==n||f!==0&&ie.nodeType!==3||(R=b+f),ie!==h||o!==0&&ie.nodeType!==3||(N=b+o),ie.nodeType===3&&(b+=ie.nodeValue.length),(Q=ie.firstChild)!==null;)K=ie,ie=Q;for(;;){if(ie===e)break t;if(K===n&&++I===f&&(R=b),K===h&&++ee===o&&(N=b),(Q=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=Q}n=R===-1||N===-1?null:{start:R,end:N}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mh={focusedElem:e,selectionRange:n},bu=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){switch(t=Lt,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)f=e[n],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,n=t,f=h.memoizedProps,h=h.memoizedState,o=n.stateNode;try{var pe=Na(n.type,f);e=o.getSnapshotBeforeUpdate(pe,h),o.__reactInternalSnapshotBeforeUpdate=e}catch(we){Xe(n,n.return,we)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Dh(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Dh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}}function Xp(e,t,n){var o=n.flags;switch(n.tag){case 0:case 11:case 15:Fi(e,n),o&4&&rl(5,n);break;case 1:if(Fi(e,n),o&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(b){Xe(n,n.return,b)}else{var f=Na(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(f,t,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Xe(n,n.return,b)}}o&64&&Gp(n),o&512&&ol(n,n.return);break;case 3:if(Fi(e,n),o&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Jo(e,t)}catch(b){Xe(n,n.return,b)}}break;case 27:t===null&&o&4&&Yp(n);case 26:case 5:Fi(e,n),t===null&&o&4&&qp(n),o&512&&ol(n,n.return);break;case 12:Fi(e,n);break;case 31:Fi(e,n),o&4&&Wp(e,n);break;case 13:Fi(e,n),o&4&&Zp(e,n),o&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=US.bind(null,n),t1(e,n))));break;case 22:if(o=n.memoizedState!==null||Xi,!o){t=t!==null&&t.memoizedState!==null||Ct,f=Xi;var h=Ct;Xi=o,(Ct=t)&&!h?Wi(e,n,(n.subtreeFlags&8772)!==0):Fi(e,n),Xi=f,Ct=h}break;case 30:break;default:Fi(e,n)}}function Qp(e){var t=e.alternate;t!==null&&(e.alternate=null,Qp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&co(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var at=null,fn=!1;function Qi(e,t,n){for(n=n.child;n!==null;)Fp(e,t,n),n=n.sibling}function Fp(e,t,n){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(xi,n)}catch{}switch(n.tag){case 26:Ct||bi(n,t),Qi(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ct||bi(n,t);var o=at,f=fn;Ps(n.type)&&(at=n.stateNode,fn=!1),Qi(e,t,n),gl(n.stateNode),at=o,fn=f;break;case 5:Ct||bi(n,t);case 6:if(o=at,f=fn,at=null,Qi(e,t,n),at=o,fn=f,at!==null)if(fn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(n.stateNode)}catch(h){Xe(n,t,h)}else try{at.removeChild(n.stateNode)}catch(h){Xe(n,t,h)}break;case 18:at!==null&&(fn?(e=at,Gg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),jr(e)):Gg(at,n.stateNode));break;case 4:o=at,f=fn,at=n.stateNode.containerInfo,fn=!0,Qi(e,t,n),at=o,fn=f;break;case 0:case 11:case 14:case 15:Ns(2,n,t),Ct||Ns(4,n,t),Qi(e,t,n);break;case 1:Ct||(bi(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"&&Hp(n,t,o)),Qi(e,t,n);break;case 21:Qi(e,t,n);break;case 22:Ct=(o=Ct)||n.memoizedState!==null,Qi(e,t,n),Ct=o;break;default:Qi(e,t,n)}}function Wp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{jr(e)}catch(n){Xe(t,t.return,n)}}}function Zp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{jr(e)}catch(n){Xe(t,t.return,n)}}function xS(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Kp),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Kp),t;default:throw Error(u(435,e.tag))}}function $c(e,t){var n=xS(e);t.forEach(function(o){if(!n.has(o)){n.add(o);var f=jS.bind(null,e,o);o.then(f,f)}})}function hn(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var f=n[o],h=e,b=t,R=b;e:for(;R!==null;){switch(R.tag){case 27:if(Ps(R.type)){at=R.stateNode,fn=!1;break e}break;case 5:at=R.stateNode,fn=!1;break e;case 3:case 4:at=R.stateNode.containerInfo,fn=!0;break e}R=R.return}if(at===null)throw Error(u(160));Fp(h,b,f),at=null,fn=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Jp(t,e),t=t.sibling}var Wn=null;function Jp(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hn(t,e),dn(e),o&4&&(Ns(3,e,e.return),rl(3,e),Ns(5,e,e.return));break;case 1:hn(t,e),dn(e),o&512&&(Ct||n===null||bi(n,n.return)),o&64&&Xi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?o:n.concat(o))));break;case 26:var f=Wn;if(hn(t,e),dn(e),o&512&&(Ct||n===null||bi(n,n.return)),o&4){var h=n!==null?n.memoizedState:null;if(o=e.memoizedState,n===null)if(o===null)if(e.stateNode===null){e:{o=e.type,n=e.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":h=f.getElementsByTagName("title")[0],(!h||h[rs]||h[Rt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(o),f.head.insertBefore(h,f.querySelector("head > title"))),Vt(h,o,n),h[Rt]=e,pt(h),o=h;break e;case"link":var b=Jg("link","href",f).get(o+(n.href||""));if(b){for(var R=0;R<b.length;R++)if(h=b[R],h.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&h.getAttribute("rel")===(n.rel==null?null:n.rel)&&h.getAttribute("title")===(n.title==null?null:n.title)&&h.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){b.splice(R,1);break t}}h=f.createElement(o),Vt(h,o,n),f.head.appendChild(h);break;case"meta":if(b=Jg("meta","content",f).get(o+(n.content||""))){for(R=0;R<b.length;R++)if(h=b[R],h.getAttribute("content")===(n.content==null?null:""+n.content)&&h.getAttribute("name")===(n.name==null?null:n.name)&&h.getAttribute("property")===(n.property==null?null:n.property)&&h.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&h.getAttribute("charset")===(n.charSet==null?null:n.charSet)){b.splice(R,1);break t}}h=f.createElement(o),Vt(h,o,n),f.head.appendChild(h);break;default:throw Error(u(468,o))}h[Rt]=e,pt(h),o=h}e.stateNode=o}else $g(f,e.type,e.stateNode);else e.stateNode=Zg(f,o,e.memoizedProps);else h!==o?(h===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):h.count--,o===null?$g(f,e.type,e.stateNode):Zg(f,o,e.memoizedProps)):o===null&&e.stateNode!==null&&sh(e,e.memoizedProps,n.memoizedProps)}break;case 27:hn(t,e),dn(e),o&512&&(Ct||n===null||bi(n,n.return)),n!==null&&o&4&&sh(e,e.memoizedProps,n.memoizedProps);break;case 5:if(hn(t,e),dn(e),o&512&&(Ct||n===null||bi(n,n.return)),e.flags&32){f=e.stateNode;try{si(f,"")}catch(pe){Xe(e,e.return,pe)}}o&4&&e.stateNode!=null&&(f=e.memoizedProps,sh(e,f,n!==null?n.memoizedProps:f)),o&1024&&(oh=!0);break;case 6:if(hn(t,e),dn(e),o&4){if(e.stateNode===null)throw Error(u(162));o=e.memoizedProps,n=e.stateNode;try{n.nodeValue=o}catch(pe){Xe(e,e.return,pe)}}break;case 3:if(pu=null,f=Wn,Wn=du(t.containerInfo),hn(t,e),Wn=f,dn(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{jr(t.containerInfo)}catch(pe){Xe(e,e.return,pe)}oh&&(oh=!1,$p(e));break;case 4:o=Wn,Wn=du(e.stateNode.containerInfo),hn(t,e),dn(e),Wn=o;break;case 12:hn(t,e),dn(e);break;case 31:hn(t,e),dn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,$c(e,o)));break;case 13:hn(t,e),dn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(tu=Me()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,$c(e,o)));break;case 22:f=e.memoizedState!==null;var N=n!==null&&n.memoizedState!==null,I=Xi,ee=Ct;if(Xi=I||f,Ct=ee||N,hn(t,e),Ct=ee,Xi=I,dn(e),o&8192)e:for(t=e.stateNode,t._visibility=f?t._visibility&-2:t._visibility|1,f&&(n===null||N||Xi||Ct||Da(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){N=n=t;try{if(h=N.stateNode,f)b=h.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{R=N.stateNode;var ie=N.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;R.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(pe){Xe(N,N.return,pe)}}}else if(t.tag===6){if(n===null){N=t;try{N.stateNode.nodeValue=f?"":N.memoizedProps}catch(pe){Xe(N,N.return,pe)}}}else if(t.tag===18){if(n===null){N=t;try{var Q=N.stateNode;f?Hg(Q,!0):Hg(N.stateNode,!1)}catch(pe){Xe(N,N.return,pe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(n=o.retryQueue,n!==null&&(o.retryQueue=null,$c(e,n))));break;case 19:hn(t,e),dn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,$c(e,o)));break;case 30:break;case 21:break;default:hn(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{for(var n,o=e.return;o!==null;){if(Ip(o)){n=o;break}o=o.return}if(n==null)throw Error(u(160));switch(n.tag){case 27:var f=n.stateNode,h=ah(e);Jc(e,h,f);break;case 5:var b=n.stateNode;n.flags&32&&(si(b,""),n.flags&=-33);var R=ah(e);Jc(e,R,b);break;case 3:case 4:var N=n.stateNode.containerInfo,I=ah(e);rh(e,I,N);break;default:throw Error(u(161))}}catch(ee){Xe(e,e.return,ee)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $p(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;$p(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Fi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Xp(e,t.alternate,t),t=t.sibling}function Da(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ns(4,t,t.return),Da(t);break;case 1:bi(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Hp(t,t.return,n),Da(t);break;case 27:gl(t.stateNode);case 26:case 5:bi(t,t.return),Da(t);break;case 22:t.memoizedState===null&&Da(t);break;case 30:Da(t);break;default:Da(t)}e=e.sibling}}function Wi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,f=e,h=t,b=h.flags;switch(h.tag){case 0:case 11:case 15:Wi(f,h,n),rl(4,h);break;case 1:if(Wi(f,h,n),o=h,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(I){Xe(o,o.return,I)}if(o=h,f=o.updateQueue,f!==null){var R=o.stateNode;try{var N=f.shared.hiddenCallbacks;if(N!==null)for(f.shared.hiddenCallbacks=null,f=0;f<N.length;f++)zc(N[f],R)}catch(I){Xe(o,o.return,I)}}n&&b&64&&Gp(h),ol(h,h.return);break;case 27:Yp(h);case 26:case 5:Wi(f,h,n),n&&o===null&&b&4&&qp(h),ol(h,h.return);break;case 12:Wi(f,h,n);break;case 31:Wi(f,h,n),n&&b&4&&Wp(f,h);break;case 13:Wi(f,h,n),n&&b&4&&Zp(f,h);break;case 22:h.memoizedState===null&&Wi(f,h,n),ol(h,h.return);break;case 30:break;default:Wi(f,h,n)}t=t.sibling}}function lh(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Aa(n))}function ch(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Aa(e))}function Zn(e,t,n,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)eg(e,t,n,o),t=t.sibling}function eg(e,t,n,o){var f=t.flags;switch(t.tag){case 0:case 11:case 15:Zn(e,t,n,o),f&2048&&rl(9,t);break;case 1:Zn(e,t,n,o);break;case 3:Zn(e,t,n,o),f&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Aa(e)));break;case 12:if(f&2048){Zn(e,t,n,o),e=t.stateNode;try{var h=t.memoizedProps,b=h.id,R=h.onPostCommit;typeof R=="function"&&R(b,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){Xe(t,t.return,N)}}else Zn(e,t,n,o);break;case 31:Zn(e,t,n,o);break;case 13:Zn(e,t,n,o);break;case 23:break;case 22:h=t.stateNode,b=t.alternate,t.memoizedState!==null?h._visibility&2?Zn(e,t,n,o):ll(e,t):h._visibility&2?Zn(e,t,n,o):(h._visibility|=2,Rr(e,t,n,o,(t.subtreeFlags&10256)!==0||!1)),f&2048&&lh(b,t);break;case 24:Zn(e,t,n,o),f&2048&&ch(t.alternate,t);break;default:Zn(e,t,n,o)}}function Rr(e,t,n,o,f){for(f=f&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,b=t,R=n,N=o,I=b.flags;switch(b.tag){case 0:case 11:case 15:Rr(h,b,R,N,f),rl(8,b);break;case 23:break;case 22:var ee=b.stateNode;b.memoizedState!==null?ee._visibility&2?Rr(h,b,R,N,f):ll(h,b):(ee._visibility|=2,Rr(h,b,R,N,f)),f&&I&2048&&lh(b.alternate,b);break;case 24:Rr(h,b,R,N,f),f&&I&2048&&ch(b.alternate,b);break;default:Rr(h,b,R,N,f)}t=t.sibling}}function ll(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,o=t,f=o.flags;switch(o.tag){case 22:ll(n,o),f&2048&&lh(o.alternate,o);break;case 24:ll(n,o),f&2048&&ch(o.alternate,o);break;default:ll(n,o)}t=t.sibling}}var cl=8192;function Er(e,t,n){if(e.subtreeFlags&cl)for(e=e.child;e!==null;)tg(e,t,n),e=e.sibling}function tg(e,t,n){switch(e.tag){case 26:Er(e,t,n),e.flags&cl&&e.memoizedState!==null&&d1(n,Wn,e.memoizedState,e.memoizedProps);break;case 5:Er(e,t,n);break;case 3:case 4:var o=Wn;Wn=du(e.stateNode.containerInfo),Er(e,t,n),Wn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=cl,cl=16777216,Er(e,t,n),cl=o):Er(e,t,n));break;default:Er(e,t,n)}}function ng(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ul(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var o=t[n];Lt=o,sg(o,e)}ng(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ig(e),e=e.sibling}function ig(e){switch(e.tag){case 0:case 11:case 15:ul(e),e.flags&2048&&Ns(9,e,e.return);break;case 3:ul(e);break;case 12:ul(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,eu(e)):ul(e);break;default:ul(e)}}function eu(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var o=t[n];Lt=o,sg(o,e)}ng(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ns(8,t,t.return),eu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,eu(t));break;default:eu(t)}e=e.sibling}}function sg(e,t){for(;Lt!==null;){var n=Lt;switch(n.tag){case 0:case 11:case 15:Ns(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var o=n.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Aa(n.memoizedState.cache)}if(o=n.child,o!==null)o.return=n,Lt=o;else e:for(n=e;Lt!==null;){o=Lt;var f=o.sibling,h=o.return;if(Qp(o),o===n){Lt=null;break e}if(f!==null){f.return=h,Lt=f;break e}Lt=h}}}var OS={getCacheForType:function(e){var t=rt(ot),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return rt(ot).controller.signal}},MS=typeof WeakMap=="function"?WeakMap:Map,Ie=0,$e=null,Le=null,Ue=0,Ke=0,Cn=null,Ds=!1,xr=!1,uh=!1,Zi=0,ht=0,Ls=0,La=0,fh=0,wn=0,Or=0,fl=null,mn=null,hh=!1,tu=0,ag=0,nu=1/0,iu=null,ks=null,Ot=0,Us=null,Mr=null,Ji=0,dh=0,mh=null,rg=null,hl=0,ph=null;function Rn(){return(Ie&2)!==0&&Ue!==0?Ue&-Ue:_.T!==null?Th():ro()}function og(){if(wn===0)if((Ue&536870912)===0||_e){var e=Oi;Oi<<=1,(Oi&3932160)===0&&(Oi=262144),wn=e}else wn=536870912;return e=tn.current,e!==null&&(e.flags|=32),wn}function pn(e,t,n){(e===$e&&(Ke===2||Ke===9)||e.cancelPendingCommit!==null)&&(_r(e,0),js(e,Ue,wn,!1)),jt(e,n),((Ie&2)===0||e!==$e)&&(e===$e&&((Ie&2)===0&&(La|=n),ht===4&&js(e,Ue,wn,!1)),Si(e))}function lg(e,t,n){if((Ie&6)!==0)throw Error(u(327));var o=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ss(e,t),f=o?DS(e,t):yh(e,t,!0),h=o;do{if(f===0){xr&&!o&&js(e,t,0,!1);break}else{if(n=e.current.alternate,h&&!_S(n)){f=yh(e,t,!1),h=!1;continue}if(f===2){if(h=t,e.errorRecoveryDisabledLanes&h)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){t=b;e:{var R=e;f=fl;var N=R.current.memoizedState.isDehydrated;if(N&&(_r(R,b).flags|=256),b=yh(R,b,!1),b!==2){if(uh&&!N){R.errorRecoveryDisabledLanes|=h,La|=h,f=4;break e}h=mn,mn=f,h!==null&&(mn===null?mn=h:mn.push.apply(mn,h))}f=b}if(h=!1,f!==2)continue}}if(f===1){_r(e,0),js(e,t,0,!0);break}e:{switch(o=e,h=f,h){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:js(o,t,wn,!Ds);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(f=tu+300-Me(),10<f)){if(js(o,t,wn,!Ds),mt(o,0,!0)!==0)break e;Ji=t,o.timeoutHandle=Vg(cg.bind(null,o,n,mn,iu,hh,t,wn,La,Or,Ds,h,"Throttled",-0,0),f);break e}cg(o,n,mn,iu,hh,t,wn,La,Or,Ds,h,null,-0,0)}}break}while(!0);Si(e)}function cg(e,t,n,o,f,h,b,R,N,I,ee,ie,K,Q){if(e.timeoutHandle=-1,ie=t.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qn},tg(t,h,ie);var pe=(h&62914560)===h?tu-Me():(h&4194048)===h?ag-Me():0;if(pe=m1(ie,pe),pe!==null){Ji=h,e.cancelPendingCommit=pe(yg.bind(null,e,t,h,n,o,f,b,R,N,ee,ie,null,K,Q)),js(e,h,b,!I);return}}yg(e,t,h,n,o,f,b,R,N)}function _S(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var o=0;o<n.length;o++){var f=n[o],h=f.getSnapshot;f=f.value;try{if(!Jt(h(),f))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function js(e,t,n,o){t&=~fh,t&=~La,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var f=t;0<f;){var h=31-qt(f),b=1<<h;o[h]=-1,f&=~b}n!==0&&Jl(e,n,t)}function su(){return(Ie&6)===0?(dl(0),!1):!0}function gh(){if(Le!==null){if(Ke===0)var e=Le.return;else e=Le,ln=Dt=null,Tt(e),Os=null,Ra=0,e=Le;for(;e!==null;)zp(e.alternate,e),e=e.return;Le=null}}function _r(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,WS(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Ji=0,gh(),$e=e,Le=n=An(e.current,null),Ue=t,Ke=0,Cn=null,Ds=!1,xr=ss(e,t),uh=!1,Or=wn=fh=La=Ls=ht=0,mn=fl=null,hh=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var f=31-qt(o),h=1<<f;t|=e[f],o&=~h}return Zi=t,Mn(),n}function ug(e,t){p=null,_.H=il,t===xs||t===wa?(t=Qo(),Ke=3):t===Xo?(t=Qo(),Ke=4):Ke=t===Qf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Cn=t,Le===null&&(ht=1,Xc(e,an(t,e.current)))}function fg(){var e=tn.current;return e===null?!0:(Ue&4194048)===Ue?un===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?e===un:!1}function hg(){var e=_.H;return _.H=il,e===null?il:e}function dg(){var e=_.A;return _.A=OS,e}function au(){ht=4,Ds||(Ue&4194048)!==Ue&&tn.current!==null||(xr=!0),(Ls&134217727)===0&&(La&134217727)===0||$e===null||js($e,Ue,wn,!1)}function yh(e,t,n){var o=Ie;Ie|=2;var f=hg(),h=dg();($e!==e||Ue!==t)&&(iu=null,_r(e,t)),t=!1;var b=ht;e:do try{if(Ke!==0&&Le!==null){var R=Le,N=Cn;switch(Ke){case 8:gh(),b=6;break e;case 3:case 2:case 9:case 6:tn.current===null&&(t=!0);var I=Ke;if(Ke=0,Cn=null,Nr(e,R,N,I),n&&xr){b=0;break e}break;default:I=Ke,Ke=0,Cn=null,Nr(e,R,N,I)}}NS(),b=ht;break}catch(ee){ug(e,ee)}while(!0);return t&&e.shellSuspendCounter++,ln=Dt=null,Ie=o,_.H=f,_.A=h,Le===null&&($e=null,Ue=0,Mn()),b}function NS(){for(;Le!==null;)mg(Le)}function DS(e,t){var n=Ie;Ie|=2;var o=hg(),f=dg();$e!==e||Ue!==t?(iu=null,nu=Me()+500,_r(e,t)):xr=ss(e,t);e:do try{if(Ke!==0&&Le!==null){t=Le;var h=Cn;t:switch(Ke){case 1:Ke=0,Cn=null,Nr(e,t,h,1);break;case 2:case 9:if(jc(h)){Ke=0,Cn=null,pg(t);break}t=function(){Ke!==2&&Ke!==9||$e!==e||(Ke=7),Si(e)},h.then(t,t);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:jc(h)?(Ke=0,Cn=null,pg(t)):(Ke=0,Cn=null,Nr(e,t,h,7));break;case 5:var b=null;switch(Le.tag){case 26:b=Le.memoizedState;case 5:case 27:var R=Le;if(b?ey(b):R.stateNode.complete){Ke=0,Cn=null;var N=R.sibling;if(N!==null)Le=N;else{var I=R.return;I!==null?(Le=I,ru(I)):Le=null}break t}}Ke=0,Cn=null,Nr(e,t,h,5);break;case 6:Ke=0,Cn=null,Nr(e,t,h,6);break;case 8:gh(),ht=6;break e;default:throw Error(u(462))}}LS();break}catch(ee){ug(e,ee)}while(!0);return ln=Dt=null,_.H=o,_.A=f,Ie=n,Le!==null?0:($e=null,Ue=0,Mn(),ht)}function LS(){for(;Le!==null&&!Ia();)mg(Le)}function mg(e){var t=Pp(e.alternate,e,Zi);e.memoizedProps=e.pendingProps,t===null?ru(e):Le=t}function pg(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Dp(n,t,t.pendingProps,t.type,void 0,Ue);break;case 11:t=Dp(n,t,t.pendingProps,t.type.render,t.ref,Ue);break;case 5:Tt(t);default:zp(n,t),t=Le=ur(t,Zi),t=Pp(n,t,Zi)}e.memoizedProps=e.pendingProps,t===null?ru(e):Le=t}function Nr(e,t,n,o){ln=Dt=null,Tt(t),Os=null,Ra=0;var f=t.return;try{if(TS(e,f,t,n,Ue)){ht=1,Xc(e,an(n,e.current)),Le=null;return}}catch(h){if(f!==null)throw Le=f,h;ht=1,Xc(e,an(n,e.current)),Le=null;return}t.flags&32768?(_e||o===1?e=!0:xr||(Ue&536870912)!==0?e=!1:(Ds=e=!0,(o===2||o===9||o===3||o===6)&&(o=tn.current,o!==null&&o.tag===13&&(o.flags|=16384))),gg(t,e)):ru(t)}function ru(e){var t=e;do{if((t.flags&32768)!==0){gg(t,Ds);return}e=t.return;var n=wS(t.alternate,t,Zi);if(n!==null){Le=n;return}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);ht===0&&(ht=5)}function gg(e,t){do{var n=RS(e.alternate,e);if(n!==null){n.flags&=32767,Le=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Le=e;return}Le=e=n}while(e!==null);ht=6,Le=null}function yg(e,t,n,o,f,h,b,R,N){e.cancelPendingCommit=null;do ou();while(Ot!==0);if((Ie&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(h=t.lanes|t.childLanes,h|=Uo,lf(e,n,h,b,R,N),e===$e&&(Le=$e=null,Ue=0),Mr=t,Us=e,Ji=n,dh=h,mh=f,rg=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,BS(ea,function(){return Ag(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=_.T,_.T=null,f=se.p,se.p=2,b=Ie,Ie|=4;try{ES(e,t,n)}finally{Ie=b,se.p=f,_.T=o}}Ot=1,vg(),bg(),Sg()}}function vg(){if(Ot===1){Ot=0;var e=Us,t=Mr,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=_.T,_.T=null;var o=se.p;se.p=2;var f=Ie;Ie|=4;try{Jp(t,e);var h=Mh,b=ar(e.containerInfo),R=h.focusedElem,N=h.selectionRange;if(b!==R&&R&&R.ownerDocument&&Mc(R.ownerDocument.documentElement,R)){if(N!==null&&rr(R)){var I=N.start,ee=N.end;if(ee===void 0&&(ee=I),"selectionStart"in R)R.selectionStart=I,R.selectionEnd=Math.min(ee,R.value.length);else{var ie=R.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var Q=K.getSelection(),pe=R.textContent.length,we=Math.min(N.start,pe),Je=N.end===void 0?we:Math.min(N.end,pe);!Q.extend&&we>Je&&(b=Je,Je=we,we=b);var z=ga(R,we),L=ga(R,Je);if(z&&L&&(Q.rangeCount!==1||Q.anchorNode!==z.node||Q.anchorOffset!==z.offset||Q.focusNode!==L.node||Q.focusOffset!==L.offset)){var q=ie.createRange();q.setStart(z.node,z.offset),Q.removeAllRanges(),we>Je?(Q.addRange(q),Q.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),Q.addRange(q))}}}}for(ie=[],Q=R;Q=Q.parentNode;)Q.nodeType===1&&ie.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ie.length;R++){var te=ie[R];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}bu=!!Oh,Mh=Oh=null}finally{Ie=f,se.p=o,_.T=n}}e.current=t,Ot=2}}function bg(){if(Ot===2){Ot=0;var e=Us,t=Mr,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=_.T,_.T=null;var o=se.p;se.p=2;var f=Ie;Ie|=4;try{Xp(e,t.alternate,t)}finally{Ie=f,se.p=o,_.T=n}}Ot=3}}function Sg(){if(Ot===4||Ot===3){Ot=0,Jr();var e=Us,t=Mr,n=Ji,o=rg;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ot=5:(Ot=0,Mr=Us=null,Tg(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(ks=null),Ka(n),t=t.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(xi,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=_.T,f=se.p,se.p=2,_.T=null;try{for(var h=e.onRecoverableError,b=0;b<o.length;b++){var R=o[b];h(R.value,{componentStack:R.stack})}}finally{_.T=t,se.p=f}}(Ji&3)!==0&&ou(),Si(e),f=e.pendingLanes,(n&261930)!==0&&(f&42)!==0?e===ph?hl++:(hl=0,ph=e):hl=0,dl(0)}}function Tg(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Aa(t)))}function ou(){return vg(),bg(),Sg(),Ag()}function Ag(){if(Ot!==5)return!1;var e=Us,t=dh;dh=0;var n=Ka(Ji),o=_.T,f=se.p;try{se.p=32>n?32:n,_.T=null,n=mh,mh=null;var h=Us,b=Ji;if(Ot=0,Mr=Us=null,Ji=0,(Ie&6)!==0)throw Error(u(331));var R=Ie;if(Ie|=4,ig(h.current),eg(h,h.current,b,n),Ie=R,dl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(xi,h)}catch{}return!0}finally{se.p=f,_.T=o,Tg(e,t)}}function Cg(e,t,n){t=an(n,t),t=Xf(e.stateNode,t,2),e=Fn(e,t,2),e!==null&&(jt(e,2),Si(e))}function Xe(e,t,n){if(e.tag===3)Cg(e,e,n);else for(;t!==null;){if(t.tag===3){Cg(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ks===null||!ks.has(o))){e=an(n,e),n=wp(2),o=Fn(t,n,2),o!==null&&(Rp(n,o,t,e),jt(o,2),Si(o));break}}t=t.return}}function vh(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new MS;var f=new Set;o.set(t,f)}else f=o.get(t),f===void 0&&(f=new Set,o.set(t,f));f.has(n)||(uh=!0,f.add(n),e=kS.bind(null,e,t,n),t.then(e,e))}function kS(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,$e===e&&(Ue&n)===n&&(ht===4||ht===3&&(Ue&62914560)===Ue&&300>Me()-tu?(Ie&2)===0&&_r(e,0):fh|=n,Or===Ue&&(Or=0)),Si(e)}function wg(e,t){t===0&&(t=no()),e=ji(e,t),e!==null&&(jt(e,t),Si(e))}function US(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),wg(e,n)}function jS(e,t){var n=0;switch(e.tag){case 31:case 13:var o=e.stateNode,f=e.memoizedState;f!==null&&(n=f.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(u(314))}o!==null&&o.delete(t),wg(e,n)}function BS(e,t){return Ei(e,t)}var lu=null,Dr=null,bh=!1,cu=!1,Sh=!1,Bs=0;function Si(e){e!==Dr&&e.next===null&&(Dr===null?lu=Dr=e:Dr=Dr.next=e),cu=!0,bh||(bh=!0,VS())}function dl(e,t){if(!Sh&&cu){Sh=!0;do for(var n=!1,o=lu;o!==null;){if(e!==0){var f=o.pendingLanes;if(f===0)var h=0;else{var b=o.suspendedLanes,R=o.pingedLanes;h=(1<<31-qt(42|e)+1)-1,h&=f&~(b&~R),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(n=!0,Og(o,h))}else h=Ue,h=mt(o,o===$e?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||ss(o,h)||(n=!0,Og(o,h));o=o.next}while(n);Sh=!1}}function PS(){Rg()}function Rg(){cu=bh=!1;var e=0;Bs!==0&&FS()&&(e=Bs);for(var t=Me(),n=null,o=lu;o!==null;){var f=o.next,h=Eg(o,t);h===0?(o.next=null,n===null?lu=f:n.next=f,f===null&&(Dr=n)):(n=o,(e!==0||(h&3)!==0)&&(cu=!0)),o=f}Ot!==0&&Ot!==5||dl(e),Bs!==0&&(Bs=0)}function Eg(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,f=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var b=31-qt(h),R=1<<b,N=f[b];N===-1?((R&n)===0||(R&o)!==0)&&(f[b]=of(R,t)):N<=t&&(e.expiredLanes|=R),h&=~R}if(t=$e,n=Ue,n=mt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,n===0||e===t&&(Ke===2||Ke===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Js(o),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||ss(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(o!==null&&Js(o),Ka(n)){case 2:case 8:n=$s;break;case 32:n=ea;break;case 268435456:n=Gt;break;default:n=ea}return o=xg.bind(null,e),n=Ei(n,o),e.callbackPriority=t,e.callbackNode=n,t}return o!==null&&o!==null&&Js(o),e.callbackPriority=2,e.callbackNode=null,2}function xg(e,t){if(Ot!==0&&Ot!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ou()&&e.callbackNode!==n)return null;var o=Ue;return o=mt(e,e===$e?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(lg(e,o,t),Eg(e,Me()),e.callbackNode!=null&&e.callbackNode===n?xg.bind(null,e):null)}function Og(e,t){if(ou())return null;lg(e,t,!0)}function VS(){ZS(function(){(Ie&6)!==0?Ei($r,PS):Rg()})}function Th(){if(Bs===0){var e=Rs;e===0&&(e=ta,ta<<=1,(ta&261888)===0&&(ta=256)),Bs=e}return Bs}function Mg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ra(""+e)}function _g(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function zS(e,t,n,o,f){if(t==="submit"&&n&&n.stateNode===f){var h=Mg((f[Nt]||null).action),b=o.submitter;b&&(t=(t=b[Nt]||null)?Mg(t.formAction):b.getAttribute("formAction"),t!==null&&(h=t,b=null));var R=new nr("action","action",null,o,f);e.push({event:R,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Bs!==0){var N=b?_g(f,b):new FormData(f);Gf(n,{pending:!0,data:N,method:f.method,action:h},null,N)}}else typeof h=="function"&&(R.preventDefault(),N=b?_g(f,b):new FormData(f),Gf(n,{pending:!0,data:N,method:f.method,action:h},h,N))},currentTarget:f}]})}}for(var Ah=0;Ah<ko.length;Ah++){var Ch=ko[Ah],GS=Ch.toLowerCase(),HS=Ch[0].toUpperCase()+Ch.slice(1);Tn(GS,"on"+HS)}Tn(_c,"onAnimationEnd"),Tn(No,"onAnimationIteration"),Tn(fi,"onAnimationStart"),Tn("dblclick","onDoubleClick"),Tn("focusin","onFocus"),Tn("focusout","onBlur"),Tn(Do,"onTransitionRun"),Tn(Mf,"onTransitionStart"),Tn(Nc,"onTransitionCancel"),Tn(Lo,"onTransitionEnd"),cs("onMouseEnter",["mouseout","mouseover"]),cs("onMouseLeave",["mouseout","mouseover"]),cs("onPointerEnter",["pointerout","pointerover"]),cs("onPointerLeave",["pointerout","pointerover"]),ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ml));function Ng(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],f=o.event;o=o.listeners;e:{var h=void 0;if(t)for(var b=o.length-1;0<=b;b--){var R=o[b],N=R.instance,I=R.currentTarget;if(R=R.listener,N!==h&&f.isPropagationStopped())break e;h=R,f.currentTarget=I;try{h(f)}catch(ee){Ui(ee)}f.currentTarget=null,h=N}else for(b=0;b<o.length;b++){if(R=o[b],N=R.instance,I=R.currentTarget,R=R.listener,N!==h&&f.isPropagationStopped())break e;h=R,f.currentTarget=I;try{h(f)}catch(ee){Ui(ee)}f.currentTarget=null,h=N}}}}function ke(e,t){var n=t[oo];n===void 0&&(n=t[oo]=new Set);var o=e+"__bubble";n.has(o)||(Dg(t,e,2,!1),n.add(o))}function wh(e,t,n){var o=0;t&&(o|=4),Dg(n,e,o,t)}var uu="_reactListening"+Math.random().toString(36).slice(2);function Rh(e){if(!e[uu]){e[uu]=!0,uo.forEach(function(n){n!=="selectionchange"&&(qS.has(n)||wh(n,!1,e),wh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uu]||(t[uu]=!0,wh("selectionchange",!1,t))}}function Dg(e,t,n,o){switch(oy(t)){case 2:var f=y1;break;case 8:f=v1;break;default:f=zh}n=f.bind(null,t,n,e),f=void 0,!fs||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(f=!0),o?f!==void 0?e.addEventListener(t,n,{capture:!0,passive:f}):e.addEventListener(t,n,!0):f!==void 0?e.addEventListener(t,n,{passive:f}):e.addEventListener(t,n,!1)}function Eh(e,t,n,o,f){var h=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var R=o.stateNode.containerInfo;if(R===f)break;if(b===4)for(b=o.return;b!==null;){var N=b.tag;if((N===3||N===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;R!==null;){if(b=os(R),b===null)return;if(N=b.tag,N===5||N===6||N===26||N===27){o=h=b;continue e}R=R.parentNode}}o=o.return}go(function(){var I=h,ee=mo(n),ie=[];e:{var K=Dc.get(e);if(K!==void 0){var Q=nr,pe=e;switch(e){case"keypress":if(tr(n)===0)break e;case"keydown":case"keyup":Q=li;break;case"focusin":pe="focus",Q=hs;break;case"focusout":pe="blur",Q=hs;break;case"beforeblur":case"afterblur":Q=hs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=rc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=wf;break;case _c:case No:case fi:Q=yf;break;case Lo:Q=fc;break;case"scroll":case"scrollend":Q=mf;break;case"wheel":Q=hc;break;case"copy":case"cut":case"paste":Q=bf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=cc;break;case"toggle":case"beforetoggle":Q=mc}var we=(t&4)!==0,Je=!we&&(e==="scroll"||e==="scrollend"),z=we?K!==null?K+"Capture":null:K;we=[];for(var L=I,q;L!==null;){var te=L;if(q=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||q===null||z===null||(te=Ni(L,z),te!=null&&we.push(pl(L,te,q))),Je)break;L=L.return}0<we.length&&(K=new Q(K,pe,null,n,ee),ie.push({event:K,listeners:we}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",K&&n!==er&&(pe=n.relatedTarget||n.fromElement)&&(os(pe)||pe[as]))break e;if((Q||K)&&(K=ee.window===ee?ee:(K=ee.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(pe=n.relatedTarget||n.toElement,Q=I,pe=pe?os(pe):null,pe!==null&&(Je=y(pe),we=pe.tag,pe!==Je||we!==5&&we!==27&&we!==6)&&(pe=null)):(Q=null,pe=I),Q!==pe)){if(we=ac,te="onMouseLeave",z="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(we=cc,te="onPointerLeave",z="onPointerEnter",L="pointer"),Je=Q==null?K:ia(Q),q=pe==null?K:ia(pe),K=new we(te,L+"leave",Q,n,ee),K.target=Je,K.relatedTarget=q,te=null,os(ee)===I&&(we=new we(z,L+"enter",pe,n,ee),we.target=q,we.relatedTarget=Je,te=we),Je=te,Q&&pe)t:{for(we=IS,z=Q,L=pe,q=0,te=z;te;te=we(te))q++;te=0;for(var Te=L;Te;Te=we(Te))te++;for(;0<q-te;)z=we(z),q--;for(;0<te-q;)L=we(L),te--;for(;q--;){if(z===L||L!==null&&z===L.alternate){we=z;break t}z=we(z),L=we(L)}we=null}else we=null;Q!==null&&Lg(ie,K,Q,we,!1),pe!==null&&Je!==null&&Lg(ie,Je,pe,we,!0)}}e:{if(K=I?ia(I):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var ze=Co;else if(Ao(K))if(wo)ze=Ec;else{ze=wc;var ve=pa}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?I&&$a(I.elementType)&&(ze=Co):ze=Rc;if(ze&&(ze=ze(e,I))){Tc(ie,ze,n,ee);break e}ve&&ve(e,K,I),e==="focusout"&&I&&K.type==="number"&&I.memoizedProps.value!=null&&ho(K,"number",K.value)}switch(ve=I?ia(I):window,e){case"focusin":(Ao(ve)||ve.contentEditable==="true")&&(ci=ve,ya=I,va=null);break;case"focusout":va=ya=ci=null;break;case"mousedown":Oo=!0;break;case"contextmenu":case"mouseup":case"dragend":Oo=!1,or(ie,n,ee);break;case"selectionchange":if(Kt)break;case"keydown":case"keyup":or(ie,n,ee)}var Ne;if(sr)e:{switch(e){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else ms?vc(e,n)&&(je="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(je="onCompositionStart");je&&(bn&&n.locale!=="ko"&&(ms||je!=="onCompositionStart"?je==="onCompositionEnd"&&ms&&(Ne=yo()):(Zt=ee,oi="value"in Zt?Zt.value:Zt.textContent,ms=!0)),ve=fu(I,je),0<ve.length&&(je=new To(je,e,null,n,ee),ie.push({event:je,listeners:ve}),Ne?je.data=Ne:(Ne=bc(n),Ne!==null&&(je.data=Ne)))),(Ne=ha?xf(e,n):Sc(e,n))&&(je=fu(I,"onBeforeInput"),0<je.length&&(ve=new To("onBeforeInput","beforeinput",null,n,ee),ie.push({event:ve,listeners:je}),ve.data=Ne)),zS(ie,e,I,n,ee)}Ng(ie,t)})}function pl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fu(e,t){for(var n=t+"Capture",o=[];e!==null;){var f=e,h=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=Ni(e,n),f!=null&&o.unshift(pl(e,f,h)),f=Ni(e,t),f!=null&&o.push(pl(e,f,h))),e.tag===3)return o;e=e.return}return[]}function IS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Lg(e,t,n,o,f){for(var h=t._reactName,b=[];n!==null&&n!==o;){var R=n,N=R.alternate,I=R.stateNode;if(R=R.tag,N!==null&&N===o)break;R!==5&&R!==26&&R!==27||I===null||(N=I,f?(I=Ni(n,h),I!=null&&b.unshift(pl(n,I,N))):f||(I=Ni(n,h),I!=null&&b.push(pl(n,I,N)))),n=n.return}b.length!==0&&e.push({event:t,listeners:b})}var YS=/\r\n?/g,KS=/\u0000|\uFFFD/g;function kg(e){return(typeof e=="string"?e:""+e).replace(YS,`
`).replace(KS,"")}function Ug(e,t){return t=kg(t),kg(e)===t}function Ze(e,t,n,o,f,h){switch(n){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||si(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&si(e,""+o);break;case"className":Wa(e,"class",o);break;case"tabIndex":Wa(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Wa(e,n,o);break;case"style":Ae(e,o,h);break;case"data":if(t!=="object"){Wa(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(n);break}o=ra(""+o),e.setAttribute(n,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(n==="formAction"?(t!=="input"&&Ze(e,t,"name",f.name,f,null),Ze(e,t,"formEncType",f.formEncType,f,null),Ze(e,t,"formMethod",f.formMethod,f,null),Ze(e,t,"formTarget",f.formTarget,f,null)):(Ze(e,t,"encType",f.encType,f,null),Ze(e,t,"method",f.method,f,null),Ze(e,t,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(n);break}o=ra(""+o),e.setAttribute(n,o);break;case"onClick":o!=null&&(e.onclick=qn);break;case"onScroll":o!=null&&ke("scroll",e);break;case"onScrollEnd":o!=null&&ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(u(61));if(n=o.__html,n!=null){if(f.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}n=ra(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(n,""+o):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":o===!0?e.setAttribute(n,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(n,o):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(n,o):e.removeAttribute(n);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(n):e.setAttribute(n,o);break;case"popover":ke("beforetoggle",e),ke("toggle",e),sa(e,"popover",o);break;case"xlinkActuate":xn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":xn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":xn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":xn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":xn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":xn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":xn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":xn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":xn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":sa(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=It.get(n)||n,sa(e,n,o))}}function xh(e,t,n,o,f,h){switch(n){case"style":Ae(e,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(u(61));if(n=o.__html,n!=null){if(f.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"children":typeof o=="string"?si(e,o):(typeof o=="number"||typeof o=="bigint")&&si(e,""+o);break;case"onScroll":o!=null&&ke("scroll",e);break;case"onScrollEnd":o!=null&&ke("scrollend",e);break;case"onClick":o!=null&&(e.onclick=qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!it.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(f=n.endsWith("Capture"),t=n.slice(2,f?n.length-7:void 0),h=e[Nt]||null,h=h!=null?h[n]:null,typeof h=="function"&&e.removeEventListener(t,h,f),typeof o=="function")){typeof h!="function"&&h!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,o,f);break e}n in e?e[n]=o:o===!0?e.setAttribute(n,""):sa(e,n,o)}}}function Vt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",e),ke("load",e);var o=!1,f=!1,h;for(h in n)if(n.hasOwnProperty(h)){var b=n[h];if(b!=null)switch(h){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Ze(e,t,h,b,n,null)}}f&&Ze(e,t,"srcSet",n.srcSet,n,null),o&&Ze(e,t,"src",n.src,n,null);return;case"input":ke("invalid",e);var R=h=b=f=null,N=null,I=null;for(o in n)if(n.hasOwnProperty(o)){var ee=n[o];if(ee!=null)switch(o){case"name":f=ee;break;case"type":b=ee;break;case"checked":N=ee;break;case"defaultChecked":I=ee;break;case"value":h=ee;break;case"defaultValue":R=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(u(137,t));break;default:Ze(e,t,o,ee,n,null)}}Mi(e,h,R,N,I,b,f,!1);return;case"select":ke("invalid",e),o=b=h=null;for(f in n)if(n.hasOwnProperty(f)&&(R=n[f],R!=null))switch(f){case"value":h=R;break;case"defaultValue":b=R;break;case"multiple":o=R;default:Ze(e,t,f,R,n,null)}t=h,n=b,e.multiple=!!o,t!=null?us(e,!!o,t,!1):n!=null&&us(e,!!o,n,!0);return;case"textarea":ke("invalid",e),h=f=o=null;for(b in n)if(n.hasOwnProperty(b)&&(R=n[b],R!=null))switch(b){case"value":o=R;break;case"defaultValue":f=R;break;case"children":h=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(u(91));break;default:Ze(e,t,b,R,n,null)}sc(e,o,f,h);return;case"option":for(N in n)n.hasOwnProperty(N)&&(o=n[N],o!=null)&&(N==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":Ze(e,t,N,o,n,null));return;case"dialog":ke("beforetoggle",e),ke("toggle",e),ke("cancel",e),ke("close",e);break;case"iframe":case"object":ke("load",e);break;case"video":case"audio":for(o=0;o<ml.length;o++)ke(ml[o],e);break;case"image":ke("error",e),ke("load",e);break;case"details":ke("toggle",e);break;case"embed":case"source":case"link":ke("error",e),ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in n)if(n.hasOwnProperty(I)&&(o=n[I],o!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Ze(e,t,I,o,n,null)}return;default:if($a(t)){for(ee in n)n.hasOwnProperty(ee)&&(o=n[ee],o!==void 0&&xh(e,t,ee,o,n,void 0));return}}for(R in n)n.hasOwnProperty(R)&&(o=n[R],o!=null&&Ze(e,t,R,o,n,null))}function XS(e,t,n,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,b=null,R=null,N=null,I=null,ee=null;for(Q in n){var ie=n[Q];if(n.hasOwnProperty(Q)&&ie!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":N=ie;default:o.hasOwnProperty(Q)||Ze(e,t,Q,null,o,ie)}}for(var K in o){var Q=o[K];if(ie=n[K],o.hasOwnProperty(K)&&(Q!=null||ie!=null))switch(K){case"type":h=Q;break;case"name":f=Q;break;case"checked":I=Q;break;case"defaultChecked":ee=Q;break;case"value":b=Q;break;case"defaultValue":R=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(u(137,t));break;default:Q!==ie&&Ze(e,t,K,Q,o,ie)}}aa(e,b,R,N,I,ee,h,f);return;case"select":Q=b=R=K=null;for(h in n)if(N=n[h],n.hasOwnProperty(h)&&N!=null)switch(h){case"value":break;case"multiple":Q=N;default:o.hasOwnProperty(h)||Ze(e,t,h,null,o,N)}for(f in o)if(h=o[f],N=n[f],o.hasOwnProperty(f)&&(h!=null||N!=null))switch(f){case"value":K=h;break;case"defaultValue":R=h;break;case"multiple":b=h;default:h!==N&&Ze(e,t,f,h,o,N)}t=R,n=b,o=Q,K!=null?us(e,!!n,K,!1):!!o!=!!n&&(t!=null?us(e,!!n,t,!0):us(e,!!n,n?[]:"",!1));return;case"textarea":Q=K=null;for(R in n)if(f=n[R],n.hasOwnProperty(R)&&f!=null&&!o.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Ze(e,t,R,null,o,f)}for(b in o)if(f=o[b],h=n[b],o.hasOwnProperty(b)&&(f!=null||h!=null))switch(b){case"value":K=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(u(91));break;default:f!==h&&Ze(e,t,b,f,o,h)}Ja(e,K,Q);return;case"option":for(var pe in n)K=n[pe],n.hasOwnProperty(pe)&&K!=null&&!o.hasOwnProperty(pe)&&(pe==="selected"?e.selected=!1:Ze(e,t,pe,null,o,K));for(N in o)K=o[N],Q=n[N],o.hasOwnProperty(N)&&K!==Q&&(K!=null||Q!=null)&&(N==="selected"?e.selected=K&&typeof K!="function"&&typeof K!="symbol":Ze(e,t,N,K,o,Q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in n)K=n[we],n.hasOwnProperty(we)&&K!=null&&!o.hasOwnProperty(we)&&Ze(e,t,we,null,o,K);for(I in o)if(K=o[I],Q=n[I],o.hasOwnProperty(I)&&K!==Q&&(K!=null||Q!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(u(137,t));break;default:Ze(e,t,I,K,o,Q)}return;default:if($a(t)){for(var Je in n)K=n[Je],n.hasOwnProperty(Je)&&K!==void 0&&!o.hasOwnProperty(Je)&&xh(e,t,Je,void 0,o,K);for(ee in o)K=o[ee],Q=n[ee],!o.hasOwnProperty(ee)||K===Q||K===void 0&&Q===void 0||xh(e,t,ee,K,o,Q);return}}for(var z in n)K=n[z],n.hasOwnProperty(z)&&K!=null&&!o.hasOwnProperty(z)&&Ze(e,t,z,null,o,K);for(ie in o)K=o[ie],Q=n[ie],!o.hasOwnProperty(ie)||K===Q||K==null&&Q==null||Ze(e,t,ie,K,o,Q)}function jg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function QS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),o=0;o<n.length;o++){var f=n[o],h=f.transferSize,b=f.initiatorType,R=f.duration;if(h&&R&&jg(b)){for(b=0,R=f.responseEnd,o+=1;o<n.length;o++){var N=n[o],I=N.startTime;if(I>R)break;var ee=N.transferSize,ie=N.initiatorType;ee&&jg(ie)&&(N=N.responseEnd,b+=ee*(N<R?1:(R-I)/(N-I)))}if(--o,t+=8*(h+b)/(f.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Oh=null,Mh=null;function hu(e){return e.nodeType===9?e:e.ownerDocument}function Bg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function _h(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nh=null;function FS(){var e=window.event;return e&&e.type==="popstate"?e===Nh?!1:(Nh=e,!0):(Nh=null,!1)}var Vg=typeof setTimeout=="function"?setTimeout:void 0,WS=typeof clearTimeout=="function"?clearTimeout:void 0,zg=typeof Promise=="function"?Promise:void 0,ZS=typeof queueMicrotask=="function"?queueMicrotask:typeof zg<"u"?function(e){return zg.resolve(null).then(e).catch(JS)}:Vg;function JS(e){setTimeout(function(){throw e})}function Ps(e){return e==="head"}function Gg(e,t){var n=t,o=0;do{var f=n.nextSibling;if(e.removeChild(n),f&&f.nodeType===8)if(n=f.data,n==="/$"||n==="/&"){if(o===0){e.removeChild(f),jr(t);return}o--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")o++;else if(n==="html")gl(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,gl(n);for(var h=n.firstChild;h;){var b=h.nextSibling,R=h.nodeName;h[rs]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&h.rel.toLowerCase()==="stylesheet"||n.removeChild(h),h=b}}else n==="body"&&gl(e.ownerDocument.body);n=f}while(n);jr(t)}function Hg(e,t){var n=e;e=0;do{var o=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=o}while(n)}function Dh(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Dh(n),co(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function $S(e,t,n,o){for(;e.nodeType===1;){var f=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[rs])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=jn(e.nextSibling),e===null)break}return null}function e1(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=jn(e.nextSibling),e===null))return null;return e}function qg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=jn(e.nextSibling),e===null))return null;return e}function Lh(e){return e.data==="$?"||e.data==="$~"}function kh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function t1(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var o=function(){t(),n.removeEventListener("DOMContentLoaded",o)};n.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function jn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Uh=null;function Ig(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return jn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Yg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Kg(e,t,n){switch(t=hu(n),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function gl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);co(e)}var Bn=new Map,Xg=new Set;function du(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $i=se.d;se.d={f:n1,r:i1,D:s1,C:a1,L:r1,m:o1,X:c1,S:l1,M:u1};function n1(){var e=$i.f(),t=su();return e||t}function i1(e){var t=Se(e);t!==null&&t.tag===5&&t.type==="form"?up(t):$i.r(e)}var Lr=typeof document>"u"?null:document;function Qg(e,t,n){var o=Lr;if(o&&typeof t=="string"&&t){var f=ft(t);f='link[rel="'+e+'"][href="'+f+'"]',typeof n=="string"&&(f+='[crossorigin="'+n+'"]'),Xg.has(f)||(Xg.add(f),e={rel:e,crossOrigin:n,href:t},o.querySelector(f)===null&&(t=o.createElement("link"),Vt(t,"link",e),pt(t),o.head.appendChild(t)))}}function s1(e){$i.D(e),Qg("dns-prefetch",e,null)}function a1(e,t){$i.C(e,t),Qg("preconnect",e,t)}function r1(e,t,n){$i.L(e,t,n);var o=Lr;if(o&&e&&t){var f='link[rel="preload"][as="'+ft(t)+'"]';t==="image"&&n&&n.imageSrcSet?(f+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(f+='[imagesizes="'+ft(n.imageSizes)+'"]')):f+='[href="'+ft(e)+'"]';var h=f;switch(t){case"style":h=kr(e);break;case"script":h=Ur(e)}Bn.has(h)||(e=x({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Bn.set(h,e),o.querySelector(f)!==null||t==="style"&&o.querySelector(yl(h))||t==="script"&&o.querySelector(vl(h))||(t=o.createElement("link"),Vt(t,"link",e),pt(t),o.head.appendChild(t)))}}function o1(e,t){$i.m(e,t);var n=Lr;if(n&&e){var o=t&&typeof t.as=="string"?t.as:"script",f='link[rel="modulepreload"][as="'+ft(o)+'"][href="'+ft(e)+'"]',h=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Ur(e)}if(!Bn.has(h)&&(e=x({rel:"modulepreload",href:e},t),Bn.set(h,e),n.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(vl(h)))return}o=n.createElement("link"),Vt(o,"link",e),pt(o),n.head.appendChild(o)}}}function l1(e,t,n){$i.S(e,t,n);var o=Lr;if(o&&e){var f=ls(o).hoistableStyles,h=kr(e);t=t||"default";var b=f.get(h);if(!b){var R={loading:0,preload:null};if(b=o.querySelector(yl(h)))R.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Bn.get(h))&&jh(e,n);var N=b=o.createElement("link");pt(N),Vt(N,"link",e),N._p=new Promise(function(I,ee){N.onload=I,N.onerror=ee}),N.addEventListener("load",function(){R.loading|=1}),N.addEventListener("error",function(){R.loading|=2}),R.loading|=4,mu(b,t,o)}b={type:"stylesheet",instance:b,count:1,state:R},f.set(h,b)}}}function c1(e,t){$i.X(e,t);var n=Lr;if(n&&e){var o=ls(n).hoistableScripts,f=Ur(e),h=o.get(f);h||(h=n.querySelector(vl(f)),h||(e=x({src:e,async:!0},t),(t=Bn.get(f))&&Bh(e,t),h=n.createElement("script"),pt(h),Vt(h,"link",e),n.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(f,h))}}function u1(e,t){$i.M(e,t);var n=Lr;if(n&&e){var o=ls(n).hoistableScripts,f=Ur(e),h=o.get(f);h||(h=n.querySelector(vl(f)),h||(e=x({src:e,async:!0,type:"module"},t),(t=Bn.get(f))&&Bh(e,t),h=n.createElement("script"),pt(h),Vt(h,"link",e),n.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(f,h))}}function Fg(e,t,n,o){var f=(f=De.current)?du(f):null;if(!f)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=kr(n.href),n=ls(f).hoistableStyles,o=n.get(t),o||(o={type:"style",instance:null,count:0,state:null},n.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=kr(n.href);var h=ls(f).hoistableStyles,b=h.get(e);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,b),(h=f.querySelector(yl(e)))&&!h._p&&(b.instance=h,b.state.loading=5),Bn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Bn.set(e,n),h||f1(f,e,n,b.state))),t&&o===null)throw Error(u(528,""));return b}if(t&&o!==null)throw Error(u(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ur(n),n=ls(f).hoistableScripts,o=n.get(t),o||(o={type:"script",instance:null,count:0,state:null},n.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function kr(e){return'href="'+ft(e)+'"'}function yl(e){return'link[rel="stylesheet"]['+e+"]"}function Wg(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function f1(e,t,n,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),Vt(t,"link",n),pt(t),e.head.appendChild(t))}function Ur(e){return'[src="'+ft(e)+'"]'}function vl(e){return"script[async]"+e}function Zg(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(o)return t.instance=o,pt(o),o;var f=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),pt(o),Vt(o,"style",f),mu(o,n.precedence,e),t.instance=o;case"stylesheet":f=kr(n.href);var h=e.querySelector(yl(f));if(h)return t.state.loading|=4,t.instance=h,pt(h),h;o=Wg(n),(f=Bn.get(f))&&jh(o,f),h=(e.ownerDocument||e).createElement("link"),pt(h);var b=h;return b._p=new Promise(function(R,N){b.onload=R,b.onerror=N}),Vt(h,"link",o),t.state.loading|=4,mu(h,n.precedence,e),t.instance=h;case"script":return h=Ur(n.src),(f=e.querySelector(vl(h)))?(t.instance=f,pt(f),f):(o=n,(f=Bn.get(h))&&(o=x({},n),Bh(o,f)),e=e.ownerDocument||e,f=e.createElement("script"),pt(f),Vt(f,"link",o),e.head.appendChild(f),t.instance=f);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,mu(o,n.precedence,e));return t.instance}function mu(e,t,n){for(var o=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,h=f,b=0;b<o.length;b++){var R=o[b];if(R.dataset.precedence===t)h=R;else if(h!==f)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function jh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Bh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var pu=null;function Jg(e,t,n){if(pu===null){var o=new Map,f=pu=new Map;f.set(n,o)}else f=pu,o=f.get(n),o||(o=new Map,f.set(n,o));if(o.has(e))return o;for(o.set(e,null),n=n.getElementsByTagName(e),f=0;f<n.length;f++){var h=n[f];if(!(h[rs]||h[Rt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var b=h.getAttribute(t)||"";b=e+b;var R=o.get(b);R?R.push(h):o.set(b,[h])}}return o}function $g(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function h1(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ey(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function d1(e,t,n,o){if(n.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var f=kr(o.href),h=t.querySelector(yl(f));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=gu.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=h,pt(h);return}h=t.ownerDocument||t,o=Wg(o),(f=Bn.get(f))&&jh(o,f),h=h.createElement("link"),pt(h);var b=h;b._p=new Promise(function(R,N){b.onload=R,b.onerror=N}),Vt(h,"link",o),n.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=gu.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Ph=0;function m1(e,t){return e.stylesheets&&e.count===0&&vu(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var o=setTimeout(function(){if(e.stylesheets&&vu(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&Ph===0&&(Ph=62500*QS());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&vu(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>Ph?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function gu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var yu=null;function vu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,yu=new Map,t.forEach(p1,e),yu=null,gu.call(e))}function p1(e,t){if(!(t.state.loading&4)){var n=yu.get(e);if(n)var o=n.get(null);else{n=new Map,yu.set(e,n);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var b=f[h];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(n.set(b.dataset.precedence,b),o=b)}o&&n.set(null,o)}f=t.instance,b=f.getAttribute("data-precedence"),h=n.get(b)||o,h===o&&n.set(null,f),n.set(b,f),this.count++,o=gu.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),h?h.parentNode.insertBefore(f,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),t.state.loading|=4}}var bl={$$typeof:Y,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function g1(e,t,n,o,f,h,b,R,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=io(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=io(0),this.hiddenUpdates=io(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function ty(e,t,n,o,f,h,b,R,N,I,ee,ie){return e=new g1(e,t,n,b,N,I,ee,ie,R),t=1,h===!0&&(t|=24),h=xt(3,null,null,t),e.current=h,h.stateNode=e,t=st(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:o,isDehydrated:n,cache:t},xa(h),e}function ny(e){return e?(e=vs,e):vs}function iy(e,t,n,o,f,h){f=ny(f),o.context===null?o.context=f:o.pendingContext=f,o=kn(t),o.payload={element:n},h=h===void 0?null:h,h!==null&&(o.callback=h),n=Fn(e,o,t),n!==null&&(pn(n,e,t),Oa(n,e,t))}function sy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Vh(e,t){sy(e,t),(e=e.alternate)&&sy(e,t)}function ay(e){if(e.tag===13||e.tag===31){var t=ji(e,67108864);t!==null&&pn(t,e,67108864),Vh(e,67108864)}}function ry(e){if(e.tag===13||e.tag===31){var t=Rn();t=Ya(t);var n=ji(e,t);n!==null&&pn(n,e,t),Vh(e,t)}}var bu=!0;function y1(e,t,n,o){var f=_.T;_.T=null;var h=se.p;try{se.p=2,zh(e,t,n,o)}finally{se.p=h,_.T=f}}function v1(e,t,n,o){var f=_.T;_.T=null;var h=se.p;try{se.p=8,zh(e,t,n,o)}finally{se.p=h,_.T=f}}function zh(e,t,n,o){if(bu){var f=Gh(o);if(f===null)Eh(e,t,o,Su,n),ly(e,o);else if(S1(f,e,t,n,o))o.stopPropagation();else if(ly(e,o),t&4&&-1<b1.indexOf(e)){for(;f!==null;){var h=Se(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var b=En(h.pendingLanes);if(b!==0){var R=h;for(R.pendingLanes|=2,R.entangledLanes|=2;b;){var N=1<<31-qt(b);R.entanglements[1]|=N,b&=~N}Si(h),(Ie&6)===0&&(nu=Me()+500,dl(0))}}break;case 31:case 13:R=ji(h,2),R!==null&&pn(R,h,2),su(),Vh(h,2)}if(h=Gh(o),h===null&&Eh(e,t,o,Su,n),h===f)break;f=h}f!==null&&o.stopPropagation()}else Eh(e,t,o,null,n)}}function Gh(e){return e=mo(e),Hh(e)}var Su=null;function Hh(e){if(Su=null,e=os(e),e!==null){var t=y(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=g(t),e!==null)return e;e=null}else if(n===31){if(e=T(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Su=e,null}function oy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fl()){case $r:return 2;case $s:return 8;case ea:case Wl:return 32;case Gt:return 268435456;default:return 32}default:return 32}}var qh=!1,Vs=null,zs=null,Gs=null,Sl=new Map,Tl=new Map,Hs=[],b1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ly(e,t){switch(e){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":Sl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(t.pointerId)}}function Al(e,t,n,o,f,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:h,targetContainers:[f]},t!==null&&(t=Se(t),t!==null&&ay(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,f!==null&&t.indexOf(f)===-1&&t.push(f),e)}function S1(e,t,n,o,f){switch(t){case"focusin":return Vs=Al(Vs,e,t,n,o,f),!0;case"dragenter":return zs=Al(zs,e,t,n,o,f),!0;case"mouseover":return Gs=Al(Gs,e,t,n,o,f),!0;case"pointerover":var h=f.pointerId;return Sl.set(h,Al(Sl.get(h)||null,e,t,n,o,f)),!0;case"gotpointercapture":return h=f.pointerId,Tl.set(h,Al(Tl.get(h)||null,e,t,n,o,f)),!0}return!1}function cy(e){var t=os(e.target);if(t!==null){var n=y(t);if(n!==null){if(t=n.tag,t===13){if(t=g(n),t!==null){e.blockedOn=t,$l(e.priority,function(){ry(n)});return}}else if(t===31){if(t=T(n),t!==null){e.blockedOn=t,$l(e.priority,function(){ry(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gh(e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);er=o,n.target.dispatchEvent(o),er=null}else return t=Se(n),t!==null&&ay(t),e.blockedOn=n,!1;t.shift()}return!0}function uy(e,t,n){Tu(e)&&n.delete(t)}function T1(){qh=!1,Vs!==null&&Tu(Vs)&&(Vs=null),zs!==null&&Tu(zs)&&(zs=null),Gs!==null&&Tu(Gs)&&(Gs=null),Sl.forEach(uy),Tl.forEach(uy)}function Au(e,t){e.blockedOn===t&&(e.blockedOn=null,qh||(qh=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,T1)))}var Cu=null;function fy(e){Cu!==e&&(Cu=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Cu===e&&(Cu=null);for(var t=0;t<e.length;t+=3){var n=e[t],o=e[t+1],f=e[t+2];if(typeof o!="function"){if(Hh(o||n)===null)continue;break}var h=Se(n);h!==null&&(e.splice(t,3),t-=3,Gf(h,{pending:!0,data:f,method:n.method,action:o},o,f))}}))}function jr(e){function t(N){return Au(N,e)}Vs!==null&&Au(Vs,e),zs!==null&&Au(zs,e),Gs!==null&&Au(Gs,e),Sl.forEach(t),Tl.forEach(t);for(var n=0;n<Hs.length;n++){var o=Hs[n];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Hs.length&&(n=Hs[0],n.blockedOn===null);)cy(n),n.blockedOn===null&&Hs.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(o=0;o<n.length;o+=3){var f=n[o],h=n[o+1],b=f[Nt]||null;if(typeof h=="function")b||fy(n);else if(b){var R=null;if(h&&h.hasAttribute("formAction")){if(f=h,b=h[Nt]||null)R=b.formAction;else if(Hh(f)!==null)continue}else R=b.action;typeof R=="function"?n[o+1]=R:(n.splice(o,3),o-=3),fy(n)}}}function hy(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function t(){f!==null&&(f(),f=null),o||setTimeout(n,20)}function n(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),f!==null&&(f(),f=null)}}}function Ih(e){this._internalRoot=e}wu.prototype.render=Ih.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var n=t.current,o=Rn();iy(n,o,e,t,null,null)},wu.prototype.unmount=Ih.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;iy(e.current,2,null,e,null,null),su(),t[as]=null}};function wu(e){this._internalRoot=e}wu.prototype.unstable_scheduleHydration=function(e){if(e){var t=ro();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Hs.length&&t!==0&&t<Hs[n].priority;n++);Hs.splice(n,0,e),n===0&&cy(e)}};var dy=a.version;if(dy!=="19.2.4")throw Error(u(527,dy,"19.2.4"));se.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=A(t),e=e!==null?w(e):null,e=e===null?null:e.stateNode,e};var A1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{xi=Ru.inject(A1),Ht=Ru}catch{}}return wl.createRoot=function(e,t){if(!m(e))throw Error(u(299));var n=!1,o="",f=Sp,h=Tp,b=Ap;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(f=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(b=t.onRecoverableError)),t=ty(e,1,!1,null,null,n,o,null,f,h,b,hy),e[as]=t.current,Rh(e),new Ih(t)},wl.hydrateRoot=function(e,t,n){if(!m(e))throw Error(u(299));var o=!1,f="",h=Sp,b=Tp,R=Ap,N=null;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(f=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(b=n.onCaughtError),n.onRecoverableError!==void 0&&(R=n.onRecoverableError),n.formState!==void 0&&(N=n.formState)),t=ty(e,1,!0,t,n??null,o,f,N,h,b,R,hy),t.context=ny(null),n=t.current,o=Rn(),o=Ya(o),f=kn(o),f.callback=null,Fn(n,f,o),n=o,t.current.lanes=n,jt(t,n),Si(t),e[as]=t.current,Rh(e),new wu(t)},wl.version="19.2.4",wl}var Cy;function L1(){if(Cy)return Xh.exports;Cy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(a){console.error(a)}}return i(),Xh.exports=D1(),Xh.exports}var k1=L1();const U1=Jd(k1);var wy="popstate";function j1(i={}){function a(m,y){let{pathname:g="/",search:T="",hash:C=""}=Va(m.location.hash.substring(1));return!g.startsWith("/")&&!g.startsWith(".")&&(g="/"+g),yd("",{pathname:g,search:T,hash:C},y.state&&y.state.usr||null,y.state&&y.state.key||"default")}function c(m,y){let g=m.document.querySelector("base"),T="";if(g&&g.getAttribute("href")){let C=m.location.href,A=C.indexOf("#");T=A===-1?C:C.slice(0,A)}return T+"#"+(typeof y=="string"?y:Ul(y))}function u(m,y){ni(m.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(y)})`)}return P1(a,c,u,i)}function ct(i,a){if(i===!1||i===null||typeof i>"u")throw new Error(a)}function ni(i,a){if(!i){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function B1(){return Math.random().toString(36).substring(2,10)}function Ry(i,a){return{usr:i.state,key:i.key,idx:a}}function yd(i,a,c=null,u){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof a=="string"?Va(a):a,state:c,key:a&&a.key||u||B1()}}function Ul({pathname:i="/",search:a="",hash:c=""}){return a&&a!=="?"&&(i+=a.charAt(0)==="?"?a:"?"+a),c&&c!=="#"&&(i+=c.charAt(0)==="#"?c:"#"+c),i}function Va(i){let a={};if(i){let c=i.indexOf("#");c>=0&&(a.hash=i.substring(c),i=i.substring(0,c));let u=i.indexOf("?");u>=0&&(a.search=i.substring(u),i=i.substring(0,u)),i&&(a.pathname=i)}return a}function P1(i,a,c,u={}){let{window:m=document.defaultView,v5Compat:y=!1}=u,g=m.history,T="POP",C=null,A=w();A==null&&(A=0,g.replaceState({...g.state,idx:A},""));function w(){return(g.state||{idx:null}).idx}function x(){T="POP";let H=w(),F=H==null?null:H-A;A=H,C&&C({action:T,location:X.location,delta:F})}function M(H,F){T="PUSH";let W=yd(X.location,H,F);c&&c(W,H),A=w()+1;let Y=Ry(W,A),re=X.createHref(W);try{g.pushState(Y,"",re)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;m.location.assign(re)}y&&C&&C({action:T,location:X.location,delta:1})}function D(H,F){T="REPLACE";let W=yd(X.location,H,F);c&&c(W,H),A=w();let Y=Ry(W,A),re=X.createHref(W);g.replaceState(Y,"",re),y&&C&&C({action:T,location:X.location,delta:0})}function B(H){return V1(H)}let X={get action(){return T},get location(){return i(m,g)},listen(H){if(C)throw new Error("A history only accepts one active listener");return m.addEventListener(wy,x),C=H,()=>{m.removeEventListener(wy,x),C=null}},createHref(H){return a(m,H)},createURL:B,encodeLocation(H){let F=B(H);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:M,replace:D,go(H){return g.go(H)}};return X}function V1(i,a=!1){let c="http://localhost";typeof window<"u"&&(c=window.location.origin!=="null"?window.location.origin:window.location.href),ct(c,"No window.location.(origin|href) available to create URL");let u=typeof i=="string"?i:Ul(i);return u=u.replace(/ $/,"%20"),!a&&u.startsWith("//")&&(u=c+u),new URL(u,c)}function W0(i,a,c="/"){return z1(i,a,c,!1)}function z1(i,a,c,u){let m=typeof a=="string"?Va(a):a,y=ts(m.pathname||"/",c);if(y==null)return null;let g=Z0(i);G1(g);let T=null;for(let C=0;T==null&&C<g.length;++C){let A=J1(y);T=W1(g[C],A,u)}return T}function Z0(i,a=[],c=[],u="",m=!1){let y=(g,T,C=m,A)=>{let w={relativePath:A===void 0?g.path||"":A,caseSensitive:g.caseSensitive===!0,childrenIndex:T,route:g};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(u)&&C)return;ct(w.relativePath.startsWith(u),`Absolute route path "${w.relativePath}" nested under path "${u}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(u.length)}let x=es([u,w.relativePath]),M=c.concat(w);g.children&&g.children.length>0&&(ct(g.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Z0(g.children,a,M,x,C)),!(g.path==null&&!g.index)&&a.push({path:x,score:Q1(x,g.index),routesMeta:M})};return i.forEach((g,T)=>{if(g.path===""||!g.path?.includes("?"))y(g,T);else for(let C of J0(g.path))y(g,T,!0,C)}),a}function J0(i){let a=i.split("/");if(a.length===0)return[];let[c,...u]=a,m=c.endsWith("?"),y=c.replace(/\?$/,"");if(u.length===0)return m?[y,""]:[y];let g=J0(u.join("/")),T=[];return T.push(...g.map(C=>C===""?y:[y,C].join("/"))),m&&T.push(...g),T.map(C=>i.startsWith("/")&&C===""?"/":C)}function G1(i){i.sort((a,c)=>a.score!==c.score?c.score-a.score:F1(a.routesMeta.map(u=>u.childrenIndex),c.routesMeta.map(u=>u.childrenIndex)))}var H1=/^:[\w-]+$/,q1=3,I1=2,Y1=1,K1=10,X1=-2,Ey=i=>i==="*";function Q1(i,a){let c=i.split("/"),u=c.length;return c.some(Ey)&&(u+=X1),a&&(u+=I1),c.filter(m=>!Ey(m)).reduce((m,y)=>m+(H1.test(y)?q1:y===""?Y1:K1),u)}function F1(i,a){return i.length===a.length&&i.slice(0,-1).every((u,m)=>u===a[m])?i[i.length-1]-a[a.length-1]:0}function W1(i,a,c=!1){let{routesMeta:u}=i,m={},y="/",g=[];for(let T=0;T<u.length;++T){let C=u[T],A=T===u.length-1,w=y==="/"?a:a.slice(y.length)||"/",x=qu({path:C.relativePath,caseSensitive:C.caseSensitive,end:A},w),M=C.route;if(!x&&A&&c&&!u[u.length-1].route.index&&(x=qu({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},w)),!x)return null;Object.assign(m,x.params),g.push({params:m,pathname:es([y,x.pathname]),pathnameBase:nT(es([y,x.pathnameBase])),route:M}),x.pathnameBase!=="/"&&(y=es([y,x.pathnameBase]))}return g}function qu(i,a){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[c,u]=Z1(i.path,i.caseSensitive,i.end),m=a.match(c);if(!m)return null;let y=m[0],g=y.replace(/(.)\/+$/,"$1"),T=m.slice(1);return{params:u.reduce((A,{paramName:w,isOptional:x},M)=>{if(w==="*"){let B=T[M]||"";g=y.slice(0,y.length-B.length).replace(/(.)\/+$/,"$1")}const D=T[M];return x&&!D?A[w]=void 0:A[w]=(D||"").replace(/%2F/g,"/"),A},{}),pathname:y,pathnameBase:g,pattern:i}}function Z1(i,a=!1,c=!0){ni(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let u=[],m="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,T,C)=>(u.push({paramName:T,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(u.push({paramName:"*"}),m+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?m+="\\/*$":i!==""&&i!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,a?void 0:"i"),u]}function J1(i){try{return i.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return ni(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),i}}function ts(i,a){if(a==="/")return i;if(!i.toLowerCase().startsWith(a.toLowerCase()))return null;let c=a.endsWith("/")?a.length-1:a.length,u=i.charAt(c);return u&&u!=="/"?null:i.slice(c)||"/"}var $1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function eT(i,a="/"){let{pathname:c,search:u="",hash:m=""}=typeof i=="string"?Va(i):i,y;return c?(c=c.replace(/\/\/+/g,"/"),c.startsWith("/")?y=xy(c.substring(1),"/"):y=xy(c,a)):y=a,{pathname:y,search:iT(u),hash:sT(m)}}function xy(i,a){let c=a.replace(/\/+$/,"").split("/");return i.split("/").forEach(m=>{m===".."?c.length>1&&c.pop():m!=="."&&c.push(m)}),c.length>1?c.join("/"):"/"}function Zh(i,a,c,u){return`Cannot include a '${i}' character in a manually specified \`to.${a}\` field [${JSON.stringify(u)}].  Please separate it out to the \`to.${c}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tT(i){return i.filter((a,c)=>c===0||a.route.path&&a.route.path.length>0)}function $0(i){let a=tT(i);return a.map((c,u)=>u===a.length-1?c.pathname:c.pathnameBase)}function ev(i,a,c,u=!1){let m;typeof i=="string"?m=Va(i):(m={...i},ct(!m.pathname||!m.pathname.includes("?"),Zh("?","pathname","search",m)),ct(!m.pathname||!m.pathname.includes("#"),Zh("#","pathname","hash",m)),ct(!m.search||!m.search.includes("#"),Zh("#","search","hash",m)));let y=i===""||m.pathname==="",g=y?"/":m.pathname,T;if(g==null)T=c;else{let x=a.length-1;if(!u&&g.startsWith("..")){let M=g.split("/");for(;M[0]==="..";)M.shift(),x-=1;m.pathname=M.join("/")}T=x>=0?a[x]:"/"}let C=eT(m,T),A=g&&g!=="/"&&g.endsWith("/"),w=(y||g===".")&&c.endsWith("/");return!C.pathname.endsWith("/")&&(A||w)&&(C.pathname+="/"),C}var es=i=>i.join("/").replace(/\/\/+/g,"/"),nT=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),iT=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,sT=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,aT=class{constructor(i,a,c,u=!1){this.status=i,this.statusText=a||"",this.internal=u,c instanceof Error?(this.data=c.toString(),this.error=c):this.data=c}};function rT(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function oT(i){return i.map(a=>a.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var tv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nv(i,a){let c=i;if(typeof c!="string"||!$1.test(c))return{absoluteURL:void 0,isExternal:!1,to:c};let u=c,m=!1;if(tv)try{let y=new URL(window.location.href),g=c.startsWith("//")?new URL(y.protocol+c):new URL(c),T=ts(g.pathname,a);g.origin===y.origin&&T!=null?c=T+g.search+g.hash:m=!0}catch{ni(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:u,isExternal:m,to:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var iv=["POST","PUT","PATCH","DELETE"];new Set(iv);var lT=["GET",...iv];new Set(lT);var Xr=k.createContext(null);Xr.displayName="DataRouter";var Ju=k.createContext(null);Ju.displayName="DataRouterState";var cT=k.createContext(!1),sv=k.createContext({isTransitioning:!1});sv.displayName="ViewTransition";var uT=k.createContext(new Map);uT.displayName="Fetchers";var fT=k.createContext(null);fT.displayName="Await";var zn=k.createContext(null);zn.displayName="Navigation";var Gl=k.createContext(null);Gl.displayName="Location";var wi=k.createContext({outlet:null,matches:[],isDataRoute:!1});wi.displayName="Route";var em=k.createContext(null);em.displayName="RouteError";var av="REACT_ROUTER_ERROR",hT="REDIRECT",dT="ROUTE_ERROR_RESPONSE";function mT(i){if(i.startsWith(`${av}:${hT}:{`))try{let a=JSON.parse(i.slice(28));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.location=="string"&&typeof a.reloadDocument=="boolean"&&typeof a.replace=="boolean")return a}catch{}}function pT(i){if(i.startsWith(`${av}:${dT}:{`))try{let a=JSON.parse(i.slice(40));if(typeof a=="object"&&a&&typeof a.status=="number"&&typeof a.statusText=="string")return new aT(a.status,a.statusText,a.data)}catch{}}function gT(i,{relative:a}={}){ct(Hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:u}=k.useContext(zn),{hash:m,pathname:y,search:g}=ql(i,{relative:a}),T=y;return c!=="/"&&(T=y==="/"?c:es([c,y])),u.createHref({pathname:T,search:g,hash:m})}function Hl(){return k.useContext(Gl)!=null}function za(){return ct(Hl(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Gl).location}var rv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ov(i){k.useContext(zn).static||k.useLayoutEffect(i)}function $u(){let{isDataRoute:i}=k.useContext(wi);return i?MT():yT()}function yT(){ct(Hl(),"useNavigate() may be used only in the context of a <Router> component.");let i=k.useContext(Xr),{basename:a,navigator:c}=k.useContext(zn),{matches:u}=k.useContext(wi),{pathname:m}=za(),y=JSON.stringify($0(u)),g=k.useRef(!1);return ov(()=>{g.current=!0}),k.useCallback((C,A={})=>{if(ni(g.current,rv),!g.current)return;if(typeof C=="number"){c.go(C);return}let w=ev(C,JSON.parse(y),m,A.relative==="path");i==null&&a!=="/"&&(w.pathname=w.pathname==="/"?a:es([a,w.pathname])),(A.replace?c.replace:c.push)(w,A.state,A)},[a,c,y,m,i])}k.createContext(null);function lv(){let{matches:i}=k.useContext(wi),a=i[i.length-1];return a?a.params:{}}function ql(i,{relative:a}={}){let{matches:c}=k.useContext(wi),{pathname:u}=za(),m=JSON.stringify($0(c));return k.useMemo(()=>ev(i,JSON.parse(m),u,a==="path"),[i,m,u,a])}function vT(i,a){return cv(i,a)}function cv(i,a,c,u,m){ct(Hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:y}=k.useContext(zn),{matches:g}=k.useContext(wi),T=g[g.length-1],C=T?T.params:{},A=T?T.pathname:"/",w=T?T.pathnameBase:"/",x=T&&T.route;{let W=x&&x.path||"";fv(A,!x||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${A}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let M=za(),D;if(a){let W=typeof a=="string"?Va(a):a;ct(w==="/"||W.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${W.pathname}" was given in the \`location\` prop.`),D=W}else D=M;let B=D.pathname||"/",X=B;if(w!=="/"){let W=w.replace(/^\//,"").split("/");X="/"+B.replace(/^\//,"").split("/").slice(W.length).join("/")}let H=W0(i,{pathname:X});ni(x||H!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),ni(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=CT(H&&H.map(W=>Object.assign({},W,{params:Object.assign({},C,W.params),pathname:es([w,y.encodeLocation?y.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?w:es([w,y.encodeLocation?y.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),g,c,u,m);return a&&F?k.createElement(Gl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},F):F}function bT(){let i=OT(),a=rT(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),c=i instanceof Error?i.stack:null,u="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:u},y={padding:"2px 4px",backgroundColor:u},g=null;return console.error("Error handled by React Router default ErrorBoundary:",i),g=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:y},"ErrorBoundary")," or"," ",k.createElement("code",{style:y},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},a),c?k.createElement("pre",{style:m},c):null,g)}var ST=k.createElement(bT,null),uv=class extends k.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,a){return a.location!==i.location||a.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:a.error,location:a.location,revalidation:i.revalidation||a.revalidation}}componentDidCatch(i,a){this.props.onError?this.props.onError(i,a):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const c=pT(i.digest);c&&(i=c)}let a=i!==void 0?k.createElement(wi.Provider,{value:this.props.routeContext},k.createElement(em.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?k.createElement(TT,{error:i},a):a}};uv.contextType=cT;var Jh=new WeakMap;function TT({children:i,error:a}){let{basename:c}=k.useContext(zn);if(typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){let u=mT(a.digest);if(u){let m=Jh.get(a);if(m)throw m;let y=nv(u.location,c);if(tv&&!Jh.get(a))if(y.isExternal||u.reloadDocument)window.location.href=y.absoluteURL||y.to;else{const g=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(y.to,{replace:u.replace}));throw Jh.set(a,g),g}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${y.absoluteURL||y.to}`})}}return i}function AT({routeContext:i,match:a,children:c}){let u=k.useContext(Xr);return u&&u.static&&u.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=a.route.id),k.createElement(wi.Provider,{value:i},c)}function CT(i,a=[],c=null,u=null,m=null){if(i==null){if(!c)return null;if(c.errors)i=c.matches;else if(a.length===0&&!c.initialized&&c.matches.length>0)i=c.matches;else return null}let y=i,g=c?.errors;if(g!=null){let w=y.findIndex(x=>x.route.id&&g?.[x.route.id]!==void 0);ct(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(g).join(",")}`),y=y.slice(0,Math.min(y.length,w+1))}let T=!1,C=-1;if(c)for(let w=0;w<y.length;w++){let x=y[w];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(C=w),x.route.id){let{loaderData:M,errors:D}=c,B=x.route.loader&&!M.hasOwnProperty(x.route.id)&&(!D||D[x.route.id]===void 0);if(x.route.lazy||B){T=!0,C>=0?y=y.slice(0,C+1):y=[y[0]];break}}}let A=c&&u?(w,x)=>{u(w,{location:c.location,params:c.matches?.[0]?.params??{},unstable_pattern:oT(c.matches),errorInfo:x})}:void 0;return y.reduceRight((w,x,M)=>{let D,B=!1,X=null,H=null;c&&(D=g&&x.route.id?g[x.route.id]:void 0,X=x.route.errorElement||ST,T&&(C<0&&M===0?(fv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,H=null):C===M&&(B=!0,H=x.route.hydrateFallbackElement||null)));let F=a.concat(y.slice(0,M+1)),W=()=>{let Y;return D?Y=X:B?Y=H:x.route.Component?Y=k.createElement(x.route.Component,null):x.route.element?Y=x.route.element:Y=w,k.createElement(AT,{match:x,routeContext:{outlet:w,matches:F,isDataRoute:c!=null},children:Y})};return c&&(x.route.ErrorBoundary||x.route.errorElement||M===0)?k.createElement(uv,{location:c.location,revalidation:c.revalidation,component:X,error:D,children:W(),routeContext:{outlet:null,matches:F,isDataRoute:!0},onError:A}):W()},null)}function tm(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wT(i){let a=k.useContext(Xr);return ct(a,tm(i)),a}function RT(i){let a=k.useContext(Ju);return ct(a,tm(i)),a}function ET(i){let a=k.useContext(wi);return ct(a,tm(i)),a}function nm(i){let a=ET(i),c=a.matches[a.matches.length-1];return ct(c.route.id,`${i} can only be used on routes that contain a unique "id"`),c.route.id}function xT(){return nm("useRouteId")}function OT(){let i=k.useContext(em),a=RT("useRouteError"),c=nm("useRouteError");return i!==void 0?i:a.errors?.[c]}function MT(){let{router:i}=wT("useNavigate"),a=nm("useNavigate"),c=k.useRef(!1);return ov(()=>{c.current=!0}),k.useCallback(async(m,y={})=>{ni(c.current,rv),c.current&&(typeof m=="number"?await i.navigate(m):await i.navigate(m,{fromRouteId:a,...y}))},[i,a])}var Oy={};function fv(i,a,c){!a&&!Oy[i]&&(Oy[i]=!0,ni(!1,c))}k.memo(_T);function _T({routes:i,future:a,state:c,onError:u}){return cv(i,void 0,c,u,a)}function Nu(i){ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function NT({basename:i="/",children:a=null,location:c,navigationType:u="POP",navigator:m,static:y=!1,unstable_useTransitions:g}){ct(!Hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let T=i.replace(/^\/*/,"/"),C=k.useMemo(()=>({basename:T,navigator:m,static:y,unstable_useTransitions:g,future:{}}),[T,m,y,g]);typeof c=="string"&&(c=Va(c));let{pathname:A="/",search:w="",hash:x="",state:M=null,key:D="default"}=c,B=k.useMemo(()=>{let X=ts(A,T);return X==null?null:{location:{pathname:X,search:w,hash:x,state:M,key:D},navigationType:u}},[T,A,w,x,M,D,u]);return ni(B!=null,`<Router basename="${T}"> is not able to match the URL "${A}${w}${x}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:k.createElement(zn.Provider,{value:C},k.createElement(Gl.Provider,{children:a,value:B}))}function DT({children:i,location:a}){return vT(vd(i),a)}function vd(i,a=[]){let c=[];return k.Children.forEach(i,(u,m)=>{if(!k.isValidElement(u))return;let y=[...a,m];if(u.type===k.Fragment){c.push.apply(c,vd(u.props.children,y));return}ct(u.type===Nu,`[${typeof u.type=="string"?u.type:u.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ct(!u.props.index||!u.props.children,"An index route cannot have child routes.");let g={id:u.props.id||y.join("-"),caseSensitive:u.props.caseSensitive,element:u.props.element,Component:u.props.Component,index:u.props.index,path:u.props.path,middleware:u.props.middleware,loader:u.props.loader,action:u.props.action,hydrateFallbackElement:u.props.hydrateFallbackElement,HydrateFallback:u.props.HydrateFallback,errorElement:u.props.errorElement,ErrorBoundary:u.props.ErrorBoundary,hasErrorBoundary:u.props.hasErrorBoundary===!0||u.props.ErrorBoundary!=null||u.props.errorElement!=null,shouldRevalidate:u.props.shouldRevalidate,handle:u.props.handle,lazy:u.props.lazy};u.props.children&&(g.children=vd(u.props.children,y)),c.push(g)}),c}var Du="get",Lu="application/x-www-form-urlencoded";function ef(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function LT(i){return ef(i)&&i.tagName.toLowerCase()==="button"}function kT(i){return ef(i)&&i.tagName.toLowerCase()==="form"}function UT(i){return ef(i)&&i.tagName.toLowerCase()==="input"}function jT(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function BT(i,a){return i.button===0&&(!a||a==="_self")&&!jT(i)}var Eu=null;function PT(){if(Eu===null)try{new FormData(document.createElement("form"),0),Eu=!1}catch{Eu=!0}return Eu}var VT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $h(i){return i!=null&&!VT.has(i)?(ni(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Lu}"`),null):i}function zT(i,a){let c,u,m,y,g;if(kT(i)){let T=i.getAttribute("action");u=T?ts(T,a):null,c=i.getAttribute("method")||Du,m=$h(i.getAttribute("enctype"))||Lu,y=new FormData(i)}else if(LT(i)||UT(i)&&(i.type==="submit"||i.type==="image")){let T=i.form;if(T==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let C=i.getAttribute("formaction")||T.getAttribute("action");if(u=C?ts(C,a):null,c=i.getAttribute("formmethod")||T.getAttribute("method")||Du,m=$h(i.getAttribute("formenctype"))||$h(T.getAttribute("enctype"))||Lu,y=new FormData(T,i),!PT()){let{name:A,type:w,value:x}=i;if(w==="image"){let M=A?`${A}.`:"";y.append(`${M}x`,"0"),y.append(`${M}y`,"0")}else A&&y.append(A,x)}}else{if(ef(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');c=Du,u=null,m=Lu,g=i}return y&&m==="text/plain"&&(g=y,y=void 0),{action:u,method:c.toLowerCase(),encType:m,formData:y,body:g}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function im(i,a){if(i===!1||i===null||typeof i>"u")throw new Error(a)}function GT(i,a,c,u){let m=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return c?m.pathname.endsWith("/")?m.pathname=`${m.pathname}_.${u}`:m.pathname=`${m.pathname}.${u}`:m.pathname==="/"?m.pathname=`_root.${u}`:a&&ts(m.pathname,a)==="/"?m.pathname=`${a.replace(/\/$/,"")}/_root.${u}`:m.pathname=`${m.pathname.replace(/\/$/,"")}.${u}`,m}async function HT(i,a){if(i.id in a)return a[i.id];try{let c=await import(i.module);return a[i.id]=c,c}catch(c){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(c),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function IT(i,a,c){let u=await Promise.all(i.map(async m=>{let y=a.routes[m.route.id];if(y){let g=await HT(y,c);return g.links?g.links():[]}return[]}));return QT(u.flat(1).filter(qT).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function My(i,a,c,u,m,y){let g=(C,A)=>c[A]?C.route.id!==c[A].route.id:!0,T=(C,A)=>c[A].pathname!==C.pathname||c[A].route.path?.endsWith("*")&&c[A].params["*"]!==C.params["*"];return y==="assets"?a.filter((C,A)=>g(C,A)||T(C,A)):y==="data"?a.filter((C,A)=>{let w=u.routes[C.route.id];if(!w||!w.hasLoader)return!1;if(g(C,A)||T(C,A))return!0;if(C.route.shouldRevalidate){let x=C.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:c[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:C.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function YT(i,a,{includeHydrateFallback:c}={}){return KT(i.map(u=>{let m=a.routes[u.route.id];if(!m)return[];let y=[m.module];return m.clientActionModule&&(y=y.concat(m.clientActionModule)),m.clientLoaderModule&&(y=y.concat(m.clientLoaderModule)),c&&m.hydrateFallbackModule&&(y=y.concat(m.hydrateFallbackModule)),m.imports&&(y=y.concat(m.imports)),y}).flat(1))}function KT(i){return[...new Set(i)]}function XT(i){let a={},c=Object.keys(i).sort();for(let u of c)a[u]=i[u];return a}function QT(i,a){let c=new Set;return new Set(a),i.reduce((u,m)=>{let y=JSON.stringify(XT(m));return c.has(y)||(c.add(y),u.push({key:y,link:m})),u},[])}function hv(){let i=k.useContext(Xr);return im(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function FT(){let i=k.useContext(Ju);return im(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var sm=k.createContext(void 0);sm.displayName="FrameworkContext";function dv(){let i=k.useContext(sm);return im(i,"You must render this element inside a <HydratedRouter> element"),i}function WT(i,a){let c=k.useContext(sm),[u,m]=k.useState(!1),[y,g]=k.useState(!1),{onFocus:T,onBlur:C,onMouseEnter:A,onMouseLeave:w,onTouchStart:x}=a,M=k.useRef(null);k.useEffect(()=>{if(i==="render"&&g(!0),i==="viewport"){let X=F=>{F.forEach(W=>{g(W.isIntersecting)})},H=new IntersectionObserver(X,{threshold:.5});return M.current&&H.observe(M.current),()=>{H.disconnect()}}},[i]),k.useEffect(()=>{if(u){let X=setTimeout(()=>{g(!0)},100);return()=>{clearTimeout(X)}}},[u]);let D=()=>{m(!0)},B=()=>{m(!1),g(!1)};return c?i!=="intent"?[y,M,{}]:[y,M,{onFocus:Rl(T,D),onBlur:Rl(C,B),onMouseEnter:Rl(A,D),onMouseLeave:Rl(w,B),onTouchStart:Rl(x,D)}]:[!1,M,{}]}function Rl(i,a){return c=>{i&&i(c),c.defaultPrevented||a(c)}}function ZT({page:i,...a}){let{router:c}=hv(),u=k.useMemo(()=>W0(c.routes,i,c.basename),[c.routes,i,c.basename]);return u?k.createElement($T,{page:i,matches:u,...a}):null}function JT(i){let{manifest:a,routeModules:c}=dv(),[u,m]=k.useState([]);return k.useEffect(()=>{let y=!1;return IT(i,a,c).then(g=>{y||m(g)}),()=>{y=!0}},[i,a,c]),u}function $T({page:i,matches:a,...c}){let u=za(),{future:m,manifest:y,routeModules:g}=dv(),{basename:T}=hv(),{loaderData:C,matches:A}=FT(),w=k.useMemo(()=>My(i,a,A,y,u,"data"),[i,a,A,y,u]),x=k.useMemo(()=>My(i,a,A,y,u,"assets"),[i,a,A,y,u]),M=k.useMemo(()=>{if(i===u.pathname+u.search+u.hash)return[];let X=new Set,H=!1;if(a.forEach(W=>{let Y=y.routes[W.route.id];!Y||!Y.hasLoader||(!w.some(re=>re.route.id===W.route.id)&&W.route.id in C&&g[W.route.id]?.shouldRevalidate||Y.hasClientLoader?H=!0:X.add(W.route.id))}),X.size===0)return[];let F=GT(i,T,m.unstable_trailingSlashAwareDataRequests,"data");return H&&X.size>0&&F.searchParams.set("_routes",a.filter(W=>X.has(W.route.id)).map(W=>W.route.id).join(",")),[F.pathname+F.search]},[T,m.unstable_trailingSlashAwareDataRequests,C,u,y,w,a,i,g]),D=k.useMemo(()=>YT(x,y),[x,y]),B=JT(x);return k.createElement(k.Fragment,null,M.map(X=>k.createElement("link",{key:X,rel:"prefetch",as:"fetch",href:X,...c})),D.map(X=>k.createElement("link",{key:X,rel:"modulepreload",href:X,...c})),B.map(({key:X,link:H})=>k.createElement("link",{key:X,nonce:c.nonce,...H,crossOrigin:H.crossOrigin??c.crossOrigin})))}function eA(...i){return a=>{i.forEach(c=>{typeof c=="function"?c(a):c!=null&&(c.current=a)})}}var tA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tA&&(window.__reactRouterVersion="7.13.0")}catch{}function nA({basename:i,children:a,unstable_useTransitions:c,window:u}){let m=k.useRef();m.current==null&&(m.current=j1({window:u,v5Compat:!0}));let y=m.current,[g,T]=k.useState({action:y.action,location:y.location}),C=k.useCallback(A=>{c===!1?T(A):k.startTransition(()=>T(A))},[c]);return k.useLayoutEffect(()=>y.listen(C),[y,C]),k.createElement(NT,{basename:i,children:a,location:g.location,navigationType:g.action,navigator:y,unstable_useTransitions:c})}var mv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pv=k.forwardRef(function({onClick:a,discover:c="render",prefetch:u="none",relative:m,reloadDocument:y,replace:g,state:T,target:C,to:A,preventScrollReset:w,viewTransition:x,unstable_defaultShouldRevalidate:M,...D},B){let{basename:X,unstable_useTransitions:H}=k.useContext(zn),F=typeof A=="string"&&mv.test(A),W=nv(A,X);A=W.to;let Y=gT(A,{relative:m}),[re,ae,G]=WT(u,D),me=rA(A,{replace:g,state:T,target:C,preventScrollReset:w,relative:m,viewTransition:x,unstable_defaultShouldRevalidate:M,unstable_useTransitions:H});function ce(Pe){a&&a(Pe),Pe.defaultPrevented||me(Pe)}let be=k.createElement("a",{...D,...G,href:W.absoluteURL||Y,onClick:W.isExternal||y?a:ce,ref:eA(B,ae),target:C,"data-discover":!F&&c==="render"?"true":void 0});return re&&!F?k.createElement(k.Fragment,null,be,k.createElement(ZT,{page:Y})):be});pv.displayName="Link";var iA=k.forwardRef(function({"aria-current":a="page",caseSensitive:c=!1,className:u="",end:m=!1,style:y,to:g,viewTransition:T,children:C,...A},w){let x=ql(g,{relative:A.relative}),M=za(),D=k.useContext(Ju),{navigator:B,basename:X}=k.useContext(zn),H=D!=null&&fA(x)&&T===!0,F=B.encodeLocation?B.encodeLocation(x).pathname:x.pathname,W=M.pathname,Y=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;c||(W=W.toLowerCase(),Y=Y?Y.toLowerCase():null,F=F.toLowerCase()),Y&&X&&(Y=ts(Y,X)||Y);const re=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let ae=W===F||!m&&W.startsWith(F)&&W.charAt(re)==="/",G=Y!=null&&(Y===F||!m&&Y.startsWith(F)&&Y.charAt(F.length)==="/"),me={isActive:ae,isPending:G,isTransitioning:H},ce=ae?a:void 0,be;typeof u=="function"?be=u(me):be=[u,ae?"active":null,G?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let Pe=typeof y=="function"?y(me):y;return k.createElement(pv,{...A,"aria-current":ce,className:be,ref:w,style:Pe,to:g,viewTransition:T},typeof C=="function"?C(me):C)});iA.displayName="NavLink";var sA=k.forwardRef(({discover:i="render",fetcherKey:a,navigate:c,reloadDocument:u,replace:m,state:y,method:g=Du,action:T,onSubmit:C,relative:A,preventScrollReset:w,viewTransition:x,unstable_defaultShouldRevalidate:M,...D},B)=>{let{unstable_useTransitions:X}=k.useContext(zn),H=cA(),F=uA(T,{relative:A}),W=g.toLowerCase()==="get"?"get":"post",Y=typeof T=="string"&&mv.test(T),re=ae=>{if(C&&C(ae),ae.defaultPrevented)return;ae.preventDefault();let G=ae.nativeEvent.submitter,me=G?.getAttribute("formmethod")||g,ce=()=>H(G||ae.currentTarget,{fetcherKey:a,method:me,navigate:c,replace:m,state:y,relative:A,preventScrollReset:w,viewTransition:x,unstable_defaultShouldRevalidate:M});X&&c!==!1?k.startTransition(()=>ce()):ce()};return k.createElement("form",{ref:B,method:W,action:F,onSubmit:u?C:re,...D,"data-discover":!Y&&i==="render"?"true":void 0})});sA.displayName="Form";function aA(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gv(i){let a=k.useContext(Xr);return ct(a,aA(i)),a}function rA(i,{target:a,replace:c,state:u,preventScrollReset:m,relative:y,viewTransition:g,unstable_defaultShouldRevalidate:T,unstable_useTransitions:C}={}){let A=$u(),w=za(),x=ql(i,{relative:y});return k.useCallback(M=>{if(BT(M,a)){M.preventDefault();let D=c!==void 0?c:Ul(w)===Ul(x),B=()=>A(i,{replace:D,state:u,preventScrollReset:m,relative:y,viewTransition:g,unstable_defaultShouldRevalidate:T});C?k.startTransition(()=>B()):B()}},[w,A,x,c,u,a,i,m,y,g,T,C])}var oA=0,lA=()=>`__${String(++oA)}__`;function cA(){let{router:i}=gv("useSubmit"),{basename:a}=k.useContext(zn),c=xT(),u=i.fetch,m=i.navigate;return k.useCallback(async(y,g={})=>{let{action:T,method:C,encType:A,formData:w,body:x}=zT(y,a);if(g.navigate===!1){let M=g.fetcherKey||lA();await u(M,c,g.action||T,{unstable_defaultShouldRevalidate:g.unstable_defaultShouldRevalidate,preventScrollReset:g.preventScrollReset,formData:w,body:x,formMethod:g.method||C,formEncType:g.encType||A,flushSync:g.flushSync})}else await m(g.action||T,{unstable_defaultShouldRevalidate:g.unstable_defaultShouldRevalidate,preventScrollReset:g.preventScrollReset,formData:w,body:x,formMethod:g.method||C,formEncType:g.encType||A,replace:g.replace,state:g.state,fromRouteId:c,flushSync:g.flushSync,viewTransition:g.viewTransition})},[u,m,a,c])}function uA(i,{relative:a}={}){let{basename:c}=k.useContext(zn),u=k.useContext(wi);ct(u,"useFormAction must be used inside a RouteContext");let[m]=u.matches.slice(-1),y={...ql(i||".",{relative:a})},g=za();if(i==null){y.search=g.search;let T=new URLSearchParams(y.search),C=T.getAll("index");if(C.some(w=>w==="")){T.delete("index"),C.filter(x=>x).forEach(x=>T.append("index",x));let w=T.toString();y.search=w?`?${w}`:""}}return(!i||i===".")&&m.route.index&&(y.search=y.search?y.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(y.pathname=y.pathname==="/"?c:es([c,y.pathname])),Ul(y)}function fA(i,{relative:a}={}){let c=k.useContext(sv);ct(c!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:u}=gv("useViewTransitionState"),m=ql(i,{relative:a});if(!c.isTransitioning)return!1;let y=ts(c.currentLocation.pathname,u)||c.currentLocation.pathname,g=ts(c.nextLocation.pathname,u)||c.nextLocation.pathname;return qu(m.pathname,g)!=null||qu(m.pathname,y)!=null}const am=k.createContext({});function rm(i){const a=k.useRef(null);return a.current===null&&(a.current=i()),a.current}const yv=typeof window<"u",vv=yv?k.useLayoutEffect:k.useEffect,tf=k.createContext(null);function om(i,a){i.indexOf(a)===-1&&i.push(a)}function Iu(i,a){const c=i.indexOf(a);c>-1&&i.splice(c,1)}const Ci=(i,a,c)=>c>a?a:c<i?i:c;let lm=()=>{};const ns={},bv=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function Sv(i){return typeof i=="object"&&i!==null}const Tv=i=>/^0[^.\s]+$/u.test(i);function Av(i){let a;return()=>(a===void 0&&(a=i()),a)}const Vn=i=>i,hA=(i,a)=>c=>a(i(c)),Il=(...i)=>i.reduce(hA),jl=(i,a,c)=>{const u=a-i;return u===0?1:(c-i)/u};class cm{constructor(){this.subscriptions=[]}add(a){return om(this.subscriptions,a),()=>Iu(this.subscriptions,a)}notify(a,c,u){const m=this.subscriptions.length;if(m)if(m===1)this.subscriptions[0](a,c,u);else for(let y=0;y<m;y++){const g=this.subscriptions[y];g&&g(a,c,u)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ei=i=>i*1e3,Pn=i=>i/1e3;function Cv(i,a){return a?i*(1e3/a):0}const wv=(i,a,c)=>(((1-3*c+3*a)*i+(3*c-6*a))*i+3*a)*i,dA=1e-7,mA=12;function pA(i,a,c,u,m){let y,g,T=0;do g=a+(c-a)/2,y=wv(g,u,m)-i,y>0?c=g:a=g;while(Math.abs(y)>dA&&++T<mA);return g}function Yl(i,a,c,u){if(i===a&&c===u)return Vn;const m=y=>pA(y,0,1,i,c);return y=>y===0||y===1?y:wv(m(y),a,u)}const Rv=i=>a=>a<=.5?i(2*a)/2:(2-i(2*(1-a)))/2,Ev=i=>a=>1-i(1-a),xv=Yl(.33,1.53,.69,.99),um=Ev(xv),Ov=Rv(um),Mv=i=>(i*=2)<1?.5*um(i):.5*(2-Math.pow(2,-10*(i-1))),fm=i=>1-Math.sin(Math.acos(i)),_v=Ev(fm),Nv=Rv(fm),gA=Yl(.42,0,1,1),yA=Yl(0,0,.58,1),Dv=Yl(.42,0,.58,1),vA=i=>Array.isArray(i)&&typeof i[0]!="number",Lv=i=>Array.isArray(i)&&typeof i[0]=="number",bA={linear:Vn,easeIn:gA,easeInOut:Dv,easeOut:yA,circIn:fm,circInOut:Nv,circOut:_v,backIn:um,backInOut:Ov,backOut:xv,anticipate:Mv},SA=i=>typeof i=="string",_y=i=>{if(Lv(i)){lm(i.length===4);const[a,c,u,m]=i;return Yl(a,c,u,m)}else if(SA(i))return bA[i];return i},xu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function TA(i,a){let c=new Set,u=new Set,m=!1,y=!1;const g=new WeakSet;let T={delta:0,timestamp:0,isProcessing:!1};function C(w){g.has(w)&&(A.schedule(w),i()),w(T)}const A={schedule:(w,x=!1,M=!1)=>{const B=M&&m?c:u;return x&&g.add(w),B.has(w)||B.add(w),w},cancel:w=>{u.delete(w),g.delete(w)},process:w=>{if(T=w,m){y=!0;return}m=!0,[c,u]=[u,c],c.forEach(C),c.clear(),m=!1,y&&(y=!1,A.process(w))}};return A}const AA=40;function kv(i,a){let c=!1,u=!0;const m={delta:0,timestamp:0,isProcessing:!1},y=()=>c=!0,g=xu.reduce((Y,re)=>(Y[re]=TA(y),Y),{}),{setup:T,read:C,resolveKeyframes:A,preUpdate:w,update:x,preRender:M,render:D,postRender:B}=g,X=()=>{const Y=ns.useManualTiming?m.timestamp:performance.now();c=!1,ns.useManualTiming||(m.delta=u?1e3/60:Math.max(Math.min(Y-m.timestamp,AA),1)),m.timestamp=Y,m.isProcessing=!0,T.process(m),C.process(m),A.process(m),w.process(m),x.process(m),M.process(m),D.process(m),B.process(m),m.isProcessing=!1,c&&a&&(u=!1,i(X))},H=()=>{c=!0,u=!0,m.isProcessing||i(X)};return{schedule:xu.reduce((Y,re)=>{const ae=g[re];return Y[re]=(G,me=!1,ce=!1)=>(c||H(),ae.schedule(G,me,ce)),Y},{}),cancel:Y=>{for(let re=0;re<xu.length;re++)g[xu[re]].cancel(Y)},state:m,steps:g}}const{schedule:et,cancel:Qs,state:zt,steps:ed}=kv(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vn,!0);let ku;function CA(){ku=void 0}const nn={now:()=>(ku===void 0&&nn.set(zt.isProcessing||ns.useManualTiming?zt.timestamp:performance.now()),ku),set:i=>{ku=i,queueMicrotask(CA)}},Uv=i=>a=>typeof a=="string"&&a.startsWith(i),jv=Uv("--"),wA=Uv("var(--"),hm=i=>wA(i)?RA.test(i.split("/*")[0].trim()):!1,RA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Ny(i){return typeof i!="string"?!1:i.split("/*")[0].includes("var(--")}const Qr={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},Bl={...Qr,transform:i=>Ci(0,1,i)},Ou={...Qr,default:1},Nl=i=>Math.round(i*1e5)/1e5,dm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function EA(i){return i==null}const xA=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,mm=(i,a)=>c=>!!(typeof c=="string"&&xA.test(c)&&c.startsWith(i)||a&&!EA(c)&&Object.prototype.hasOwnProperty.call(c,a)),Bv=(i,a,c)=>u=>{if(typeof u!="string")return u;const[m,y,g,T]=u.match(dm);return{[i]:parseFloat(m),[a]:parseFloat(y),[c]:parseFloat(g),alpha:T!==void 0?parseFloat(T):1}},OA=i=>Ci(0,255,i),td={...Qr,transform:i=>Math.round(OA(i))},ja={test:mm("rgb","red"),parse:Bv("red","green","blue"),transform:({red:i,green:a,blue:c,alpha:u=1})=>"rgba("+td.transform(i)+", "+td.transform(a)+", "+td.transform(c)+", "+Nl(Bl.transform(u))+")"};function MA(i){let a="",c="",u="",m="";return i.length>5?(a=i.substring(1,3),c=i.substring(3,5),u=i.substring(5,7),m=i.substring(7,9)):(a=i.substring(1,2),c=i.substring(2,3),u=i.substring(3,4),m=i.substring(4,5),a+=a,c+=c,u+=u,m+=m),{red:parseInt(a,16),green:parseInt(c,16),blue:parseInt(u,16),alpha:m?parseInt(m,16)/255:1}}const bd={test:mm("#"),parse:MA,transform:ja.transform},Kl=i=>({test:a=>typeof a=="string"&&a.endsWith(i)&&a.split(" ").length===1,parse:parseFloat,transform:a=>`${a}${i}`}),Ys=Kl("deg"),Ai=Kl("%"),ge=Kl("px"),_A=Kl("vh"),NA=Kl("vw"),Dy={...Ai,parse:i=>Ai.parse(i)/100,transform:i=>Ai.transform(i*100)},zr={test:mm("hsl","hue"),parse:Bv("hue","saturation","lightness"),transform:({hue:i,saturation:a,lightness:c,alpha:u=1})=>"hsla("+Math.round(i)+", "+Ai.transform(Nl(a))+", "+Ai.transform(Nl(c))+", "+Nl(Bl.transform(u))+")"},wt={test:i=>ja.test(i)||bd.test(i)||zr.test(i),parse:i=>ja.test(i)?ja.parse(i):zr.test(i)?zr.parse(i):bd.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?ja.transform(i):zr.transform(i),getAnimatableNone:i=>{const a=wt.parse(i);return a.alpha=0,wt.transform(a)}},DA=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function LA(i){return isNaN(i)&&typeof i=="string"&&(i.match(dm)?.length||0)+(i.match(DA)?.length||0)>0}const Pv="number",Vv="color",kA="var",UA="var(",Ly="${}",jA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Pl(i){const a=i.toString(),c=[],u={color:[],number:[],var:[]},m=[];let y=0;const T=a.replace(jA,C=>(wt.test(C)?(u.color.push(y),m.push(Vv),c.push(wt.parse(C))):C.startsWith(UA)?(u.var.push(y),m.push(kA),c.push(C)):(u.number.push(y),m.push(Pv),c.push(parseFloat(C))),++y,Ly)).split(Ly);return{values:c,split:T,indexes:u,types:m}}function zv(i){return Pl(i).values}function Gv(i){const{split:a,types:c}=Pl(i),u=a.length;return m=>{let y="";for(let g=0;g<u;g++)if(y+=a[g],m[g]!==void 0){const T=c[g];T===Pv?y+=Nl(m[g]):T===Vv?y+=wt.transform(m[g]):y+=m[g]}return y}}const BA=i=>typeof i=="number"?0:wt.test(i)?wt.getAnimatableNone(i):i;function PA(i){const a=zv(i);return Gv(i)(a.map(BA))}const ti={test:LA,parse:zv,createTransformer:Gv,getAnimatableNone:PA};function nd(i,a,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?i+(a-i)*6*c:c<1/2?a:c<2/3?i+(a-i)*(2/3-c)*6:i}function VA({hue:i,saturation:a,lightness:c,alpha:u}){i/=360,a/=100,c/=100;let m=0,y=0,g=0;if(!a)m=y=g=c;else{const T=c<.5?c*(1+a):c+a-c*a,C=2*c-T;m=nd(C,T,i+1/3),y=nd(C,T,i),g=nd(C,T,i-1/3)}return{red:Math.round(m*255),green:Math.round(y*255),blue:Math.round(g*255),alpha:u}}function Yu(i,a){return c=>c>0?a:i}const lt=(i,a,c)=>i+(a-i)*c,id=(i,a,c)=>{const u=i*i,m=c*(a*a-u)+u;return m<0?0:Math.sqrt(m)},zA=[bd,ja,zr],GA=i=>zA.find(a=>a.test(i));function ky(i){const a=GA(i);if(!a)return!1;let c=a.parse(i);return a===zr&&(c=VA(c)),c}const Uy=(i,a)=>{const c=ky(i),u=ky(a);if(!c||!u)return Yu(i,a);const m={...c};return y=>(m.red=id(c.red,u.red,y),m.green=id(c.green,u.green,y),m.blue=id(c.blue,u.blue,y),m.alpha=lt(c.alpha,u.alpha,y),ja.transform(m))},Sd=new Set(["none","hidden"]);function HA(i,a){return Sd.has(i)?c=>c<=0?i:a:c=>c>=1?a:i}function qA(i,a){return c=>lt(i,a,c)}function pm(i){return typeof i=="number"?qA:typeof i=="string"?hm(i)?Yu:wt.test(i)?Uy:KA:Array.isArray(i)?Hv:typeof i=="object"?wt.test(i)?Uy:IA:Yu}function Hv(i,a){const c=[...i],u=c.length,m=i.map((y,g)=>pm(y)(y,a[g]));return y=>{for(let g=0;g<u;g++)c[g]=m[g](y);return c}}function IA(i,a){const c={...i,...a},u={};for(const m in c)i[m]!==void 0&&a[m]!==void 0&&(u[m]=pm(i[m])(i[m],a[m]));return m=>{for(const y in u)c[y]=u[y](m);return c}}function YA(i,a){const c=[],u={color:0,var:0,number:0};for(let m=0;m<a.values.length;m++){const y=a.types[m],g=i.indexes[y][u[y]],T=i.values[g]??0;c[m]=T,u[y]++}return c}const KA=(i,a)=>{const c=ti.createTransformer(a),u=Pl(i),m=Pl(a);return u.indexes.var.length===m.indexes.var.length&&u.indexes.color.length===m.indexes.color.length&&u.indexes.number.length>=m.indexes.number.length?Sd.has(i)&&!m.values.length||Sd.has(a)&&!u.values.length?HA(i,a):Il(Hv(YA(u,m),m.values),c):Yu(i,a)};function qv(i,a,c){return typeof i=="number"&&typeof a=="number"&&typeof c=="number"?lt(i,a,c):pm(i)(i,a)}const XA=i=>{const a=({timestamp:c})=>i(c);return{start:(c=!0)=>et.update(a,c),stop:()=>Qs(a),now:()=>zt.isProcessing?zt.timestamp:nn.now()}},Iv=(i,a,c=10)=>{let u="";const m=Math.max(Math.round(a/c),2);for(let y=0;y<m;y++)u+=Math.round(i(y/(m-1))*1e4)/1e4+", ";return`linear(${u.substring(0,u.length-2)})`},Ku=2e4;function gm(i){let a=0;const c=50;let u=i.next(a);for(;!u.done&&a<Ku;)a+=c,u=i.next(a);return a>=Ku?1/0:a}function QA(i,a=100,c){const u=c({...i,keyframes:[0,a]}),m=Math.min(gm(u),Ku);return{type:"keyframes",ease:y=>u.next(m*y).value/a,duration:Pn(m)}}const FA=5;function Yv(i,a,c){const u=Math.max(a-FA,0);return Cv(c-i(u),a-u)}const dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sd=.001;function WA({duration:i=dt.duration,bounce:a=dt.bounce,velocity:c=dt.velocity,mass:u=dt.mass}){let m,y,g=1-a;g=Ci(dt.minDamping,dt.maxDamping,g),i=Ci(dt.minDuration,dt.maxDuration,Pn(i)),g<1?(m=A=>{const w=A*g,x=w*i,M=w-c,D=Td(A,g),B=Math.exp(-x);return sd-M/D*B},y=A=>{const x=A*g*i,M=x*c+c,D=Math.pow(g,2)*Math.pow(A,2)*i,B=Math.exp(-x),X=Td(Math.pow(A,2),g);return(-m(A)+sd>0?-1:1)*((M-D)*B)/X}):(m=A=>{const w=Math.exp(-A*i),x=(A-c)*i+1;return-sd+w*x},y=A=>{const w=Math.exp(-A*i),x=(c-A)*(i*i);return w*x});const T=5/i,C=JA(m,y,T);if(i=ei(i),isNaN(C))return{stiffness:dt.stiffness,damping:dt.damping,duration:i};{const A=Math.pow(C,2)*u;return{stiffness:A,damping:g*2*Math.sqrt(u*A),duration:i}}}const ZA=12;function JA(i,a,c){let u=c;for(let m=1;m<ZA;m++)u=u-i(u)/a(u);return u}function Td(i,a){return i*Math.sqrt(1-a*a)}const $A=["duration","bounce"],eC=["stiffness","damping","mass"];function jy(i,a){return a.some(c=>i[c]!==void 0)}function tC(i){let a={velocity:dt.velocity,stiffness:dt.stiffness,damping:dt.damping,mass:dt.mass,isResolvedFromDuration:!1,...i};if(!jy(i,eC)&&jy(i,$A))if(a.velocity=0,i.visualDuration){const c=i.visualDuration,u=2*Math.PI/(c*1.2),m=u*u,y=2*Ci(.05,1,1-(i.bounce||0))*Math.sqrt(m);a={...a,mass:dt.mass,stiffness:m,damping:y}}else{const c=WA({...i,velocity:0});a={...a,...c,mass:dt.mass},a.isResolvedFromDuration=!0}return a}function Xu(i=dt.visualDuration,a=dt.bounce){const c=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:a}:i;let{restSpeed:u,restDelta:m}=c;const y=c.keyframes[0],g=c.keyframes[c.keyframes.length-1],T={done:!1,value:y},{stiffness:C,damping:A,mass:w,duration:x,velocity:M,isResolvedFromDuration:D}=tC({...c,velocity:-Pn(c.velocity||0)}),B=M||0,X=A/(2*Math.sqrt(C*w)),H=g-y,F=Pn(Math.sqrt(C/w)),W=Math.abs(H)<5;u||(u=W?dt.restSpeed.granular:dt.restSpeed.default),m||(m=W?dt.restDelta.granular:dt.restDelta.default);let Y;if(X<1){const ae=Td(F,X);Y=G=>{const me=Math.exp(-X*F*G);return g-me*((B+X*F*H)/ae*Math.sin(ae*G)+H*Math.cos(ae*G))}}else if(X===1)Y=ae=>g-Math.exp(-F*ae)*(H+(B+F*H)*ae);else{const ae=F*Math.sqrt(X*X-1);Y=G=>{const me=Math.exp(-X*F*G),ce=Math.min(ae*G,300);return g-me*((B+X*F*H)*Math.sinh(ce)+ae*H*Math.cosh(ce))/ae}}const re={calculatedDuration:D&&x||null,next:ae=>{const G=Y(ae);if(D)T.done=ae>=x;else{let me=ae===0?B:0;X<1&&(me=ae===0?ei(B):Yv(Y,ae,G));const ce=Math.abs(me)<=u,be=Math.abs(g-G)<=m;T.done=ce&&be}return T.value=T.done?g:G,T},toString:()=>{const ae=Math.min(gm(re),Ku),G=Iv(me=>re.next(ae*me).value,ae,30);return ae+"ms "+G},toTransition:()=>{}};return re}Xu.applyToOptions=i=>{const a=QA(i,100,Xu);return i.ease=a.ease,i.duration=ei(a.duration),i.type="keyframes",i};function Ad({keyframes:i,velocity:a=0,power:c=.8,timeConstant:u=325,bounceDamping:m=10,bounceStiffness:y=500,modifyTarget:g,min:T,max:C,restDelta:A=.5,restSpeed:w}){const x=i[0],M={done:!1,value:x},D=ce=>T!==void 0&&ce<T||C!==void 0&&ce>C,B=ce=>T===void 0?C:C===void 0||Math.abs(T-ce)<Math.abs(C-ce)?T:C;let X=c*a;const H=x+X,F=g===void 0?H:g(H);F!==H&&(X=F-x);const W=ce=>-X*Math.exp(-ce/u),Y=ce=>F+W(ce),re=ce=>{const be=W(ce),Pe=Y(ce);M.done=Math.abs(be)<=A,M.value=M.done?F:Pe};let ae,G;const me=ce=>{D(M.value)&&(ae=ce,G=Xu({keyframes:[M.value,B(M.value)],velocity:Yv(Y,ce,M.value),damping:m,stiffness:y,restDelta:A,restSpeed:w}))};return me(0),{calculatedDuration:null,next:ce=>{let be=!1;return!G&&ae===void 0&&(be=!0,re(ce),me(ce)),ae!==void 0&&ce>=ae?G.next(ce-ae):(!be&&re(ce),M)}}}function nC(i,a,c){const u=[],m=c||ns.mix||qv,y=i.length-1;for(let g=0;g<y;g++){let T=m(i[g],i[g+1]);if(a){const C=Array.isArray(a)?a[g]||Vn:a;T=Il(C,T)}u.push(T)}return u}function iC(i,a,{clamp:c=!0,ease:u,mixer:m}={}){const y=i.length;if(lm(y===a.length),y===1)return()=>a[0];if(y===2&&a[0]===a[1])return()=>a[1];const g=i[0]===i[1];i[0]>i[y-1]&&(i=[...i].reverse(),a=[...a].reverse());const T=nC(a,u,m),C=T.length,A=w=>{if(g&&w<i[0])return a[0];let x=0;if(C>1)for(;x<i.length-2&&!(w<i[x+1]);x++);const M=jl(i[x],i[x+1],w);return T[x](M)};return c?w=>A(Ci(i[0],i[y-1],w)):A}function sC(i,a){const c=i[i.length-1];for(let u=1;u<=a;u++){const m=jl(0,a,u);i.push(lt(c,1,m))}}function aC(i){const a=[0];return sC(a,i.length-1),a}function rC(i,a){return i.map(c=>c*a)}function oC(i,a){return i.map(()=>a||Dv).splice(0,i.length-1)}function Dl({duration:i=300,keyframes:a,times:c,ease:u="easeInOut"}){const m=vA(u)?u.map(_y):_y(u),y={done:!1,value:a[0]},g=rC(c&&c.length===a.length?c:aC(a),i),T=iC(g,a,{ease:Array.isArray(m)?m:oC(a,m)});return{calculatedDuration:i,next:C=>(y.value=T(C),y.done=C>=i,y)}}const lC=i=>i!==null;function ym(i,{repeat:a,repeatType:c="loop"},u,m=1){const y=i.filter(lC),T=m<0||a&&c!=="loop"&&a%2===1?0:y.length-1;return!T||u===void 0?y[T]:u}const cC={decay:Ad,inertia:Ad,tween:Dl,keyframes:Dl,spring:Xu};function Kv(i){typeof i.type=="string"&&(i.type=cC[i.type])}class vm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(a=>{this.resolve=a})}notifyFinished(){this.resolve()}then(a,c){return this.finished.then(a,c)}}const uC=i=>i/100;class bm extends vm{constructor(a){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:c}=this.options;c&&c.updatedAt!==nn.now()&&this.tick(nn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=a,this.initAnimation(),this.play(),a.autoplay===!1&&this.pause()}initAnimation(){const{options:a}=this;Kv(a);const{type:c=Dl,repeat:u=0,repeatDelay:m=0,repeatType:y,velocity:g=0}=a;let{keyframes:T}=a;const C=c||Dl;C!==Dl&&typeof T[0]!="number"&&(this.mixKeyframes=Il(uC,qv(T[0],T[1])),T=[0,100]);const A=C({...a,keyframes:T});y==="mirror"&&(this.mirroredGenerator=C({...a,keyframes:[...T].reverse(),velocity:-g})),A.calculatedDuration===null&&(A.calculatedDuration=gm(A));const{calculatedDuration:w}=A;this.calculatedDuration=w,this.resolvedDuration=w+m,this.totalDuration=this.resolvedDuration*(u+1)-m,this.generator=A}updateTime(a){const c=Math.round(a-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=c}tick(a,c=!1){const{generator:u,totalDuration:m,mixKeyframes:y,mirroredGenerator:g,resolvedDuration:T,calculatedDuration:C}=this;if(this.startTime===null)return u.next(0);const{delay:A=0,keyframes:w,repeat:x,repeatType:M,repeatDelay:D,type:B,onUpdate:X,finalKeyframe:H}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,a):this.speed<0&&(this.startTime=Math.min(a-m/this.speed,this.startTime)),c?this.currentTime=a:this.updateTime(a);const F=this.currentTime-A*(this.playbackSpeed>=0?1:-1),W=this.playbackSpeed>=0?F<0:F>m;this.currentTime=Math.max(F,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let Y=this.currentTime,re=u;if(x){const ce=Math.min(this.currentTime,m)/T;let be=Math.floor(ce),Pe=ce%1;!Pe&&ce>=1&&(Pe=1),Pe===1&&be--,be=Math.min(be,x+1),be%2&&(M==="reverse"?(Pe=1-Pe,D&&(Pe-=D/T)):M==="mirror"&&(re=g)),Y=Ci(0,1,Pe)*T}const ae=W?{done:!1,value:w[0]}:re.next(Y);y&&(ae.value=y(ae.value));let{done:G}=ae;!W&&C!==null&&(G=this.playbackSpeed>=0?this.currentTime>=m:this.currentTime<=0);const me=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return me&&B!==Ad&&(ae.value=ym(w,this.options,H,this.speed)),X&&X(ae.value),me&&this.finish(),ae}then(a,c){return this.finished.then(a,c)}get duration(){return Pn(this.calculatedDuration)}get iterationDuration(){const{delay:a=0}=this.options||{};return this.duration+Pn(a)}get time(){return Pn(this.currentTime)}set time(a){a=ei(a),this.currentTime=a,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=a:this.driver&&(this.startTime=this.driver.now()-a/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(a){this.updateTime(nn.now());const c=this.playbackSpeed!==a;this.playbackSpeed=a,c&&(this.time=Pn(this.currentTime))}play(){if(this.isStopped)return;const{driver:a=XA,startTime:c}=this.options;this.driver||(this.driver=a(m=>this.tick(m))),this.options.onPlay?.();const u=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=u):this.holdTime!==null?this.startTime=u-this.holdTime:this.startTime||(this.startTime=c??u),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(nn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(a){return this.startTime=0,this.tick(a,!0)}attachTimeline(a){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),a.observe(this)}}function fC(i){for(let a=1;a<i.length;a++)i[a]??(i[a]=i[a-1])}const Ba=i=>i*180/Math.PI,Cd=i=>{const a=Ba(Math.atan2(i[1],i[0]));return wd(a)},hC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:Cd,rotateZ:Cd,skewX:i=>Ba(Math.atan(i[1])),skewY:i=>Ba(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},wd=i=>(i=i%360,i<0&&(i+=360),i),By=Cd,Py=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),Vy=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),dC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Py,scaleY:Vy,scale:i=>(Py(i)+Vy(i))/2,rotateX:i=>wd(Ba(Math.atan2(i[6],i[5]))),rotateY:i=>wd(Ba(Math.atan2(-i[2],i[0]))),rotateZ:By,rotate:By,skewX:i=>Ba(Math.atan(i[4])),skewY:i=>Ba(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function Rd(i){return i.includes("scale")?1:0}function Ed(i,a){if(!i||i==="none")return Rd(a);const c=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let u,m;if(c)u=dC,m=c;else{const T=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);u=hC,m=T}if(!m)return Rd(a);const y=u[a],g=m[1].split(",").map(pC);return typeof y=="function"?y(g):g[y]}const mC=(i,a)=>{const{transform:c="none"}=getComputedStyle(i);return Ed(c,a)};function pC(i){return parseFloat(i.trim())}const Fr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wr=new Set(Fr),zy=i=>i===Qr||i===ge,gC=new Set(["x","y","z"]),yC=Fr.filter(i=>!gC.has(i));function vC(i){const a=[];return yC.forEach(c=>{const u=i.getValue(c);u!==void 0&&(a.push([c,u.get()]),u.set(c.startsWith("scale")?1:0))}),a}const Ks={width:({x:i},{paddingLeft:a="0",paddingRight:c="0"})=>i.max-i.min-parseFloat(a)-parseFloat(c),height:({y:i},{paddingTop:a="0",paddingBottom:c="0"})=>i.max-i.min-parseFloat(a)-parseFloat(c),top:(i,{top:a})=>parseFloat(a),left:(i,{left:a})=>parseFloat(a),bottom:({y:i},{top:a})=>parseFloat(a)+(i.max-i.min),right:({x:i},{left:a})=>parseFloat(a)+(i.max-i.min),x:(i,{transform:a})=>Ed(a,"x"),y:(i,{transform:a})=>Ed(a,"y")};Ks.translateX=Ks.x;Ks.translateY=Ks.y;const Pa=new Set;let xd=!1,Od=!1,Md=!1;function Xv(){if(Od){const i=Array.from(Pa).filter(u=>u.needsMeasurement),a=new Set(i.map(u=>u.element)),c=new Map;a.forEach(u=>{const m=vC(u);m.length&&(c.set(u,m),u.render())}),i.forEach(u=>u.measureInitialState()),a.forEach(u=>{u.render();const m=c.get(u);m&&m.forEach(([y,g])=>{u.getValue(y)?.set(g)})}),i.forEach(u=>u.measureEndState()),i.forEach(u=>{u.suspendedScrollY!==void 0&&window.scrollTo(0,u.suspendedScrollY)})}Od=!1,xd=!1,Pa.forEach(i=>i.complete(Md)),Pa.clear()}function Qv(){Pa.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(Od=!0)})}function bC(){Md=!0,Qv(),Xv(),Md=!1}class Sm{constructor(a,c,u,m,y,g=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...a],this.onComplete=c,this.name=u,this.motionValue=m,this.element=y,this.isAsync=g}scheduleResolve(){this.state="scheduled",this.isAsync?(Pa.add(this),xd||(xd=!0,et.read(Qv),et.resolveKeyframes(Xv))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:a,name:c,element:u,motionValue:m}=this;if(a[0]===null){const y=m?.get(),g=a[a.length-1];if(y!==void 0)a[0]=y;else if(u&&c){const T=u.readValue(c,g);T!=null&&(a[0]=T)}a[0]===void 0&&(a[0]=g),m&&y===void 0&&m.set(a[0])}fC(a)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(a=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,a),Pa.delete(this)}cancel(){this.state==="scheduled"&&(Pa.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const SC=i=>i.startsWith("--");function TC(i,a,c){SC(a)?i.style.setProperty(a,c):i.style[a]=c}const AC={};function Fv(i,a){const c=Av(i);return()=>AC[a]??c()}const CC=Fv(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),Wv=Fv(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),xl=([i,a,c,u])=>`cubic-bezier(${i}, ${a}, ${c}, ${u})`,Gy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:xl([0,.65,.55,1]),circOut:xl([.55,0,1,.45]),backIn:xl([.31,.01,.66,-.59]),backOut:xl([.33,1.53,.69,.99])};function Zv(i,a){if(i)return typeof i=="function"?Wv()?Iv(i,a):"ease-out":Lv(i)?xl(i):Array.isArray(i)?i.map(c=>Zv(c,a)||Gy.easeOut):Gy[i]}function wC(i,a,c,{delay:u=0,duration:m=300,repeat:y=0,repeatType:g="loop",ease:T="easeOut",times:C}={},A=void 0){const w={[a]:c};C&&(w.offset=C);const x=Zv(T,m);Array.isArray(x)&&(w.easing=x);const M={delay:u,duration:m,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:y+1,direction:g==="reverse"?"alternate":"normal"};return A&&(M.pseudoElement=A),i.animate(w,M)}function Jv(i){return typeof i=="function"&&"applyToOptions"in i}function RC({type:i,...a}){return Jv(i)&&Wv()?i.applyToOptions(a):(a.duration??(a.duration=300),a.ease??(a.ease="easeOut"),a)}class $v extends vm{constructor(a){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!a)return;const{element:c,name:u,keyframes:m,pseudoElement:y,allowFlatten:g=!1,finalKeyframe:T,onComplete:C}=a;this.isPseudoElement=!!y,this.allowFlatten=g,this.options=a,lm(typeof a.type!="string");const A=RC(a);this.animation=wC(c,u,m,A,y),A.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!y){const w=ym(m,this.options,T,this.speed);this.updateMotionValue?this.updateMotionValue(w):TC(c,u,w),this.animation.cancel()}C?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:a}=this;a==="idle"||a==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const a=this.options?.element;!this.isPseudoElement&&a?.isConnected&&this.animation.commitStyles?.()}get duration(){const a=this.animation.effect?.getComputedTiming?.().duration||0;return Pn(Number(a))}get iterationDuration(){const{delay:a=0}=this.options||{};return this.duration+Pn(a)}get time(){return Pn(Number(this.animation.currentTime)||0)}set time(a){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ei(a)}get speed(){return this.animation.playbackRate}set speed(a){a<0&&(this.finishedTime=null),this.animation.playbackRate=a}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(a){this.manualStartTime=this.animation.startTime=a}attachTimeline({timeline:a,observe:c}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,a&&CC()?(this.animation.timeline=a,Vn):c(this)}}const eb={anticipate:Mv,backInOut:Ov,circInOut:Nv};function EC(i){return i in eb}function xC(i){typeof i.ease=="string"&&EC(i.ease)&&(i.ease=eb[i.ease])}const ad=10;class OC extends $v{constructor(a){xC(a),Kv(a),super(a),a.startTime!==void 0&&(this.startTime=a.startTime),this.options=a}updateMotionValue(a){const{motionValue:c,onUpdate:u,onComplete:m,element:y,...g}=this.options;if(!c)return;if(a!==void 0){c.set(a);return}const T=new bm({...g,autoplay:!1}),C=Math.max(ad,nn.now()-this.startTime),A=Ci(0,ad,C-ad);c.setWithVelocity(T.sample(Math.max(0,C-A)).value,T.sample(C).value,A),T.stop()}}const Hy=(i,a)=>a==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(ti.test(i)||i==="0")&&!i.startsWith("url("));function MC(i){const a=i[0];if(i.length===1)return!0;for(let c=0;c<i.length;c++)if(i[c]!==a)return!0}function _C(i,a,c,u){const m=i[0];if(m===null)return!1;if(a==="display"||a==="visibility")return!0;const y=i[i.length-1],g=Hy(m,a),T=Hy(y,a);return!g||!T?!1:MC(i)||(c==="spring"||Jv(c))&&u}function _d(i){i.duration=0,i.type="keyframes"}const NC=new Set(["opacity","clipPath","filter","transform"]),DC=Av(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function LC(i){const{motionValue:a,name:c,repeatDelay:u,repeatType:m,damping:y,type:g}=i;if(!(a?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:C,transformTemplate:A}=a.owner.getProps();return DC()&&c&&NC.has(c)&&(c!=="transform"||!A)&&!C&&!u&&m!=="mirror"&&y!==0&&g!=="inertia"}const kC=40;class UC extends vm{constructor({autoplay:a=!0,delay:c=0,type:u="keyframes",repeat:m=0,repeatDelay:y=0,repeatType:g="loop",keyframes:T,name:C,motionValue:A,element:w,...x}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=nn.now();const M={autoplay:a,delay:c,type:u,repeat:m,repeatDelay:y,repeatType:g,name:C,motionValue:A,element:w,...x},D=w?.KeyframeResolver||Sm;this.keyframeResolver=new D(T,(B,X,H)=>this.onKeyframesResolved(B,X,M,!H),C,A,w),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(a,c,u,m){this.keyframeResolver=void 0;const{name:y,type:g,velocity:T,delay:C,isHandoff:A,onUpdate:w}=u;this.resolvedAt=nn.now(),_C(a,y,g,T)||((ns.instantAnimations||!C)&&w?.(ym(a,u,c)),a[0]=a[a.length-1],_d(u),u.repeat=0);const M={startTime:m?this.resolvedAt?this.resolvedAt-this.createdAt>kC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:c,...u,keyframes:a},D=!A&&LC(M),B=M.motionValue?.owner?.current,X=D?new OC({...M,element:B}):new bm(M);X.finished.then(()=>{this.notifyFinished()}).catch(Vn),this.pendingTimeline&&(this.stopTimeline=X.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=X}get finished(){return this._animation?this.animation.finished:this._finished}then(a,c){return this.finished.finally(a).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),bC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(a){this.animation.time=a}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(a){this.animation.speed=a}get startTime(){return this.animation.startTime}attachTimeline(a){return this._animation?this.stopTimeline=this.animation.attachTimeline(a):this.pendingTimeline=a,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function tb(i,a,c,u=0,m=1){const y=Array.from(i).sort((A,w)=>A.sortNodePosition(w)).indexOf(a),g=i.size,T=(g-1)*u;return typeof c=="function"?c(y,g):m===1?y*u:T-y*u}const jC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function BC(i){const a=jC.exec(i);if(!a)return[,];const[,c,u,m]=a;return[`--${c??u}`,m]}function nb(i,a,c=1){const[u,m]=BC(i);if(!u)return;const y=window.getComputedStyle(a).getPropertyValue(u);if(y){const g=y.trim();return bv(g)?parseFloat(g):g}return hm(m)?nb(m,a,c+1):m}const PC={type:"spring",stiffness:500,damping:25,restSpeed:10},VC=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),zC={type:"keyframes",duration:.8},GC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},HC=(i,{keyframes:a})=>a.length>2?zC:Wr.has(i)?i.startsWith("scale")?VC(a[1]):PC:GC,qC=i=>i!==null;function IC(i,{repeat:a,repeatType:c="loop"},u){const m=i.filter(qC),y=a&&c!=="loop"&&a%2===1?0:m.length-1;return m[y]}function ib(i,a){if(i?.inherit&&a){const{inherit:c,...u}=i;return{...a,...u}}return i}function Tm(i,a){const c=i?.[a]??i?.default??i;return c!==i?ib(c,i):c}function YC({when:i,delay:a,delayChildren:c,staggerChildren:u,staggerDirection:m,repeat:y,repeatType:g,repeatDelay:T,from:C,elapsed:A,...w}){return!!Object.keys(w).length}const Am=(i,a,c,u={},m,y)=>g=>{const T=Tm(u,i)||{},C=T.delay||u.delay||0;let{elapsed:A=0}=u;A=A-ei(C);const w={keyframes:Array.isArray(c)?c:[null,c],ease:"easeOut",velocity:a.getVelocity(),...T,delay:-A,onUpdate:M=>{a.set(M),T.onUpdate&&T.onUpdate(M)},onComplete:()=>{g(),T.onComplete&&T.onComplete()},name:i,motionValue:a,element:y?void 0:m};YC(T)||Object.assign(w,HC(i,w)),w.duration&&(w.duration=ei(w.duration)),w.repeatDelay&&(w.repeatDelay=ei(w.repeatDelay)),w.from!==void 0&&(w.keyframes[0]=w.from);let x=!1;if((w.type===!1||w.duration===0&&!w.repeatDelay)&&(_d(w),w.delay===0&&(x=!0)),(ns.instantAnimations||ns.skipAnimations||m?.shouldSkipAnimations)&&(x=!0,_d(w),w.delay=0),w.allowFlatten=!T.type&&!T.ease,x&&!y&&a.get()!==void 0){const M=IC(w.keyframes,T);if(M!==void 0){et.update(()=>{w.onUpdate(M),w.onComplete()});return}}return T.isSync?new bm(w):new UC(w)};function qy(i){const a=[{},{}];return i?.values.forEach((c,u)=>{a[0][u]=c.get(),a[1][u]=c.getVelocity()}),a}function Cm(i,a,c,u){if(typeof a=="function"){const[m,y]=qy(u);a=a(c!==void 0?c:i.custom,m,y)}if(typeof a=="string"&&(a=i.variants&&i.variants[a]),typeof a=="function"){const[m,y]=qy(u);a=a(c!==void 0?c:i.custom,m,y)}return a}function Yr(i,a,c){const u=i.getProps();return Cm(u,a,c!==void 0?c:u.custom,i)}const sb=new Set(["width","height","top","left","right","bottom",...Fr]),Iy=30,KC=i=>!isNaN(parseFloat(i));class XC{constructor(a,c={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=u=>{const m=nn.now();if(this.updatedAt!==m&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(u),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const y of this.dependents)y.dirty()},this.hasAnimated=!1,this.setCurrent(a),this.owner=c.owner}setCurrent(a){this.current=a,this.updatedAt=nn.now(),this.canTrackVelocity===null&&a!==void 0&&(this.canTrackVelocity=KC(this.current))}setPrevFrameValue(a=this.current){this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt}onChange(a){return this.on("change",a)}on(a,c){this.events[a]||(this.events[a]=new cm);const u=this.events[a].add(c);return a==="change"?()=>{u(),et.read(()=>{this.events.change.getSize()||this.stop()})}:u}clearListeners(){for(const a in this.events)this.events[a].clear()}attach(a,c){this.passiveEffect=a,this.stopPassiveEffect=c}set(a){this.passiveEffect?this.passiveEffect(a,this.updateAndNotify):this.updateAndNotify(a)}setWithVelocity(a,c,u){this.set(c),this.prev=void 0,this.prevFrameValue=a,this.prevUpdatedAt=this.updatedAt-u}jump(a,c=!0){this.updateAndNotify(a),this.prev=a,this.prevUpdatedAt=this.prevFrameValue=void 0,c&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(a){this.dependents||(this.dependents=new Set),this.dependents.add(a)}removeDependent(a){this.dependents&&this.dependents.delete(a)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const a=nn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||a-this.updatedAt>Iy)return 0;const c=Math.min(this.updatedAt-this.prevUpdatedAt,Iy);return Cv(parseFloat(this.current)-parseFloat(this.prevFrameValue),c)}start(a){return this.stop(),new Promise(c=>{this.hasAnimated=!0,this.animation=a(c),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Kr(i,a){return new XC(i,a)}const Nd=i=>Array.isArray(i);function QC(i,a,c){i.hasValue(a)?i.getValue(a).set(c):i.addValue(a,Kr(c))}function FC(i){return Nd(i)?i[i.length-1]||0:i}function WC(i,a){const c=Yr(i,a);let{transitionEnd:u={},transition:m={},...y}=c||{};y={...y,...u};for(const g in y){const T=FC(y[g]);QC(i,g,T)}}const Ft=i=>!!(i&&i.getVelocity);function ZC(i){return!!(Ft(i)&&i.add)}function Dd(i,a){const c=i.getValue("willChange");if(ZC(c))return c.add(a);if(!c&&ns.WillChange){const u=new ns.WillChange("auto");i.addValue("willChange",u),u.add(a)}}function wm(i){return i.replace(/([A-Z])/g,a=>`-${a.toLowerCase()}`)}const JC="framerAppearId",ab="data-"+wm(JC);function rb(i){return i.props[ab]}function $C({protectedKeys:i,needsAnimating:a},c){const u=i.hasOwnProperty(c)&&a[c]!==!0;return a[c]=!1,u}function ob(i,a,{delay:c=0,transitionOverride:u,type:m}={}){let{transition:y,transitionEnd:g,...T}=a;const C=i.getDefaultTransition();y=y?ib(y,C):C;const A=y?.reduceMotion;u&&(y=u);const w=[],x=m&&i.animationState&&i.animationState.getState()[m];for(const M in T){const D=i.getValue(M,i.latestValues[M]??null),B=T[M];if(B===void 0||x&&$C(x,M))continue;const X={delay:c,...Tm(y||{},M)},H=D.get();if(H!==void 0&&!D.isAnimating&&!Array.isArray(B)&&B===H&&!X.velocity)continue;let F=!1;if(window.MotionHandoffAnimation){const re=rb(i);if(re){const ae=window.MotionHandoffAnimation(re,M,et);ae!==null&&(X.startTime=ae,F=!0)}}Dd(i,M);const W=A??i.shouldReduceMotion;D.start(Am(M,D,B,W&&sb.has(M)?{type:!1}:X,i,F));const Y=D.animation;Y&&w.push(Y)}if(g){const M=()=>et.update(()=>{g&&WC(i,g)});w.length?Promise.all(w).then(M):M()}return w}function Ld(i,a,c={}){const u=Yr(i,a,c.type==="exit"?i.presenceContext?.custom:void 0);let{transition:m=i.getDefaultTransition()||{}}=u||{};c.transitionOverride&&(m=c.transitionOverride);const y=u?()=>Promise.all(ob(i,u,c)):()=>Promise.resolve(),g=i.variantChildren&&i.variantChildren.size?(C=0)=>{const{delayChildren:A=0,staggerChildren:w,staggerDirection:x}=m;return ew(i,a,C,A,w,x,c)}:()=>Promise.resolve(),{when:T}=m;if(T){const[C,A]=T==="beforeChildren"?[y,g]:[g,y];return C().then(()=>A())}else return Promise.all([y(),g(c.delay)])}function ew(i,a,c=0,u=0,m=0,y=1,g){const T=[];for(const C of i.variantChildren)C.notify("AnimationStart",a),T.push(Ld(C,a,{...g,delay:c+(typeof u=="function"?0:u)+tb(i.variantChildren,C,u,m,y)}).then(()=>C.notify("AnimationComplete",a)));return Promise.all(T)}function tw(i,a,c={}){i.notify("AnimationStart",a);let u;if(Array.isArray(a)){const m=a.map(y=>Ld(i,y,c));u=Promise.all(m)}else if(typeof a=="string")u=Ld(i,a,c);else{const m=typeof a=="function"?Yr(i,a,c.custom):a;u=Promise.all(ob(i,m,c))}return u.then(()=>{i.notify("AnimationComplete",a)})}const nw={test:i=>i==="auto",parse:i=>i},lb=i=>a=>a.test(i),cb=[Qr,ge,Ai,Ys,NA,_A,nw],Yy=i=>cb.find(lb(i));function iw(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||Tv(i):!0}const sw=new Set(["brightness","contrast","saturate","opacity"]);function aw(i){const[a,c]=i.slice(0,-1).split("(");if(a==="drop-shadow")return i;const[u]=c.match(dm)||[];if(!u)return i;const m=c.replace(u,"");let y=sw.has(a)?1:0;return u!==c&&(y*=100),a+"("+y+m+")"}const rw=/\b([a-z-]*)\(.*?\)/gu,kd={...ti,getAnimatableNone:i=>{const a=i.match(rw);return a?a.map(aw).join(" "):i}},Ud={...ti,getAnimatableNone:i=>{const a=ti.parse(i);return ti.createTransformer(i)(a.map(u=>typeof u=="number"?0:typeof u=="object"?{...u,alpha:1}:u))}},Ky={...Qr,transform:Math.round},ow={rotate:Ys,rotateX:Ys,rotateY:Ys,rotateZ:Ys,scale:Ou,scaleX:Ou,scaleY:Ou,scaleZ:Ou,skew:Ys,skewX:Ys,skewY:Ys,distance:ge,translateX:ge,translateY:ge,translateZ:ge,x:ge,y:ge,z:ge,perspective:ge,transformPerspective:ge,opacity:Bl,originX:Dy,originY:Dy,originZ:ge},Rm={borderWidth:ge,borderTopWidth:ge,borderRightWidth:ge,borderBottomWidth:ge,borderLeftWidth:ge,borderRadius:ge,borderTopLeftRadius:ge,borderTopRightRadius:ge,borderBottomRightRadius:ge,borderBottomLeftRadius:ge,width:ge,maxWidth:ge,height:ge,maxHeight:ge,top:ge,right:ge,bottom:ge,left:ge,inset:ge,insetBlock:ge,insetBlockStart:ge,insetBlockEnd:ge,insetInline:ge,insetInlineStart:ge,insetInlineEnd:ge,padding:ge,paddingTop:ge,paddingRight:ge,paddingBottom:ge,paddingLeft:ge,paddingBlock:ge,paddingBlockStart:ge,paddingBlockEnd:ge,paddingInline:ge,paddingInlineStart:ge,paddingInlineEnd:ge,margin:ge,marginTop:ge,marginRight:ge,marginBottom:ge,marginLeft:ge,marginBlock:ge,marginBlockStart:ge,marginBlockEnd:ge,marginInline:ge,marginInlineStart:ge,marginInlineEnd:ge,fontSize:ge,backgroundPositionX:ge,backgroundPositionY:ge,...ow,zIndex:Ky,fillOpacity:Bl,strokeOpacity:Bl,numOctaves:Ky},lw={...Rm,color:wt,backgroundColor:wt,outlineColor:wt,fill:wt,stroke:wt,borderColor:wt,borderTopColor:wt,borderRightColor:wt,borderBottomColor:wt,borderLeftColor:wt,filter:kd,WebkitFilter:kd,mask:Ud,WebkitMask:Ud},ub=i=>lw[i],cw=new Set([kd,Ud]);function fb(i,a){let c=ub(i);return cw.has(c)||(c=ti),c.getAnimatableNone?c.getAnimatableNone(a):void 0}const uw=new Set(["auto","none","0"]);function fw(i,a,c){let u=0,m;for(;u<i.length&&!m;){const y=i[u];typeof y=="string"&&!uw.has(y)&&Pl(y).values.length&&(m=i[u]),u++}if(m&&c)for(const y of a)i[y]=fb(c,m)}class hw extends Sm{constructor(a,c,u,m,y){super(a,c,u,m,y,!0)}readKeyframes(){const{unresolvedKeyframes:a,element:c,name:u}=this;if(!c||!c.current)return;super.readKeyframes();for(let w=0;w<a.length;w++){let x=a[w];if(typeof x=="string"&&(x=x.trim(),hm(x))){const M=nb(x,c.current);M!==void 0&&(a[w]=M),w===a.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!sb.has(u)||a.length!==2)return;const[m,y]=a,g=Yy(m),T=Yy(y),C=Ny(m),A=Ny(y);if(C!==A&&Ks[u]){this.needsMeasurement=!0;return}if(g!==T)if(zy(g)&&zy(T))for(let w=0;w<a.length;w++){const x=a[w];typeof x=="string"&&(a[w]=parseFloat(x))}else Ks[u]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:a,name:c}=this,u=[];for(let m=0;m<a.length;m++)(a[m]===null||iw(a[m]))&&u.push(m);u.length&&fw(a,u,c)}measureInitialState(){const{element:a,unresolvedKeyframes:c,name:u}=this;if(!a||!a.current)return;u==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ks[u](a.measureViewportBox(),window.getComputedStyle(a.current)),c[0]=this.measuredOrigin;const m=c[c.length-1];m!==void 0&&a.getValue(u,m).jump(m,!1)}measureEndState(){const{element:a,name:c,unresolvedKeyframes:u}=this;if(!a||!a.current)return;const m=a.getValue(c);m&&m.jump(this.measuredOrigin,!1);const y=u.length-1,g=u[y];u[y]=Ks[c](a.measureViewportBox(),window.getComputedStyle(a.current)),g!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=g),this.removedTransforms?.length&&this.removedTransforms.forEach(([T,C])=>{a.getValue(T).set(C)}),this.resolveNoneKeyframes()}}const dw=new Set(["opacity","clipPath","filter","transform"]);function hb(i,a,c){if(i==null)return[];if(i instanceof EventTarget)return[i];if(typeof i=="string"){let u=document;const m=c?.[i]??u.querySelectorAll(i);return m?Array.from(m):[]}return Array.from(i).filter(u=>u!=null)}const db=(i,a)=>a&&typeof i=="number"?a.transform(i):i;function jd(i){return Sv(i)&&"offsetHeight"in i}const{schedule:Em}=kv(queueMicrotask,!1),$n={x:!1,y:!1};function mb(){return $n.x||$n.y}function mw(i){return i==="x"||i==="y"?$n[i]?null:($n[i]=!0,()=>{$n[i]=!1}):$n.x||$n.y?null:($n.x=$n.y=!0,()=>{$n.x=$n.y=!1})}function pb(i,a){const c=hb(i),u=new AbortController,m={passive:!0,...a,signal:u.signal};return[c,m,()=>u.abort()]}function pw(i){return!(i.pointerType==="touch"||mb())}function gw(i,a,c={}){const[u,m,y]=pb(i,c);return u.forEach(g=>{let T=!1,C=!1,A;const w=()=>{g.removeEventListener("pointerleave",B)},x=H=>{A&&(A(H),A=void 0),w()},M=H=>{T=!1,window.removeEventListener("pointerup",M),window.removeEventListener("pointercancel",M),C&&(C=!1,x(H))},D=()=>{T=!0,window.addEventListener("pointerup",M,m),window.addEventListener("pointercancel",M,m)},B=H=>{if(H.pointerType!=="touch"){if(T){C=!0;return}x(H)}},X=H=>{if(!pw(H))return;C=!1;const F=a(g,H);typeof F=="function"&&(A=F,g.addEventListener("pointerleave",B,m))};g.addEventListener("pointerenter",X,m),g.addEventListener("pointerdown",D,m)}),y}const gb=(i,a)=>a?i===a?!0:gb(i,a.parentElement):!1,xm=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,yw=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vw(i){return yw.has(i.tagName)||i.isContentEditable===!0}const bw=new Set(["INPUT","SELECT","TEXTAREA"]);function Sw(i){return bw.has(i.tagName)||i.isContentEditable===!0}const Uu=new WeakSet;function Xy(i){return a=>{a.key==="Enter"&&i(a)}}function rd(i,a){i.dispatchEvent(new PointerEvent("pointer"+a,{isPrimary:!0,bubbles:!0}))}const Tw=(i,a)=>{const c=i.currentTarget;if(!c)return;const u=Xy(()=>{if(Uu.has(c))return;rd(c,"down");const m=Xy(()=>{rd(c,"up")}),y=()=>rd(c,"cancel");c.addEventListener("keyup",m,a),c.addEventListener("blur",y,a)});c.addEventListener("keydown",u,a),c.addEventListener("blur",()=>c.removeEventListener("keydown",u),a)};function Qy(i){return xm(i)&&!mb()}const Fy=new WeakSet;function Aw(i,a,c={}){const[u,m,y]=pb(i,c),g=T=>{const C=T.currentTarget;if(!Qy(T)||Fy.has(T))return;Uu.add(C),c.stopPropagation&&Fy.add(T);const A=a(C,T),w=(D,B)=>{window.removeEventListener("pointerup",x),window.removeEventListener("pointercancel",M),Uu.has(C)&&Uu.delete(C),Qy(D)&&typeof A=="function"&&A(D,{success:B})},x=D=>{w(D,C===window||C===document||c.useGlobalTarget||gb(C,D.target))},M=D=>{w(D,!1)};window.addEventListener("pointerup",x,m),window.addEventListener("pointercancel",M,m)};return u.forEach(T=>{(c.useGlobalTarget?window:T).addEventListener("pointerdown",g,m),jd(T)&&(T.addEventListener("focus",A=>Tw(A,m)),!vw(T)&&!T.hasAttribute("tabindex")&&(T.tabIndex=0))}),y}function Om(i){return Sv(i)&&"ownerSVGElement"in i}const ju=new WeakMap;let Bu;const yb=(i,a,c)=>(u,m)=>m&&m[0]?m[0][i+"Size"]:Om(u)&&"getBBox"in u?u.getBBox()[a]:u[c],Cw=yb("inline","width","offsetWidth"),ww=yb("block","height","offsetHeight");function Rw({target:i,borderBoxSize:a}){ju.get(i)?.forEach(c=>{c(i,{get width(){return Cw(i,a)},get height(){return ww(i,a)}})})}function Ew(i){i.forEach(Rw)}function xw(){typeof ResizeObserver>"u"||(Bu=new ResizeObserver(Ew))}function Ow(i,a){Bu||xw();const c=hb(i);return c.forEach(u=>{let m=ju.get(u);m||(m=new Set,ju.set(u,m)),m.add(a),Bu?.observe(u)}),()=>{c.forEach(u=>{const m=ju.get(u);m?.delete(a),m?.size||Bu?.unobserve(u)})}}const Pu=new Set;let Gr;function Mw(){Gr=()=>{const i={get width(){return window.innerWidth},get height(){return window.innerHeight}};Pu.forEach(a=>a(i))},window.addEventListener("resize",Gr)}function _w(i){return Pu.add(i),Gr||Mw(),()=>{Pu.delete(i),!Pu.size&&typeof Gr=="function"&&(window.removeEventListener("resize",Gr),Gr=void 0)}}function Wy(i,a){return typeof i=="function"?_w(i):Ow(i,a)}function Nw(i){return Om(i)&&i.tagName==="svg"}const Dw=[...cb,wt,ti],Lw=i=>Dw.find(lb(i)),Zy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hr=()=>({x:Zy(),y:Zy()}),Jy=()=>({min:0,max:0}),Mt=()=>({x:Jy(),y:Jy()}),kw=new WeakMap;function nf(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function Vl(i){return typeof i=="string"||Array.isArray(i)}const Mm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_m=["initial",...Mm];function sf(i){return nf(i.animate)||_m.some(a=>Vl(i[a]))}function vb(i){return!!(sf(i)||i.variants)}function Uw(i,a,c){for(const u in a){const m=a[u],y=c[u];if(Ft(m))i.addValue(u,m);else if(Ft(y))i.addValue(u,Kr(m,{owner:i}));else if(y!==m)if(i.hasValue(u)){const g=i.getValue(u);g.liveStyle===!0?g.jump(m):g.hasAnimated||g.set(m)}else{const g=i.getStaticValue(u);i.addValue(u,Kr(g!==void 0?g:m,{owner:i}))}}for(const u in c)a[u]===void 0&&i.removeValue(u);return a}const Bd={current:null},bb={current:!1},jw=typeof window<"u";function Bw(){if(bb.current=!0,!!jw)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),a=()=>Bd.current=i.matches;i.addEventListener("change",a),a()}else Bd.current=!1}const $y=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Qu={};function Sb(i){Qu=i}function Pw(){return Qu}class Vw{scrapeMotionValuesFromProps(a,c,u){return{}}constructor({parent:a,props:c,presenceContext:u,reducedMotionConfig:m,skipAnimations:y,blockInitialAnimation:g,visualState:T},C={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Sm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const D=nn.now();this.renderScheduledAt<D&&(this.renderScheduledAt=D,et.render(this.render,!1,!0))};const{latestValues:A,renderState:w}=T;this.latestValues=A,this.baseTarget={...A},this.initialValues=c.initial?{...A}:{},this.renderState=w,this.parent=a,this.props=c,this.presenceContext=u,this.depth=a?a.depth+1:0,this.reducedMotionConfig=m,this.skipAnimationsConfig=y,this.options=C,this.blockInitialAnimation=!!g,this.isControllingVariants=sf(c),this.isVariantNode=vb(c),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(a&&a.current);const{willChange:x,...M}=this.scrapeMotionValuesFromProps(c,{},this);for(const D in M){const B=M[D];A[D]!==void 0&&Ft(B)&&B.set(A[D])}}mount(a){if(this.hasBeenMounted)for(const c in this.initialValues)this.values.get(c)?.jump(this.initialValues[c]),this.latestValues[c]=this.initialValues[c];this.current=a,kw.set(a,this),this.projection&&!this.projection.instance&&this.projection.mount(a),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((c,u)=>this.bindToMotionValue(u,c)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(bb.current||Bw(),this.shouldReduceMotion=Bd.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),Qs(this.notifyUpdate),Qs(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const c=this.features[a];c&&(c.unmount(),c.isMounted=!1)}this.current=null}addChild(a){this.children.add(a),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(a)}removeChild(a){this.children.delete(a),this.enteringChildren&&this.enteringChildren.delete(a)}bindToMotionValue(a,c){if(this.valueSubscriptions.has(a)&&this.valueSubscriptions.get(a)(),c.accelerate&&dw.has(a)&&this.current instanceof HTMLElement){const{factory:g,keyframes:T,times:C,ease:A,duration:w}=c.accelerate,x=new $v({element:this.current,name:a,keyframes:T,times:C,ease:A,duration:ei(w)}),M=g(x);this.valueSubscriptions.set(a,()=>{M(),x.cancel()});return}const u=Wr.has(a);u&&this.onBindTransform&&this.onBindTransform();const m=c.on("change",g=>{this.latestValues[a]=g,this.props.onUpdate&&et.preRender(this.notifyUpdate),u&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let y;typeof window<"u"&&window.MotionCheckAppearSync&&(y=window.MotionCheckAppearSync(this,a,c)),this.valueSubscriptions.set(a,()=>{m(),y&&y(),c.owner&&c.stop()})}sortNodePosition(a){return!this.current||!this.sortInstanceNodePosition||this.type!==a.type?0:this.sortInstanceNodePosition(this.current,a.current)}updateFeatures(){let a="animation";for(a in Qu){const c=Qu[a];if(!c)continue;const{isEnabled:u,Feature:m}=c;if(!this.features[a]&&m&&u(this.props)&&(this.features[a]=new m(this)),this.features[a]){const y=this.features[a];y.isMounted?y.update():(y.mount(),y.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mt()}getStaticValue(a){return this.latestValues[a]}setStaticValue(a,c){this.latestValues[a]=c}update(a,c){(a.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=a,this.prevPresenceContext=this.presenceContext,this.presenceContext=c;for(let u=0;u<$y.length;u++){const m=$y[u];this.propEventSubscriptions[m]&&(this.propEventSubscriptions[m](),delete this.propEventSubscriptions[m]);const y="on"+m,g=a[y];g&&(this.propEventSubscriptions[m]=this.on(m,g))}this.prevMotionValues=Uw(this,this.scrapeMotionValuesFromProps(a,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(a){return this.props.variants?this.props.variants[a]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(a){const c=this.getClosestVariantNode();if(c)return c.variantChildren&&c.variantChildren.add(a),()=>c.variantChildren.delete(a)}addValue(a,c){const u=this.values.get(a);c!==u&&(u&&this.removeValue(a),this.bindToMotionValue(a,c),this.values.set(a,c),this.latestValues[a]=c.get())}removeValue(a){this.values.delete(a);const c=this.valueSubscriptions.get(a);c&&(c(),this.valueSubscriptions.delete(a)),delete this.latestValues[a],this.removeValueFromRenderState(a,this.renderState)}hasValue(a){return this.values.has(a)}getValue(a,c){if(this.props.values&&this.props.values[a])return this.props.values[a];let u=this.values.get(a);return u===void 0&&c!==void 0&&(u=Kr(c===null?void 0:c,{owner:this}),this.addValue(a,u)),u}readValue(a,c){let u=this.latestValues[a]!==void 0||!this.current?this.latestValues[a]:this.getBaseTargetFromProps(this.props,a)??this.readValueFromInstance(this.current,a,this.options);return u!=null&&(typeof u=="string"&&(bv(u)||Tv(u))?u=parseFloat(u):!Lw(u)&&ti.test(c)&&(u=fb(a,c)),this.setBaseTarget(a,Ft(u)?u.get():u)),Ft(u)?u.get():u}setBaseTarget(a,c){this.baseTarget[a]=c}getBaseTarget(a){const{initial:c}=this.props;let u;if(typeof c=="string"||typeof c=="object"){const y=Cm(this.props,c,this.presenceContext?.custom);y&&(u=y[a])}if(c&&u!==void 0)return u;const m=this.getBaseTargetFromProps(this.props,a);return m!==void 0&&!Ft(m)?m:this.initialValues[a]!==void 0&&u===void 0?void 0:this.baseTarget[a]}on(a,c){return this.events[a]||(this.events[a]=new cm),this.events[a].add(c)}notify(a,...c){this.events[a]&&this.events[a].notify(...c)}scheduleRenderMicrotask(){Em.render(this.render)}}class Tb extends Vw{constructor(){super(...arguments),this.KeyframeResolver=hw}sortInstanceNodePosition(a,c){return a.compareDocumentPosition(c)&2?1:-1}getBaseTargetFromProps(a,c){const u=a.style;return u?u[c]:void 0}removeValueFromRenderState(a,{vars:c,style:u}){delete c[a],delete u[a]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:a}=this.props;Ft(a)&&(this.childSubscription=a.on("change",c=>{this.current&&(this.current.textContent=`${c}`)}))}}class Fs{constructor(a){this.isMounted=!1,this.node=a}update(){}}function Ab({top:i,left:a,right:c,bottom:u}){return{x:{min:a,max:c},y:{min:i,max:u}}}function zw({x:i,y:a}){return{top:a.min,right:i.max,bottom:a.max,left:i.min}}function Gw(i,a){if(!a)return i;const c=a({x:i.left,y:i.top}),u=a({x:i.right,y:i.bottom});return{top:c.y,left:c.x,bottom:u.y,right:u.x}}function od(i){return i===void 0||i===1}function Pd({scale:i,scaleX:a,scaleY:c}){return!od(i)||!od(a)||!od(c)}function Ua(i){return Pd(i)||Cb(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function Cb(i){return e0(i.x)||e0(i.y)}function e0(i){return i&&i!=="0%"}function Fu(i,a,c){const u=i-c,m=a*u;return c+m}function t0(i,a,c,u,m){return m!==void 0&&(i=Fu(i,m,u)),Fu(i,c,u)+a}function Vd(i,a=0,c=1,u,m){i.min=t0(i.min,a,c,u,m),i.max=t0(i.max,a,c,u,m)}function wb(i,{x:a,y:c}){Vd(i.x,a.translate,a.scale,a.originPoint),Vd(i.y,c.translate,c.scale,c.originPoint)}const n0=.999999999999,i0=1.0000000000001;function Hw(i,a,c,u=!1){const m=c.length;if(!m)return;a.x=a.y=1;let y,g;for(let T=0;T<m;T++){y=c[T],g=y.projectionDelta;const{visualElement:C}=y.options;C&&C.props.style&&C.props.style.display==="contents"||(u&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Ir(i,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),g&&(a.x*=g.x.scale,a.y*=g.y.scale,wb(i,g)),u&&Ua(y.latestValues)&&Ir(i,y.latestValues))}a.x<i0&&a.x>n0&&(a.x=1),a.y<i0&&a.y>n0&&(a.y=1)}function qr(i,a){i.min=i.min+a,i.max=i.max+a}function s0(i,a,c,u,m=.5){const y=lt(i.min,i.max,m);Vd(i,a,c,y,u)}function Ir(i,a){s0(i.x,a.x,a.scaleX,a.scale,a.originX),s0(i.y,a.y,a.scaleY,a.scale,a.originY)}function Rb(i,a){return Ab(Gw(i.getBoundingClientRect(),a))}function qw(i,a,c){const u=Rb(i,c),{scroll:m}=a;return m&&(qr(u.x,m.offset.x),qr(u.y,m.offset.y)),u}const Iw={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Yw=Fr.length;function Kw(i,a,c){let u="",m=!0;for(let y=0;y<Yw;y++){const g=Fr[y],T=i[g];if(T===void 0)continue;let C=!0;if(typeof T=="number")C=T===(g.startsWith("scale")?1:0);else{const A=parseFloat(T);C=g.startsWith("scale")?A===1:A===0}if(!C||c){const A=db(T,Rm[g]);if(!C){m=!1;const w=Iw[g]||g;u+=`${w}(${A}) `}c&&(a[g]=A)}}return u=u.trim(),c?u=c(a,m?"":u):m&&(u="none"),u}function Nm(i,a,c){const{style:u,vars:m,transformOrigin:y}=i;let g=!1,T=!1;for(const C in a){const A=a[C];if(Wr.has(C)){g=!0;continue}else if(jv(C)){m[C]=A;continue}else{const w=db(A,Rm[C]);C.startsWith("origin")?(T=!0,y[C]=w):u[C]=w}}if(a.transform||(g||c?u.transform=Kw(a,i.transform,c):u.transform&&(u.transform="none")),T){const{originX:C="50%",originY:A="50%",originZ:w=0}=y;u.transformOrigin=`${C} ${A} ${w}`}}function Eb(i,{style:a,vars:c},u,m){const y=i.style;let g;for(g in a)y[g]=a[g];m?.applyProjectionStyles(y,u);for(g in c)y.setProperty(g,c[g])}function a0(i,a){return a.max===a.min?0:i/(a.max-a.min)*100}const El={correct:(i,a)=>{if(!a.target)return i;if(typeof i=="string")if(ge.test(i))i=parseFloat(i);else return i;const c=a0(i,a.target.x),u=a0(i,a.target.y);return`${c}% ${u}%`}},Xw={correct:(i,{treeScale:a,projectionDelta:c})=>{const u=i,m=ti.parse(i);if(m.length>5)return u;const y=ti.createTransformer(i),g=typeof m[0]!="number"?1:0,T=c.x.scale*a.x,C=c.y.scale*a.y;m[0+g]/=T,m[1+g]/=C;const A=lt(T,C,.5);return typeof m[2+g]=="number"&&(m[2+g]/=A),typeof m[3+g]=="number"&&(m[3+g]/=A),y(m)}},zd={borderRadius:{...El,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:El,borderTopRightRadius:El,borderBottomLeftRadius:El,borderBottomRightRadius:El,boxShadow:Xw};function xb(i,{layout:a,layoutId:c}){return Wr.has(i)||i.startsWith("origin")||(a||c!==void 0)&&(!!zd[i]||i==="opacity")}function Dm(i,a,c){const u=i.style,m=a?.style,y={};if(!u)return y;for(const g in u)(Ft(u[g])||m&&Ft(m[g])||xb(g,i)||c?.getValue(g)?.liveStyle!==void 0)&&(y[g]=u[g]);return y}function Qw(i){return window.getComputedStyle(i)}class Fw extends Tb{constructor(){super(...arguments),this.type="html",this.renderInstance=Eb}readValueFromInstance(a,c){if(Wr.has(c))return this.projection?.isProjecting?Rd(c):mC(a,c);{const u=Qw(a),m=(jv(c)?u.getPropertyValue(c):u[c])||0;return typeof m=="string"?m.trim():m}}measureInstanceViewportBox(a,{transformPagePoint:c}){return Rb(a,c)}build(a,c,u){Nm(a,c,u.transformTemplate)}scrapeMotionValuesFromProps(a,c,u){return Dm(a,c,u)}}const Ww={offset:"stroke-dashoffset",array:"stroke-dasharray"},Zw={offset:"strokeDashoffset",array:"strokeDasharray"};function Jw(i,a,c=1,u=0,m=!0){i.pathLength=1;const y=m?Ww:Zw;i[y.offset]=`${-u}`,i[y.array]=`${a} ${c}`}const $w=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Ob(i,{attrX:a,attrY:c,attrScale:u,pathLength:m,pathSpacing:y=1,pathOffset:g=0,...T},C,A,w){if(Nm(i,T,A),C){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:x,style:M}=i;x.transform&&(M.transform=x.transform,delete x.transform),(M.transform||x.transformOrigin)&&(M.transformOrigin=x.transformOrigin??"50% 50%",delete x.transformOrigin),M.transform&&(M.transformBox=w?.transformBox??"fill-box",delete x.transformBox);for(const D of $w)x[D]!==void 0&&(M[D]=x[D],delete x[D]);a!==void 0&&(x.x=a),c!==void 0&&(x.y=c),u!==void 0&&(x.scale=u),m!==void 0&&Jw(x,m,y,g,!1)}const Mb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),_b=i=>typeof i=="string"&&i.toLowerCase()==="svg";function eR(i,a,c,u){Eb(i,a,void 0,u);for(const m in a.attrs)i.setAttribute(Mb.has(m)?m:wm(m),a.attrs[m])}function Nb(i,a,c){const u=Dm(i,a,c);for(const m in i)if(Ft(i[m])||Ft(a[m])){const y=Fr.indexOf(m)!==-1?"attr"+m.charAt(0).toUpperCase()+m.substring(1):m;u[y]=i[m]}return u}class tR extends Tb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mt}getBaseTargetFromProps(a,c){return a[c]}readValueFromInstance(a,c){if(Wr.has(c)){const u=ub(c);return u&&u.default||0}return c=Mb.has(c)?c:wm(c),a.getAttribute(c)}scrapeMotionValuesFromProps(a,c,u){return Nb(a,c,u)}build(a,c,u){Ob(a,c,this.isSVGTag,u.transformTemplate,u.style)}renderInstance(a,c,u,m){eR(a,c,u,m)}mount(a){this.isSVGTag=_b(a.tagName),super.mount(a)}}const nR=_m.length;function Db(i){if(!i)return;if(!i.isControllingVariants){const c=i.parent?Db(i.parent)||{}:{};return i.props.initial!==void 0&&(c.initial=i.props.initial),c}const a={};for(let c=0;c<nR;c++){const u=_m[c],m=i.props[u];(Vl(m)||m===!1)&&(a[u]=m)}return a}function Lb(i,a){if(!Array.isArray(a))return!1;const c=a.length;if(c!==i.length)return!1;for(let u=0;u<c;u++)if(a[u]!==i[u])return!1;return!0}const iR=[...Mm].reverse(),sR=Mm.length;function aR(i){return a=>Promise.all(a.map(({animation:c,options:u})=>tw(i,c,u)))}function rR(i){let a=aR(i),c=r0(),u=!0;const m=C=>(A,w)=>{const x=Yr(i,w,C==="exit"?i.presenceContext?.custom:void 0);if(x){const{transition:M,transitionEnd:D,...B}=x;A={...A,...B,...D}}return A};function y(C){a=C(i)}function g(C){const{props:A}=i,w=Db(i.parent)||{},x=[],M=new Set;let D={},B=1/0;for(let H=0;H<sR;H++){const F=iR[H],W=c[F],Y=A[F]!==void 0?A[F]:w[F],re=Vl(Y),ae=F===C?W.isActive:null;ae===!1&&(B=H);let G=Y===w[F]&&Y!==A[F]&&re;if(G&&u&&i.manuallyAnimateOnMount&&(G=!1),W.protectedKeys={...D},!W.isActive&&ae===null||!Y&&!W.prevProp||nf(Y)||typeof Y=="boolean")continue;if(F==="exit"&&W.isActive&&ae!==!0){W.prevResolvedValues&&(D={...D,...W.prevResolvedValues});continue}const me=oR(W.prevProp,Y);let ce=me||F===C&&W.isActive&&!G&&re||H>B&&re,be=!1;const Pe=Array.isArray(Y)?Y:[Y];let He=Pe.reduce(m(F),{});ae===!1&&(He={});const{prevResolvedValues:ut={}}=W,S={...ut,...He},_t=se=>{ce=!0,M.has(se)&&(be=!0,M.delete(se)),W.needsAnimating[se]=!0;const ye=i.getValue(se);ye&&(ye.liveStyle=!1)};for(const se in S){const ye=He[se],ue=ut[se];if(D.hasOwnProperty(se))continue;let Oe=!1;Nd(ye)&&Nd(ue)?Oe=!Lb(ye,ue):Oe=ye!==ue,Oe?ye!=null?_t(se):M.add(se):ye!==void 0&&M.has(se)?_t(se):W.protectedKeys[se]=!0}W.prevProp=Y,W.prevResolvedValues=He,W.isActive&&(D={...D,...He}),u&&i.blockInitialAnimation&&(ce=!1);const kt=G&&me;ce&&(!kt||be)&&x.push(...Pe.map(se=>{const ye={type:F};if(typeof se=="string"&&u&&!kt&&i.manuallyAnimateOnMount&&i.parent){const{parent:ue}=i,Oe=Yr(ue,se);if(ue.enteringChildren&&Oe){const{delayChildren:U}=Oe.transition||{};ye.delay=tb(ue.enteringChildren,i,U)}}return{animation:se,options:ye}}))}if(M.size){const H={};if(typeof A.initial!="boolean"){const F=Yr(i,Array.isArray(A.initial)?A.initial[0]:A.initial);F&&F.transition&&(H.transition=F.transition)}M.forEach(F=>{const W=i.getBaseTarget(F),Y=i.getValue(F);Y&&(Y.liveStyle=!0),H[F]=W??null}),x.push({animation:H})}let X=!!x.length;return u&&(A.initial===!1||A.initial===A.animate)&&!i.manuallyAnimateOnMount&&(X=!1),u=!1,X?a(x):Promise.resolve()}function T(C,A){if(c[C].isActive===A)return Promise.resolve();i.variantChildren?.forEach(x=>x.animationState?.setActive(C,A)),c[C].isActive=A;const w=g(C);for(const x in c)c[x].protectedKeys={};return w}return{animateChanges:g,setActive:T,setAnimateFunction:y,getState:()=>c,reset:()=>{c=r0()}}}function oR(i,a){return typeof a=="string"?a!==i:Array.isArray(a)?!Lb(a,i):!1}function ka(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function r0(){return{animate:ka(!0),whileInView:ka(),whileHover:ka(),whileTap:ka(),whileDrag:ka(),whileFocus:ka(),exit:ka()}}function o0(i,a){i.min=a.min,i.max=a.max}function Jn(i,a){o0(i.x,a.x),o0(i.y,a.y)}function l0(i,a){i.translate=a.translate,i.scale=a.scale,i.originPoint=a.originPoint,i.origin=a.origin}const kb=1e-4,lR=1-kb,cR=1+kb,Ub=.01,uR=0-Ub,fR=0+Ub;function sn(i){return i.max-i.min}function hR(i,a,c){return Math.abs(i-a)<=c}function c0(i,a,c,u=.5){i.origin=u,i.originPoint=lt(a.min,a.max,i.origin),i.scale=sn(c)/sn(a),i.translate=lt(c.min,c.max,i.origin)-i.originPoint,(i.scale>=lR&&i.scale<=cR||isNaN(i.scale))&&(i.scale=1),(i.translate>=uR&&i.translate<=fR||isNaN(i.translate))&&(i.translate=0)}function Ll(i,a,c,u){c0(i.x,a.x,c.x,u?u.originX:void 0),c0(i.y,a.y,c.y,u?u.originY:void 0)}function u0(i,a,c){i.min=c.min+a.min,i.max=i.min+sn(a)}function dR(i,a,c){u0(i.x,a.x,c.x),u0(i.y,a.y,c.y)}function f0(i,a,c){i.min=a.min-c.min,i.max=i.min+sn(a)}function Wu(i,a,c){f0(i.x,a.x,c.x),f0(i.y,a.y,c.y)}function h0(i,a,c,u,m){return i-=a,i=Fu(i,1/c,u),m!==void 0&&(i=Fu(i,1/m,u)),i}function mR(i,a=0,c=1,u=.5,m,y=i,g=i){if(Ai.test(a)&&(a=parseFloat(a),a=lt(g.min,g.max,a/100)-g.min),typeof a!="number")return;let T=lt(y.min,y.max,u);i===y&&(T-=a),i.min=h0(i.min,a,c,T,m),i.max=h0(i.max,a,c,T,m)}function d0(i,a,[c,u,m],y,g){mR(i,a[c],a[u],a[m],a.scale,y,g)}const pR=["x","scaleX","originX"],gR=["y","scaleY","originY"];function m0(i,a,c,u){d0(i.x,a,pR,c?c.x:void 0,u?u.x:void 0),d0(i.y,a,gR,c?c.y:void 0,u?u.y:void 0)}function p0(i){return i.translate===0&&i.scale===1}function jb(i){return p0(i.x)&&p0(i.y)}function g0(i,a){return i.min===a.min&&i.max===a.max}function yR(i,a){return g0(i.x,a.x)&&g0(i.y,a.y)}function y0(i,a){return Math.round(i.min)===Math.round(a.min)&&Math.round(i.max)===Math.round(a.max)}function Bb(i,a){return y0(i.x,a.x)&&y0(i.y,a.y)}function v0(i){return sn(i.x)/sn(i.y)}function b0(i,a){return i.translate===a.translate&&i.scale===a.scale&&i.originPoint===a.originPoint}function Ti(i){return[i("x"),i("y")]}function vR(i,a,c){let u="";const m=i.x.translate/a.x,y=i.y.translate/a.y,g=c?.z||0;if((m||y||g)&&(u=`translate3d(${m}px, ${y}px, ${g}px) `),(a.x!==1||a.y!==1)&&(u+=`scale(${1/a.x}, ${1/a.y}) `),c){const{transformPerspective:A,rotate:w,rotateX:x,rotateY:M,skewX:D,skewY:B}=c;A&&(u=`perspective(${A}px) ${u}`),w&&(u+=`rotate(${w}deg) `),x&&(u+=`rotateX(${x}deg) `),M&&(u+=`rotateY(${M}deg) `),D&&(u+=`skewX(${D}deg) `),B&&(u+=`skewY(${B}deg) `)}const T=i.x.scale*a.x,C=i.y.scale*a.y;return(T!==1||C!==1)&&(u+=`scale(${T}, ${C})`),u||"none"}const Pb=["TopLeft","TopRight","BottomLeft","BottomRight"],bR=Pb.length,S0=i=>typeof i=="string"?parseFloat(i):i,T0=i=>typeof i=="number"||ge.test(i);function SR(i,a,c,u,m,y){m?(i.opacity=lt(0,c.opacity??1,TR(u)),i.opacityExit=lt(a.opacity??1,0,AR(u))):y&&(i.opacity=lt(a.opacity??1,c.opacity??1,u));for(let g=0;g<bR;g++){const T=`border${Pb[g]}Radius`;let C=A0(a,T),A=A0(c,T);if(C===void 0&&A===void 0)continue;C||(C=0),A||(A=0),C===0||A===0||T0(C)===T0(A)?(i[T]=Math.max(lt(S0(C),S0(A),u),0),(Ai.test(A)||Ai.test(C))&&(i[T]+="%")):i[T]=A}(a.rotate||c.rotate)&&(i.rotate=lt(a.rotate||0,c.rotate||0,u))}function A0(i,a){return i[a]!==void 0?i[a]:i.borderRadius}const TR=Vb(0,.5,_v),AR=Vb(.5,.95,Vn);function Vb(i,a,c){return u=>u<i?0:u>a?1:c(jl(i,a,u))}function CR(i,a,c){const u=Ft(i)?i:Kr(i);return u.start(Am("",u,a,c)),u.animation}function zl(i,a,c,u={passive:!0}){return i.addEventListener(a,c,u),()=>i.removeEventListener(a,c)}const wR=(i,a)=>i.depth-a.depth;class RR{constructor(){this.children=[],this.isDirty=!1}add(a){om(this.children,a),this.isDirty=!0}remove(a){Iu(this.children,a),this.isDirty=!0}forEach(a){this.isDirty&&this.children.sort(wR),this.isDirty=!1,this.children.forEach(a)}}function ER(i,a){const c=nn.now(),u=({timestamp:m})=>{const y=m-c;y>=a&&(Qs(u),i(y-a))};return et.setup(u,!0),()=>Qs(u)}function Vu(i){return Ft(i)?i.get():i}class xR{constructor(){this.members=[]}add(a){om(this.members,a);for(let c=this.members.length-1;c>=0;c--){const u=this.members[c];if(u===a||u===this.lead||u===this.prevLead)continue;const m=u.instance;m&&m.isConnected===!1&&u.isPresent!==!1&&!u.snapshot&&Iu(this.members,u)}a.scheduleRender()}remove(a){if(Iu(this.members,a),a===this.prevLead&&(this.prevLead=void 0),a===this.lead){const c=this.members[this.members.length-1];c&&this.promote(c)}}relegate(a){const c=this.members.findIndex(m=>a===m);if(c===0)return!1;let u;for(let m=c;m>=0;m--){const y=this.members[m],g=y.instance;if(y.isPresent!==!1&&(!g||g.isConnected!==!1)){u=y;break}}return u?(this.promote(u),!0):!1}promote(a,c){const u=this.lead;if(a!==u&&(this.prevLead=u,this.lead=a,a.show(),u)){u.instance&&u.scheduleRender(),a.scheduleRender();const m=u.options.layoutDependency,y=a.options.layoutDependency;if(!(m!==void 0&&y!==void 0&&m===y)){const C=u.instance;C&&C.isConnected===!1&&!u.snapshot||(a.resumeFrom=u,c&&(a.resumeFrom.preserveOpacity=!0),u.snapshot&&(a.snapshot=u.snapshot,a.snapshot.latestValues=u.animationValues||u.latestValues),a.root&&a.root.isUpdating&&(a.isLayoutDirty=!0))}const{crossfade:T}=a.options;T===!1&&u.hide()}}exitAnimationComplete(){this.members.forEach(a=>{const{options:c,resumingFrom:u}=a;c.onExitComplete&&c.onExitComplete(),u&&u.options.onExitComplete&&u.options.onExitComplete()})}scheduleRender(){this.members.forEach(a=>{a.instance&&a.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const zu={hasAnimatedSinceResize:!0,hasEverUpdated:!1},ld=["","X","Y","Z"],OR=1e3;let MR=0;function cd(i,a,c,u){const{latestValues:m}=a;m[i]&&(c[i]=m[i],a.setStaticValue(i,0),u&&(u[i]=0))}function zb(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:a}=i.options;if(!a)return;const c=rb(a);if(window.MotionHasOptimisedAnimation(c,"transform")){const{layout:m,layoutId:y}=i.options;window.MotionCancelOptimisedAnimation(c,"transform",et,!(m||y))}const{parent:u}=i;u&&!u.hasCheckedOptimisedAppear&&zb(u)}function Gb({attachResizeListener:i,defaultParent:a,measureScroll:c,checkIsScrollRoot:u,resetTransform:m}){return class{constructor(g={},T=a?.()){this.id=MR++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(DR),this.nodes.forEach(jR),this.nodes.forEach(BR),this.nodes.forEach(LR)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=g,this.root=T?T.root||T:this,this.path=T?[...T.path,T]:[],this.parent=T,this.depth=T?T.depth+1:0;for(let C=0;C<this.path.length;C++)this.path[C].shouldResetTransform=!0;this.root===this&&(this.nodes=new RR)}addEventListener(g,T){return this.eventHandlers.has(g)||this.eventHandlers.set(g,new cm),this.eventHandlers.get(g).add(T)}notifyListeners(g,...T){const C=this.eventHandlers.get(g);C&&C.notify(...T)}hasListeners(g){return this.eventHandlers.has(g)}mount(g){if(this.instance)return;this.isSVG=Om(g)&&!Nw(g),this.instance=g;const{layoutId:T,layout:C,visualElement:A}=this.options;if(A&&!A.current&&A.mount(g),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(C||T)&&(this.isLayoutDirty=!0),i){let w,x=0;const M=()=>this.root.updateBlockedByResize=!1;et.read(()=>{x=window.innerWidth}),i(g,()=>{const D=window.innerWidth;D!==x&&(x=D,this.root.updateBlockedByResize=!0,w&&w(),w=ER(M,250),zu.hasAnimatedSinceResize&&(zu.hasAnimatedSinceResize=!1,this.nodes.forEach(R0)))})}T&&this.root.registerSharedNode(T,this),this.options.animate!==!1&&A&&(T||C)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:x,hasRelativeLayoutChanged:M,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const B=this.options.transition||A.getDefaultTransition()||HR,{onLayoutAnimationStart:X,onLayoutAnimationComplete:H}=A.getProps(),F=!this.targetLayout||!Bb(this.targetLayout,D),W=!x&&M;if(this.options.layoutRoot||this.resumeFrom||W||x&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Y={...Tm(B,"layout"),onPlay:X,onComplete:H};(A.shouldReduceMotion||this.options.layoutRoot)&&(Y.delay=0,Y.type=!1),this.startAnimation(Y),this.setAnimationOrigin(w,W)}else x||R0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const g=this.getStack();g&&g.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Qs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PR),this.animationId++)}getTransformTemplate(){const{visualElement:g}=this.options;return g&&g.getProps().transformTemplate}willUpdate(g=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&zb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let w=0;w<this.path.length;w++){const x=this.path[w];x.shouldResetTransform=!0,x.updateScroll("snapshot"),x.options.layoutRoot&&x.willUpdate(!1)}const{layoutId:T,layout:C}=this.options;if(T===void 0&&!C)return;const A=this.getTransformTemplate();this.prevTransformTemplateValue=A?A(this.latestValues,""):void 0,this.updateSnapshot(),g&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(C0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(w0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(UR),this.nodes.forEach(_R),this.nodes.forEach(NR)):this.nodes.forEach(w0),this.clearAllSnapshots();const T=nn.now();zt.delta=Ci(0,1e3/60,T-zt.timestamp),zt.timestamp=T,zt.isProcessing=!0,ed.update.process(zt),ed.preRender.process(zt),ed.render.process(zt),zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Em.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(kR),this.sharedNodes.forEach(VR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!sn(this.snapshot.measuredBox.x)&&!sn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let C=0;C<this.path.length;C++)this.path[C].updateScroll();const g=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:T}=this.options;T&&T.notify("LayoutMeasure",this.layout.layoutBox,g?g.layoutBox:void 0)}updateScroll(g="measure"){let T=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===g&&(T=!1),T&&this.instance){const C=u(this.instance);this.scroll={animationId:this.root.animationId,phase:g,isRoot:C,offset:c(this.instance),wasRoot:this.scroll?this.scroll.isRoot:C}}}resetTransform(){if(!m)return;const g=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,T=this.projectionDelta&&!jb(this.projectionDelta),C=this.getTransformTemplate(),A=C?C(this.latestValues,""):void 0,w=A!==this.prevTransformTemplateValue;g&&this.instance&&(T||Ua(this.latestValues)||w)&&(m(this.instance,A),this.shouldResetTransform=!1,this.scheduleRender())}measure(g=!0){const T=this.measurePageBox();let C=this.removeElementScroll(T);return g&&(C=this.removeTransform(C)),qR(C),{animationId:this.root.animationId,measuredBox:T,layoutBox:C,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:g}=this.options;if(!g)return Mt();const T=g.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(IR))){const{scroll:A}=this.root;A&&(qr(T.x,A.offset.x),qr(T.y,A.offset.y))}return T}removeElementScroll(g){const T=Mt();if(Jn(T,g),this.scroll?.wasRoot)return T;for(let C=0;C<this.path.length;C++){const A=this.path[C],{scroll:w,options:x}=A;A!==this.root&&w&&x.layoutScroll&&(w.wasRoot&&Jn(T,g),qr(T.x,w.offset.x),qr(T.y,w.offset.y))}return T}applyTransform(g,T=!1){const C=Mt();Jn(C,g);for(let A=0;A<this.path.length;A++){const w=this.path[A];!T&&w.options.layoutScroll&&w.scroll&&w!==w.root&&Ir(C,{x:-w.scroll.offset.x,y:-w.scroll.offset.y}),Ua(w.latestValues)&&Ir(C,w.latestValues)}return Ua(this.latestValues)&&Ir(C,this.latestValues),C}removeTransform(g){const T=Mt();Jn(T,g);for(let C=0;C<this.path.length;C++){const A=this.path[C];if(!A.instance||!Ua(A.latestValues))continue;Pd(A.latestValues)&&A.updateSnapshot();const w=Mt(),x=A.measurePageBox();Jn(w,x),m0(T,A.latestValues,A.snapshot?A.snapshot.layoutBox:void 0,w)}return Ua(this.latestValues)&&m0(T,this.latestValues),T}setTargetDelta(g){this.targetDelta=g,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(g){this.options={...this.options,...g,crossfade:g.crossfade!==void 0?g.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(g=!1){const T=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=T.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=T.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=T.isSharedProjectionDirty);const C=!!this.resumingFrom||this!==T;if(!(g||C&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:x}=this.options;if(!this.layout||!(w||x))return;this.resolvedRelativeTargetAt=zt.timestamp;const M=this.getClosestProjectingParent();M&&this.linkedParentVersion!==M.layoutVersion&&!M.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(M&&M.layout?this.createRelativeTarget(M,this.layout.layoutBox,M.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Mt(),this.targetWithTransforms=Mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Jn(this.target,this.layout.layoutBox),wb(this.target,this.targetDelta)):Jn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,M&&!!M.resumingFrom==!!this.resumingFrom&&!M.options.layoutScroll&&M.target&&this.animationProgress!==1?this.createRelativeTarget(M,this.target,M.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Pd(this.parent.latestValues)||Cb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(g,T,C){this.relativeParent=g,this.linkedParentVersion=g.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mt(),this.relativeTargetOrigin=Mt(),Wu(this.relativeTargetOrigin,T,C),Jn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const g=this.getLead(),T=!!this.resumingFrom||this!==g;let C=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(C=!1),T&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(C=!1),this.resolvedRelativeTargetAt===zt.timestamp&&(C=!1),C)return;const{layout:A,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(A||w))return;Jn(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,M=this.treeScale.y;Hw(this.layoutCorrected,this.treeScale,this.path,T),g.layout&&!g.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(g.target=g.layout.layoutBox,g.targetWithTransforms=Mt());const{target:D}=g;if(!D){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(l0(this.prevProjectionDelta.x,this.projectionDelta.x),l0(this.prevProjectionDelta.y,this.projectionDelta.y)),Ll(this.projectionDelta,this.layoutCorrected,D,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==M||!b0(this.projectionDelta.x,this.prevProjectionDelta.x)||!b0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(g=!0){if(this.options.visualElement?.scheduleRender(),g){const T=this.getStack();T&&T.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hr(),this.projectionDelta=Hr(),this.projectionDeltaWithTransform=Hr()}setAnimationOrigin(g,T=!1){const C=this.snapshot,A=C?C.latestValues:{},w={...this.latestValues},x=Hr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!T;const M=Mt(),D=C?C.source:void 0,B=this.layout?this.layout.source:void 0,X=D!==B,H=this.getStack(),F=!H||H.members.length<=1,W=!!(X&&!F&&this.options.crossfade===!0&&!this.path.some(GR));this.animationProgress=0;let Y;this.mixTargetDelta=re=>{const ae=re/1e3;E0(x.x,g.x,ae),E0(x.y,g.y,ae),this.setTargetDelta(x),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wu(M,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zR(this.relativeTarget,this.relativeTargetOrigin,M,ae),Y&&yR(this.relativeTarget,Y)&&(this.isProjectionDirty=!1),Y||(Y=Mt()),Jn(Y,this.relativeTarget)),X&&(this.animationValues=w,SR(w,A,this.latestValues,ae,W,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ae},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(g){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Qs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{zu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Kr(0)),this.motionValue.jump(0,!1),this.currentAnimation=CR(this.motionValue,[0,1e3],{...g,velocity:0,isSync:!0,onUpdate:T=>{this.mixTargetDelta(T),g.onUpdate&&g.onUpdate(T)},onStop:()=>{},onComplete:()=>{g.onComplete&&g.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const g=this.getStack();g&&g.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(OR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const g=this.getLead();let{targetWithTransforms:T,target:C,layout:A,latestValues:w}=g;if(!(!T||!C||!A)){if(this!==g&&this.layout&&A&&Hb(this.options.animationType,this.layout.layoutBox,A.layoutBox)){C=this.target||Mt();const x=sn(this.layout.layoutBox.x);C.x.min=g.target.x.min,C.x.max=C.x.min+x;const M=sn(this.layout.layoutBox.y);C.y.min=g.target.y.min,C.y.max=C.y.min+M}Jn(T,C),Ir(T,w),Ll(this.projectionDeltaWithTransform,this.layoutCorrected,T,w)}}registerSharedNode(g,T){this.sharedNodes.has(g)||this.sharedNodes.set(g,new xR),this.sharedNodes.get(g).add(T);const A=T.options.initialPromotionConfig;T.promote({transition:A?A.transition:void 0,preserveFollowOpacity:A&&A.shouldPreserveFollowOpacity?A.shouldPreserveFollowOpacity(T):void 0})}isLead(){const g=this.getStack();return g?g.lead===this:!0}getLead(){const{layoutId:g}=this.options;return g?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:g}=this.options;return g?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:g}=this.options;if(g)return this.root.sharedNodes.get(g)}promote({needsReset:g,transition:T,preserveFollowOpacity:C}={}){const A=this.getStack();A&&A.promote(this,C),g&&(this.projectionDelta=void 0,this.needsReset=!0),T&&this.setOptions({transition:T})}relegate(){const g=this.getStack();return g?g.relegate(this):!1}resetSkewAndRotation(){const{visualElement:g}=this.options;if(!g)return;let T=!1;const{latestValues:C}=g;if((C.z||C.rotate||C.rotateX||C.rotateY||C.rotateZ||C.skewX||C.skewY)&&(T=!0),!T)return;const A={};C.z&&cd("z",g,A,this.animationValues);for(let w=0;w<ld.length;w++)cd(`rotate${ld[w]}`,g,A,this.animationValues),cd(`skew${ld[w]}`,g,A,this.animationValues);g.render();for(const w in A)g.setStaticValue(w,A[w]),this.animationValues&&(this.animationValues[w]=A[w]);g.scheduleRender()}applyProjectionStyles(g,T){if(!this.instance||this.isSVG)return;if(!this.isVisible){g.visibility="hidden";return}const C=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,g.visibility="",g.opacity="",g.pointerEvents=Vu(T?.pointerEvents)||"",g.transform=C?C(this.latestValues,""):"none";return}const A=this.getLead();if(!this.projectionDelta||!this.layout||!A.target){this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Vu(T?.pointerEvents)||""),this.hasProjected&&!Ua(this.latestValues)&&(g.transform=C?C({},""):"none",this.hasProjected=!1);return}g.visibility="";const w=A.animationValues||A.latestValues;this.applyTransformsToTarget();let x=vR(this.projectionDeltaWithTransform,this.treeScale,w);C&&(x=C(w,x)),g.transform=x;const{x:M,y:D}=this.projectionDelta;g.transformOrigin=`${M.origin*100}% ${D.origin*100}% 0`,A.animationValues?g.opacity=A===this?w.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:g.opacity=A===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const B in zd){if(w[B]===void 0)continue;const{correct:X,applyTo:H,isCSSVariable:F}=zd[B],W=x==="none"?w[B]:X(w[B],A);if(H){const Y=H.length;for(let re=0;re<Y;re++)g[H[re]]=W}else F?this.options.visualElement.renderState.vars[B]=W:g[B]=W}this.options.layoutId&&(g.pointerEvents=A===this?Vu(T?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(g=>g.currentAnimation?.stop()),this.root.nodes.forEach(C0),this.root.sharedNodes.clear()}}}function _R(i){i.updateLayout()}function NR(i){const a=i.resumeFrom?.snapshot||i.snapshot;if(i.isLead()&&i.layout&&a&&i.hasListeners("didUpdate")){const{layoutBox:c,measuredBox:u}=i.layout,{animationType:m}=i.options,y=a.source!==i.layout.source;m==="size"?Ti(w=>{const x=y?a.measuredBox[w]:a.layoutBox[w],M=sn(x);x.min=c[w].min,x.max=x.min+M}):Hb(m,a.layoutBox,c)&&Ti(w=>{const x=y?a.measuredBox[w]:a.layoutBox[w],M=sn(c[w]);x.max=x.min+M,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[w].max=i.relativeTarget[w].min+M)});const g=Hr();Ll(g,c,a.layoutBox);const T=Hr();y?Ll(T,i.applyTransform(u,!0),a.measuredBox):Ll(T,c,a.layoutBox);const C=!jb(g);let A=!1;if(!i.resumeFrom){const w=i.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:x,layout:M}=w;if(x&&M){const D=Mt();Wu(D,a.layoutBox,x.layoutBox);const B=Mt();Wu(B,c,M.layoutBox),Bb(D,B)||(A=!0),w.options.layoutRoot&&(i.relativeTarget=B,i.relativeTargetOrigin=D,i.relativeParent=w)}}}i.notifyListeners("didUpdate",{layout:c,snapshot:a,delta:T,layoutDelta:g,hasLayoutChanged:C,hasRelativeLayoutChanged:A})}else if(i.isLead()){const{onExitComplete:c}=i.options;c&&c()}i.options.transition=void 0}function DR(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function LR(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function kR(i){i.clearSnapshot()}function C0(i){i.clearMeasurements()}function w0(i){i.isLayoutDirty=!1}function UR(i){const{visualElement:a}=i.options;a&&a.getProps().onBeforeLayoutMeasure&&a.notify("BeforeLayoutMeasure"),i.resetTransform()}function R0(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function jR(i){i.resolveTargetDelta()}function BR(i){i.calcProjection()}function PR(i){i.resetSkewAndRotation()}function VR(i){i.removeLeadSnapshot()}function E0(i,a,c){i.translate=lt(a.translate,0,c),i.scale=lt(a.scale,1,c),i.origin=a.origin,i.originPoint=a.originPoint}function x0(i,a,c,u){i.min=lt(a.min,c.min,u),i.max=lt(a.max,c.max,u)}function zR(i,a,c,u){x0(i.x,a.x,c.x,u),x0(i.y,a.y,c.y,u)}function GR(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const HR={duration:.45,ease:[.4,0,.1,1]},O0=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),M0=O0("applewebkit/")&&!O0("chrome/")?Math.round:Vn;function _0(i){i.min=M0(i.min),i.max=M0(i.max)}function qR(i){_0(i.x),_0(i.y)}function Hb(i,a,c){return i==="position"||i==="preserve-aspect"&&!hR(v0(a),v0(c),.2)}function IR(i){return i!==i.root&&i.scroll?.wasRoot}const YR=Gb({attachResizeListener:(i,a)=>zl(i,"resize",a),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),ud={current:void 0},qb=Gb({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!ud.current){const i=new YR({});i.mount(window),i.setOptions({layoutScroll:!0}),ud.current=i}return ud.current},resetTransform:(i,a)=>{i.style.transform=a!==void 0?a:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),Lm=k.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function N0(i,a){if(typeof i=="function")return i(a);i!=null&&(i.current=a)}function KR(...i){return a=>{let c=!1;const u=i.map(m=>{const y=N0(m,a);return!c&&typeof y=="function"&&(c=!0),y});if(c)return()=>{for(let m=0;m<u.length;m++){const y=u[m];typeof y=="function"?y():N0(i[m],null)}}}}function XR(...i){return k.useCallback(KR(...i),i)}class QR extends k.Component{getSnapshotBeforeUpdate(a){const c=this.props.childRef.current;if(c&&a.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const u=c.offsetParent,m=jd(u)&&u.offsetWidth||0,y=jd(u)&&u.offsetHeight||0,g=this.props.sizeRef.current;g.height=c.offsetHeight||0,g.width=c.offsetWidth||0,g.top=c.offsetTop,g.left=c.offsetLeft,g.right=m-g.width-g.left,g.bottom=y-g.height-g.top}return null}componentDidUpdate(){}render(){return this.props.children}}function FR({children:i,isPresent:a,anchorX:c,anchorY:u,root:m,pop:y}){const g=k.useId(),T=k.useRef(null),C=k.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:A}=k.useContext(Lm),w=i.props?.ref??i?.ref,x=XR(T,w);return k.useInsertionEffect(()=>{const{width:M,height:D,top:B,left:X,right:H,bottom:F}=C.current;if(a||y===!1||!T.current||!M||!D)return;const W=c==="left"?`left: ${X}`:`right: ${H}`,Y=u==="bottom"?`bottom: ${F}`:`top: ${B}`;T.current.dataset.motionPopId=g;const re=document.createElement("style");A&&(re.nonce=A);const ae=m??document.head;return ae.appendChild(re),re.sheet&&re.sheet.insertRule(`
          [data-motion-pop-id="${g}"] {
            position: absolute !important;
            width: ${M}px !important;
            height: ${D}px !important;
            ${W}px !important;
            ${Y}px !important;
          }
        `),()=>{ae.contains(re)&&ae.removeChild(re)}},[a]),P.jsx(QR,{isPresent:a,childRef:T,sizeRef:C,pop:y,children:y===!1?i:k.cloneElement(i,{ref:x})})}const WR=({children:i,initial:a,isPresent:c,onExitComplete:u,custom:m,presenceAffectsLayout:y,mode:g,anchorX:T,anchorY:C,root:A})=>{const w=rm(ZR),x=k.useId();let M=!0,D=k.useMemo(()=>(M=!1,{id:x,initial:a,isPresent:c,custom:m,onExitComplete:B=>{w.set(B,!0);for(const X of w.values())if(!X)return;u&&u()},register:B=>(w.set(B,!1),()=>w.delete(B))}),[c,w,u]);return y&&M&&(D={...D}),k.useMemo(()=>{w.forEach((B,X)=>w.set(X,!1))},[c]),k.useEffect(()=>{!c&&!w.size&&u&&u()},[c]),i=P.jsx(FR,{pop:g==="popLayout",isPresent:c,anchorX:T,anchorY:C,root:A,children:i}),P.jsx(tf.Provider,{value:D,children:i})};function ZR(){return new Map}function Ib(i=!0){const a=k.useContext(tf);if(a===null)return[!0,null];const{isPresent:c,onExitComplete:u,register:m}=a,y=k.useId();k.useEffect(()=>{if(i)return m(y)},[i]);const g=k.useCallback(()=>i&&u&&u(y),[y,u,i]);return!c&&u?[!1,g]:[!0]}const Mu=i=>i.key||"";function D0(i){const a=[];return k.Children.forEach(i,c=>{k.isValidElement(c)&&a.push(c)}),a}const Yb=({children:i,custom:a,initial:c=!0,onExitComplete:u,presenceAffectsLayout:m=!0,mode:y="sync",propagate:g=!1,anchorX:T="left",anchorY:C="top",root:A})=>{const[w,x]=Ib(g),M=k.useMemo(()=>D0(i),[i]),D=g&&!w?[]:M.map(Mu),B=k.useRef(!0),X=k.useRef(M),H=rm(()=>new Map),F=k.useRef(new Set),[W,Y]=k.useState(M),[re,ae]=k.useState(M);vv(()=>{B.current=!1,X.current=M;for(let ce=0;ce<re.length;ce++){const be=Mu(re[ce]);D.includes(be)?(H.delete(be),F.current.delete(be)):H.get(be)!==!0&&H.set(be,!1)}},[re,D.length,D.join("-")]);const G=[];if(M!==W){let ce=[...M];for(let be=0;be<re.length;be++){const Pe=re[be],He=Mu(Pe);D.includes(He)||(ce.splice(be,0,Pe),G.push(Pe))}return y==="wait"&&G.length&&(ce=G),ae(D0(ce)),Y(M),null}const{forceRender:me}=k.useContext(am);return P.jsx(P.Fragment,{children:re.map(ce=>{const be=Mu(ce),Pe=g&&!w?!1:M===re||D.includes(be),He=()=>{if(F.current.has(be))return;if(F.current.add(be),H.has(be))H.set(be,!0);else return;let ut=!0;H.forEach(S=>{S||(ut=!1)}),ut&&(me?.(),ae(X.current),g&&x?.(),u&&u())};return P.jsx(WR,{isPresent:Pe,initial:!B.current||c?void 0:!1,custom:a,presenceAffectsLayout:m,mode:y,root:A,onExitComplete:Pe?void 0:He,anchorX:T,anchorY:C,children:ce},be)})})},Kb=k.createContext({strict:!1}),L0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let k0=!1;function JR(){if(k0)return;const i={};for(const a in L0)i[a]={isEnabled:c=>L0[a].some(u=>!!c[u])};Sb(i),k0=!0}function Xb(){return JR(),Pw()}function $R(i){const a=Xb();for(const c in i)a[c]={...a[c],...i[c]};Sb(a)}const eE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Zu(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||eE.has(i)}let Qb=i=>!Zu(i);function tE(i){typeof i=="function"&&(Qb=a=>a.startsWith("on")?!Zu(a):i(a))}try{tE(require("@emotion/is-prop-valid").default)}catch{}function nE(i,a,c){const u={};for(const m in i)m==="values"&&typeof i.values=="object"||(Qb(m)||c===!0&&Zu(m)||!a&&!Zu(m)||i.draggable&&m.startsWith("onDrag"))&&(u[m]=i[m]);return u}const af=k.createContext({});function iE(i,a){if(sf(i)){const{initial:c,animate:u}=i;return{initial:c===!1||Vl(c)?c:void 0,animate:Vl(u)?u:void 0}}return i.inherit!==!1?a:{}}function sE(i){const{initial:a,animate:c}=iE(i,k.useContext(af));return k.useMemo(()=>({initial:a,animate:c}),[U0(a),U0(c)])}function U0(i){return Array.isArray(i)?i.join(" "):i}const km=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Fb(i,a,c){for(const u in a)!Ft(a[u])&&!xb(u,c)&&(i[u]=a[u])}function aE({transformTemplate:i},a){return k.useMemo(()=>{const c=km();return Nm(c,a,i),Object.assign({},c.vars,c.style)},[a])}function rE(i,a){const c=i.style||{},u={};return Fb(u,c,i),Object.assign(u,aE(i,a)),u}function oE(i,a){const c={},u=rE(i,a);return i.drag&&i.dragListener!==!1&&(c.draggable=!1,u.userSelect=u.WebkitUserSelect=u.WebkitTouchCallout="none",u.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(c.tabIndex=0),c.style=u,c}const Wb=()=>({...km(),attrs:{}});function lE(i,a,c,u){const m=k.useMemo(()=>{const y=Wb();return Ob(y,a,_b(u),i.transformTemplate,i.style),{...y.attrs,style:{...y.style}}},[a]);if(i.style){const y={};Fb(y,i.style,i),m.style={...y,...m.style}}return m}const cE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Um(i){return typeof i!="string"||i.includes("-")?!1:!!(cE.indexOf(i)>-1||/[A-Z]/u.test(i))}function uE(i,a,c,{latestValues:u},m,y=!1,g){const C=(g??Um(i)?lE:oE)(a,u,m,i),A=nE(a,typeof i=="string",y),w=i!==k.Fragment?{...A,...C,ref:c}:{},{children:x}=a,M=k.useMemo(()=>Ft(x)?x.get():x,[x]);return k.createElement(i,{...w,children:M})}function fE({scrapeMotionValuesFromProps:i,createRenderState:a},c,u,m){return{latestValues:hE(c,u,m,i),renderState:a()}}function hE(i,a,c,u){const m={},y=u(i,{});for(const M in y)m[M]=Vu(y[M]);let{initial:g,animate:T}=i;const C=sf(i),A=vb(i);a&&A&&!C&&i.inherit!==!1&&(g===void 0&&(g=a.initial),T===void 0&&(T=a.animate));let w=c?c.initial===!1:!1;w=w||g===!1;const x=w?T:g;if(x&&typeof x!="boolean"&&!nf(x)){const M=Array.isArray(x)?x:[x];for(let D=0;D<M.length;D++){const B=Cm(i,M[D]);if(B){const{transitionEnd:X,transition:H,...F}=B;for(const W in F){let Y=F[W];if(Array.isArray(Y)){const re=w?Y.length-1:0;Y=Y[re]}Y!==null&&(m[W]=Y)}for(const W in X)m[W]=X[W]}}}return m}const Zb=i=>(a,c)=>{const u=k.useContext(af),m=k.useContext(tf),y=()=>fE(i,a,u,m);return c?y():rm(y)},dE=Zb({scrapeMotionValuesFromProps:Dm,createRenderState:km}),mE=Zb({scrapeMotionValuesFromProps:Nb,createRenderState:Wb}),pE=Symbol.for("motionComponentSymbol");function gE(i,a,c){const u=k.useRef(c);k.useInsertionEffect(()=>{u.current=c});const m=k.useRef(null);return k.useCallback(y=>{y&&i.onMount?.(y),a&&(y?a.mount(y):a.unmount());const g=u.current;if(typeof g=="function")if(y){const T=g(y);typeof T=="function"&&(m.current=T)}else m.current?(m.current(),m.current=null):g(y);else g&&(g.current=y)},[a])}const Jb=k.createContext({});function Br(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function yE(i,a,c,u,m,y){const{visualElement:g}=k.useContext(af),T=k.useContext(Kb),C=k.useContext(tf),A=k.useContext(Lm),w=A.reducedMotion,x=A.skipAnimations,M=k.useRef(null),D=k.useRef(!1);u=u||T.renderer,!M.current&&u&&(M.current=u(i,{visualState:a,parent:g,props:c,presenceContext:C,blockInitialAnimation:C?C.initial===!1:!1,reducedMotionConfig:w,skipAnimations:x,isSVG:y}),D.current&&M.current&&(M.current.manuallyAnimateOnMount=!0));const B=M.current,X=k.useContext(Jb);B&&!B.projection&&m&&(B.type==="html"||B.type==="svg")&&vE(M.current,c,m,X);const H=k.useRef(!1);k.useInsertionEffect(()=>{B&&H.current&&B.update(c,C)});const F=c[ab],W=k.useRef(!!F&&!window.MotionHandoffIsComplete?.(F)&&window.MotionHasOptimisedAnimation?.(F));return vv(()=>{D.current=!0,B&&(H.current=!0,window.MotionIsMounted=!0,B.updateFeatures(),B.scheduleRenderMicrotask(),W.current&&B.animationState&&B.animationState.animateChanges())}),k.useEffect(()=>{B&&(!W.current&&B.animationState&&B.animationState.animateChanges(),W.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(F)}),W.current=!1),B.enteringChildren=void 0)}),B}function vE(i,a,c,u){const{layoutId:m,layout:y,drag:g,dragConstraints:T,layoutScroll:C,layoutRoot:A,layoutCrossfade:w}=a;i.projection=new c(i.latestValues,a["data-framer-portal-id"]?void 0:$b(i.parent)),i.projection.setOptions({layoutId:m,layout:y,alwaysMeasureLayout:!!g||T&&Br(T),visualElement:i,animationType:typeof y=="string"?y:"both",initialPromotionConfig:u,crossfade:w,layoutScroll:C,layoutRoot:A})}function $b(i){if(i)return i.options.allowProjection!==!1?i.projection:$b(i.parent)}function fd(i,{forwardMotionProps:a=!1,type:c}={},u,m){u&&$R(u);const y=c?c==="svg":Um(i),g=y?mE:dE;function T(A,w){let x;const M={...k.useContext(Lm),...A,layoutId:bE(A)},{isStatic:D}=M,B=sE(A),X=g(A,D);if(!D&&yv){SE();const H=TE(M);x=H.MeasureLayout,B.visualElement=yE(i,X,M,m,H.ProjectionNode,y)}return P.jsxs(af.Provider,{value:B,children:[x&&B.visualElement?P.jsx(x,{visualElement:B.visualElement,...M}):null,uE(i,A,gE(X,B.visualElement,w),X,D,a,y)]})}T.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const C=k.forwardRef(T);return C[pE]=i,C}function bE({layoutId:i}){const a=k.useContext(am).id;return a&&i!==void 0?a+"-"+i:i}function SE(i,a){k.useContext(Kb).strict}function TE(i){const a=Xb(),{drag:c,layout:u}=a;if(!c&&!u)return{};const m={...c,...u};return{MeasureLayout:c?.isEnabled(i)||u?.isEnabled(i)?m.MeasureLayout:void 0,ProjectionNode:m.ProjectionNode}}function AE(i,a){if(typeof Proxy>"u")return fd;const c=new Map,u=(y,g)=>fd(y,g,i,a),m=(y,g)=>u(y,g);return new Proxy(m,{get:(y,g)=>g==="create"?u:(c.has(g)||c.set(g,fd(g,void 0,i,a)),c.get(g))})}const CE=(i,a)=>a.isSVG??Um(i)?new tR(a):new Fw(a,{allowProjection:i!==k.Fragment});class wE extends Fs{constructor(a){super(a),a.animationState||(a.animationState=rR(a))}updateAnimationControlsSubscription(){const{animate:a}=this.node.getProps();nf(a)&&(this.unmountControls=a.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:a}=this.node.getProps(),{animate:c}=this.node.prevProps||{};a!==c&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let RE=0;class EE extends Fs{constructor(){super(...arguments),this.id=RE++}update(){if(!this.node.presenceContext)return;const{isPresent:a,onExitComplete:c}=this.node.presenceContext,{isPresent:u}=this.node.prevPresenceContext||{};if(!this.node.animationState||a===u)return;const m=this.node.animationState.setActive("exit",!a);c&&!a&&m.then(()=>{c(this.id)})}mount(){const{register:a,onExitComplete:c}=this.node.presenceContext||{};c&&c(this.id),a&&(this.unmount=a(this.id))}unmount(){}}const xE={animation:{Feature:wE},exit:{Feature:EE}};function Xl(i){return{point:{x:i.pageX,y:i.pageY}}}const OE=i=>a=>xm(a)&&i(a,Xl(a));function kl(i,a,c,u){return zl(i,a,OE(c),u)}const eS=({current:i})=>i?i.ownerDocument.defaultView:null,j0=(i,a)=>Math.abs(i-a);function ME(i,a){const c=j0(i.x,a.x),u=j0(i.y,a.y);return Math.sqrt(c**2+u**2)}const B0=new Set(["auto","scroll"]);class tS{constructor(a,c,{transformPagePoint:u,contextWindow:m=window,dragSnapToOrigin:y=!1,distanceThreshold:g=3,element:T}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=D=>{this.handleScroll(D.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=dd(this.lastMoveEventInfo,this.history),B=this.startEvent!==null,X=ME(D.offset,{x:0,y:0})>=this.distanceThreshold;if(!B&&!X)return;const{point:H}=D,{timestamp:F}=zt;this.history.push({...H,timestamp:F});const{onStart:W,onMove:Y}=this.handlers;B||(W&&W(this.lastMoveEvent,D),this.startEvent=this.lastMoveEvent),Y&&Y(this.lastMoveEvent,D)},this.handlePointerMove=(D,B)=>{this.lastMoveEvent=D,this.lastMoveEventInfo=hd(B,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(D,B)=>{this.end();const{onEnd:X,onSessionEnd:H,resumeAnimation:F}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&F&&F(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const W=dd(D.type==="pointercancel"?this.lastMoveEventInfo:hd(B,this.transformPagePoint),this.history);this.startEvent&&X&&X(D,W),H&&H(D,W)},!xm(a))return;this.dragSnapToOrigin=y,this.handlers=c,this.transformPagePoint=u,this.distanceThreshold=g,this.contextWindow=m||window;const C=Xl(a),A=hd(C,this.transformPagePoint),{point:w}=A,{timestamp:x}=zt;this.history=[{...w,timestamp:x}];const{onSessionStart:M}=c;M&&M(a,dd(A,this.history)),this.removeListeners=Il(kl(this.contextWindow,"pointermove",this.handlePointerMove),kl(this.contextWindow,"pointerup",this.handlePointerUp),kl(this.contextWindow,"pointercancel",this.handlePointerUp)),T&&this.startScrollTracking(T)}startScrollTracking(a){let c=a.parentElement;for(;c;){const u=getComputedStyle(c);(B0.has(u.overflowX)||B0.has(u.overflowY))&&this.scrollPositions.set(c,{x:c.scrollLeft,y:c.scrollTop}),c=c.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(a){const c=this.scrollPositions.get(a);if(!c)return;const u=a===window,m=u?{x:window.scrollX,y:window.scrollY}:{x:a.scrollLeft,y:a.scrollTop},y={x:m.x-c.x,y:m.y-c.y};y.x===0&&y.y===0||(u?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=y.x,this.lastMoveEventInfo.point.y+=y.y):this.history.length>0&&(this.history[0].x-=y.x,this.history[0].y-=y.y),this.scrollPositions.set(a,m),et.update(this.updatePoint,!0))}updateHandlers(a){this.handlers=a}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Qs(this.updatePoint)}}function hd(i,a){return a?{point:a(i.point)}:i}function P0(i,a){return{x:i.x-a.x,y:i.y-a.y}}function dd({point:i},a){return{point:i,delta:P0(i,nS(a)),offset:P0(i,_E(a)),velocity:NE(a,.1)}}function _E(i){return i[0]}function nS(i){return i[i.length-1]}function NE(i,a){if(i.length<2)return{x:0,y:0};let c=i.length-1,u=null;const m=nS(i);for(;c>=0&&(u=i[c],!(m.timestamp-u.timestamp>ei(a)));)c--;if(!u)return{x:0,y:0};u===i[0]&&i.length>2&&m.timestamp-u.timestamp>ei(a)*2&&(u=i[1]);const y=Pn(m.timestamp-u.timestamp);if(y===0)return{x:0,y:0};const g={x:(m.x-u.x)/y,y:(m.y-u.y)/y};return g.x===1/0&&(g.x=0),g.y===1/0&&(g.y=0),g}function DE(i,{min:a,max:c},u){return a!==void 0&&i<a?i=u?lt(a,i,u.min):Math.max(i,a):c!==void 0&&i>c&&(i=u?lt(c,i,u.max):Math.min(i,c)),i}function V0(i,a,c){return{min:a!==void 0?i.min+a:void 0,max:c!==void 0?i.max+c-(i.max-i.min):void 0}}function LE(i,{top:a,left:c,bottom:u,right:m}){return{x:V0(i.x,c,m),y:V0(i.y,a,u)}}function z0(i,a){let c=a.min-i.min,u=a.max-i.max;return a.max-a.min<i.max-i.min&&([c,u]=[u,c]),{min:c,max:u}}function kE(i,a){return{x:z0(i.x,a.x),y:z0(i.y,a.y)}}function UE(i,a){let c=.5;const u=sn(i),m=sn(a);return m>u?c=jl(a.min,a.max-u,i.min):u>m&&(c=jl(i.min,i.max-m,a.min)),Ci(0,1,c)}function jE(i,a){const c={};return a.min!==void 0&&(c.min=a.min-i.min),a.max!==void 0&&(c.max=a.max-i.min),c}const Gd=.35;function BE(i=Gd){return i===!1?i=0:i===!0&&(i=Gd),{x:G0(i,"left","right"),y:G0(i,"top","bottom")}}function G0(i,a,c){return{min:H0(i,a),max:H0(i,c)}}function H0(i,a){return typeof i=="number"?i:i[a]||0}const PE=new WeakMap;class VE{constructor(a){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=a}start(a,{snapToCursor:c=!1,distanceThreshold:u}={}){const{presenceContext:m}=this.visualElement;if(m&&m.isPresent===!1)return;const y=x=>{c&&this.snapToCursor(Xl(x).point),this.stopAnimation()},g=(x,M)=>{const{drag:D,dragPropagation:B,onDragStart:X}=this.getProps();if(D&&!B&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mw(D),!this.openDragLock))return;this.latestPointerEvent=x,this.latestPanInfo=M,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ti(F=>{let W=this.getAxisMotionValue(F).get()||0;if(Ai.test(W)){const{projection:Y}=this.visualElement;if(Y&&Y.layout){const re=Y.layout.layoutBox[F];re&&(W=sn(re)*(parseFloat(W)/100))}}this.originPoint[F]=W}),X&&et.update(()=>X(x,M),!1,!0),Dd(this.visualElement,"transform");const{animationState:H}=this.visualElement;H&&H.setActive("whileDrag",!0)},T=(x,M)=>{this.latestPointerEvent=x,this.latestPanInfo=M;const{dragPropagation:D,dragDirectionLock:B,onDirectionLock:X,onDrag:H}=this.getProps();if(!D&&!this.openDragLock)return;const{offset:F}=M;if(B&&this.currentDirection===null){this.currentDirection=GE(F),this.currentDirection!==null&&X&&X(this.currentDirection);return}this.updateAxis("x",M.point,F),this.updateAxis("y",M.point,F),this.visualElement.render(),H&&et.update(()=>H(x,M),!1,!0)},C=(x,M)=>{this.latestPointerEvent=x,this.latestPanInfo=M,this.stop(x,M),this.latestPointerEvent=null,this.latestPanInfo=null},A=()=>{const{dragSnapToOrigin:x}=this.getProps();(x||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:w}=this.getProps();this.panSession=new tS(a,{onSessionStart:y,onStart:g,onMove:T,onSessionEnd:C,resumeAnimation:A},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:w,distanceThreshold:u,contextWindow:eS(this.visualElement),element:this.visualElement.current})}stop(a,c){const u=a||this.latestPointerEvent,m=c||this.latestPanInfo,y=this.isDragging;if(this.cancel(),!y||!m||!u)return;const{velocity:g}=m;this.startAnimation(g);const{onDragEnd:T}=this.getProps();T&&et.postRender(()=>T(u,m))}cancel(){this.isDragging=!1;const{projection:a,animationState:c}=this.visualElement;a&&(a.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:u}=this.getProps();!u&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),c&&c.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(a,c,u){const{drag:m}=this.getProps();if(!u||!_u(a,m,this.currentDirection))return;const y=this.getAxisMotionValue(a);let g=this.originPoint[a]+u[a];this.constraints&&this.constraints[a]&&(g=DE(g,this.constraints[a],this.elastic[a])),y.set(g)}resolveConstraints(){const{dragConstraints:a,dragElastic:c}=this.getProps(),u=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,m=this.constraints;a&&Br(a)?this.constraints||(this.constraints=this.resolveRefConstraints()):a&&u?this.constraints=LE(u.layoutBox,a):this.constraints=!1,this.elastic=BE(c),m!==this.constraints&&!Br(a)&&u&&this.constraints&&!this.hasMutatedConstraints&&Ti(y=>{this.constraints!==!1&&this.getAxisMotionValue(y)&&(this.constraints[y]=jE(u.layoutBox[y],this.constraints[y]))})}resolveRefConstraints(){const{dragConstraints:a,onMeasureDragConstraints:c}=this.getProps();if(!a||!Br(a))return!1;const u=a.current,{projection:m}=this.visualElement;if(!m||!m.layout)return!1;const y=qw(u,m.root,this.visualElement.getTransformPagePoint());let g=kE(m.layout.layoutBox,y);if(c){const T=c(zw(g));this.hasMutatedConstraints=!!T,T&&(g=Ab(T))}return g}startAnimation(a){const{drag:c,dragMomentum:u,dragElastic:m,dragTransition:y,dragSnapToOrigin:g,onDragTransitionEnd:T}=this.getProps(),C=this.constraints||{},A=Ti(w=>{if(!_u(w,c,this.currentDirection))return;let x=C&&C[w]||{};g&&(x={min:0,max:0});const M=m?200:1e6,D=m?40:1e7,B={type:"inertia",velocity:u?a[w]:0,bounceStiffness:M,bounceDamping:D,timeConstant:750,restDelta:1,restSpeed:10,...y,...x};return this.startAxisValueAnimation(w,B)});return Promise.all(A).then(T)}startAxisValueAnimation(a,c){const u=this.getAxisMotionValue(a);return Dd(this.visualElement,a),u.start(Am(a,u,0,c,this.visualElement,!1))}stopAnimation(){Ti(a=>this.getAxisMotionValue(a).stop())}getAxisMotionValue(a){const c=`_drag${a.toUpperCase()}`,u=this.visualElement.getProps(),m=u[c];return m||this.visualElement.getValue(a,(u.initial?u.initial[a]:void 0)||0)}snapToCursor(a){Ti(c=>{const{drag:u}=this.getProps();if(!_u(c,u,this.currentDirection))return;const{projection:m}=this.visualElement,y=this.getAxisMotionValue(c);if(m&&m.layout){const{min:g,max:T}=m.layout.layoutBox[c],C=y.get()||0;y.set(a[c]-lt(g,T,.5)+C)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:a,dragConstraints:c}=this.getProps(),{projection:u}=this.visualElement;if(!Br(c)||!u||!this.constraints)return;this.stopAnimation();const m={x:0,y:0};Ti(g=>{const T=this.getAxisMotionValue(g);if(T&&this.constraints!==!1){const C=T.get();m[g]=UE({min:C,max:C},this.constraints[g])}});const{transformTemplate:y}=this.visualElement.getProps();this.visualElement.current.style.transform=y?y({},""):"none",u.root&&u.root.updateScroll(),u.updateLayout(),this.constraints=!1,this.resolveConstraints(),Ti(g=>{if(!_u(g,a,null))return;const T=this.getAxisMotionValue(g),{min:C,max:A}=this.constraints[g];T.set(lt(C,A,m[g]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;PE.set(this.visualElement,this);const a=this.visualElement.current,c=kl(a,"pointerdown",A=>{const{drag:w,dragListener:x=!0}=this.getProps(),M=A.target,D=M!==a&&Sw(M);w&&x&&!D&&this.start(A)});let u;const m=()=>{const{dragConstraints:A}=this.getProps();Br(A)&&A.current&&(this.constraints=this.resolveRefConstraints(),u||(u=zE(a,A.current,()=>this.scalePositionWithinConstraints())))},{projection:y}=this.visualElement,g=y.addEventListener("measure",m);y&&!y.layout&&(y.root&&y.root.updateScroll(),y.updateLayout()),et.read(m);const T=zl(window,"resize",()=>this.scalePositionWithinConstraints()),C=y.addEventListener("didUpdate",(({delta:A,hasLayoutChanged:w})=>{this.isDragging&&w&&(Ti(x=>{const M=this.getAxisMotionValue(x);M&&(this.originPoint[x]+=A[x].translate,M.set(M.get()+A[x].translate))}),this.visualElement.render())}));return()=>{T(),c(),g(),C&&C(),u&&u()}}getProps(){const a=this.visualElement.getProps(),{drag:c=!1,dragDirectionLock:u=!1,dragPropagation:m=!1,dragConstraints:y=!1,dragElastic:g=Gd,dragMomentum:T=!0}=a;return{...a,drag:c,dragDirectionLock:u,dragPropagation:m,dragConstraints:y,dragElastic:g,dragMomentum:T}}}function q0(i){let a=!0;return()=>{if(a){a=!1;return}i()}}function zE(i,a,c){const u=Wy(i,q0(c)),m=Wy(a,q0(c));return()=>{u(),m()}}function _u(i,a,c){return(a===!0||a===i)&&(c===null||c===i)}function GE(i,a=10){let c=null;return Math.abs(i.y)>a?c="y":Math.abs(i.x)>a&&(c="x"),c}class HE extends Fs{constructor(a){super(a),this.removeGroupControls=Vn,this.removeListeners=Vn,this.controls=new VE(a)}mount(){const{dragControls:a}=this.node.getProps();a&&(this.removeGroupControls=a.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vn}update(){const{dragControls:a}=this.node.getProps(),{dragControls:c}=this.node.prevProps||{};a!==c&&(this.removeGroupControls(),a&&(this.removeGroupControls=a.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const md=i=>(a,c)=>{i&&et.update(()=>i(a,c),!1,!0)};class qE extends Fs{constructor(){super(...arguments),this.removePointerDownListener=Vn}onPointerDown(a){this.session=new tS(a,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:eS(this.node)})}createPanHandlers(){const{onPanSessionStart:a,onPanStart:c,onPan:u,onPanEnd:m}=this.node.getProps();return{onSessionStart:md(a),onStart:md(c),onMove:md(u),onEnd:(y,g)=>{delete this.session,m&&et.postRender(()=>m(y,g))}}}mount(){this.removePointerDownListener=kl(this.node.current,"pointerdown",a=>this.onPointerDown(a))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let pd=!1;class IE extends k.Component{componentDidMount(){const{visualElement:a,layoutGroup:c,switchLayoutGroup:u,layoutId:m}=this.props,{projection:y}=a;y&&(c.group&&c.group.add(y),u&&u.register&&m&&u.register(y),pd&&y.root.didUpdate(),y.addEventListener("animationComplete",()=>{this.safeToRemove()}),y.setOptions({...y.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),zu.hasEverUpdated=!0}getSnapshotBeforeUpdate(a){const{layoutDependency:c,visualElement:u,drag:m,isPresent:y}=this.props,{projection:g}=u;return g&&(g.isPresent=y,a.layoutDependency!==c&&g.setOptions({...g.options,layoutDependency:c}),pd=!0,m||a.layoutDependency!==c||c===void 0||a.isPresent!==y?g.willUpdate():this.safeToRemove(),a.isPresent!==y&&(y?g.promote():g.relegate()||et.postRender(()=>{const T=g.getStack();(!T||!T.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:a}=this.props.visualElement;a&&(a.root.didUpdate(),Em.postRender(()=>{!a.currentAnimation&&a.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:a,layoutGroup:c,switchLayoutGroup:u}=this.props,{projection:m}=a;pd=!0,m&&(m.scheduleCheckAfterUnmount(),c&&c.group&&c.group.remove(m),u&&u.deregister&&u.deregister(m))}safeToRemove(){const{safeToRemove:a}=this.props;a&&a()}render(){return null}}function iS(i){const[a,c]=Ib(),u=k.useContext(am);return P.jsx(IE,{...i,layoutGroup:u,switchLayoutGroup:k.useContext(Jb),isPresent:a,safeToRemove:c})}const YE={pan:{Feature:qE},drag:{Feature:HE,ProjectionNode:qb,MeasureLayout:iS}};function I0(i,a,c){const{props:u}=i;i.animationState&&u.whileHover&&i.animationState.setActive("whileHover",c==="Start");const m="onHover"+c,y=u[m];y&&et.postRender(()=>y(a,Xl(a)))}class KE extends Fs{mount(){const{current:a}=this.node;a&&(this.unmount=gw(a,(c,u)=>(I0(this.node,u,"Start"),m=>I0(this.node,m,"End"))))}unmount(){}}class XE extends Fs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let a=!1;try{a=this.node.current.matches(":focus-visible")}catch{a=!0}!a||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Il(zl(this.node.current,"focus",()=>this.onFocus()),zl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Y0(i,a,c){const{props:u}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&u.whileTap&&i.animationState.setActive("whileTap",c==="Start");const m="onTap"+(c==="End"?"":c),y=u[m];y&&et.postRender(()=>y(a,Xl(a)))}class QE extends Fs{mount(){const{current:a}=this.node;if(!a)return;const{globalTapTarget:c,propagate:u}=this.node.props;this.unmount=Aw(a,(m,y)=>(Y0(this.node,y,"Start"),(g,{success:T})=>Y0(this.node,g,T?"End":"Cancel")),{useGlobalTarget:c,stopPropagation:u?.tap===!1})}unmount(){}}const Hd=new WeakMap,gd=new WeakMap,FE=i=>{const a=Hd.get(i.target);a&&a(i)},WE=i=>{i.forEach(FE)};function ZE({root:i,...a}){const c=i||document;gd.has(c)||gd.set(c,{});const u=gd.get(c),m=JSON.stringify(a);return u[m]||(u[m]=new IntersectionObserver(WE,{root:i,...a})),u[m]}function JE(i,a,c){const u=ZE(a);return Hd.set(i,c),u.observe(i),()=>{Hd.delete(i),u.unobserve(i)}}const $E={some:0,all:1};class ex extends Fs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:a={}}=this.node.getProps(),{root:c,margin:u,amount:m="some",once:y}=a,g={root:c?c.current:void 0,rootMargin:u,threshold:typeof m=="number"?m:$E[m]},T=C=>{const{isIntersecting:A}=C;if(this.isInView===A||(this.isInView=A,y&&!A&&this.hasEnteredView))return;A&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",A);const{onViewportEnter:w,onViewportLeave:x}=this.node.getProps(),M=A?w:x;M&&M(C)};return JE(this.node.current,g,T)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:a,prevProps:c}=this.node;["amount","margin","root"].some(tx(a,c))&&this.startObserver()}unmount(){}}function tx({viewport:i={}},{viewport:a={}}={}){return c=>i[c]!==a[c]}const nx={inView:{Feature:ex},tap:{Feature:QE},focus:{Feature:XE},hover:{Feature:KE}},ix={layout:{ProjectionNode:qb,MeasureLayout:iS}},sx={...xE,...nx,...YE,...ix},Xs=AE(sx,CE);const sS=(...i)=>i.filter((a,c,u)=>!!a&&a.trim()!==""&&u.indexOf(a)===c).join(" ").trim();const ax=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const rx=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,c,u)=>u?u.toUpperCase():c.toLowerCase());const K0=i=>{const a=rx(i);return a.charAt(0).toUpperCase()+a.slice(1)};var ox={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lx=i=>{for(const a in i)if(a.startsWith("aria-")||a==="role"||a==="title")return!0;return!1};const cx=k.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:m="",children:y,iconNode:g,...T},C)=>k.createElement("svg",{ref:C,...ox,width:a,height:a,stroke:i,strokeWidth:u?Number(c)*24/Number(a):c,className:sS("lucide",m),...!y&&!lx(T)&&{"aria-hidden":"true"},...T},[...g.map(([A,w])=>k.createElement(A,w)),...Array.isArray(y)?y:[y]]));const Ri=(i,a)=>{const c=k.forwardRef(({className:u,...m},y)=>k.createElement(cx,{ref:y,iconNode:a,className:sS(`lucide-${ax(K0(i))}`,`lucide-${i}`,u),...m}));return c.displayName=K0(i),c};const ux=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],aS=Ri("chevron-left",ux);const fx=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],hx=Ri("cpu",fx);const dx=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],X0=Ri("dice-6",dx);const mx=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],rS=Ri("play",mx);const px=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],gx=Ri("share-2",px);const yx=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vx=Ri("shield-check",yx);const bx=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],oS=Ri("trophy",bx);const Sx=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Tx=Ri("user-plus",Sx);const Ax=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],lS=Ri("users",Ax);const Cx=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],wx=Ri("zap",Cx);function Rx(){const[i,a]=k.useState(""),[c,u]=k.useState(!1),m=$u(),y=async()=>{u(!0);try{const C=await(await fetch("/api/game/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seats:4,allowBots:!0})})).json();localStorage.setItem(`session_${C.gameCode}`,C.sessionId),m(`/lobby/${C.gameCode}`)}catch(T){console.error(T)}finally{u(!1)}},g=()=>{i.length===6&&m(`/lobby/${i.toUpperCase()}`)};return P.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4",children:[P.jsxs(Xs.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"text-center mb-12",children:[P.jsxs("h1",{className:"text-7xl font-black text-slate-900 mb-2 tracking-tighter",children:["LUDO",P.jsx("span",{className:"text-red-500",children:"."})]}),P.jsx("p",{className:"text-slate-500 font-medium",children:"Classic board game, reimagined."})]}),P.jsxs("div",{className:"w-full max-w-md space-y-4",children:[P.jsxs(Xs.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1},className:"bg-white p-8 rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100",children:[P.jsxs("button",{onClick:y,disabled:c,className:"w-full group relative bg-slate-900 hover:bg-slate-800 text-white font-bold py-5 rounded-2xl transition-all flex items-center justify-center gap-3 overflow-hidden disabled:opacity-50",children:[P.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500 to-orange-500 opacity-0 group-hover:opacity-10 transition-opacity"}),P.jsx(rS,{size:24,fill:"currentColor"}),P.jsx("span",{children:c?"CREATING...":"CREATE NEW GAME"})]}),P.jsxs("div",{className:"relative flex items-center my-8",children:[P.jsx("div",{className:"flex-grow border-t border-slate-100"}),P.jsx("span",{className:"flex-shrink mx-4 text-slate-400 text-xs font-bold uppercase tracking-widest",children:"or join existing"}),P.jsx("div",{className:"flex-grow border-t border-slate-100"})]}),P.jsxs("div",{className:"space-y-3",children:[P.jsx("input",{type:"text",placeholder:"ENTER GAME CODE",value:i,onChange:T=>a(T.target.value.toUpperCase()),maxLength:6,className:"w-full text-center text-3xl font-black tracking-[0.2em] border-2 border-slate-100 rounded-2xl py-4 focus:outline-none focus:border-red-500/20 focus:ring-4 focus:ring-red-500/5 transition-all text-slate-900 placeholder:text-slate-200"}),P.jsx("button",{onClick:g,disabled:i.length!==6,className:"w-full bg-slate-100 hover:bg-slate-200 text-slate-900 font-bold py-5 rounded-2xl transition-all disabled:opacity-30 disabled:grayscale",children:"JOIN GAME"})]})]}),P.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[P.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-100 flex items-center gap-3",children:[P.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center text-blue-500",children:P.jsx(lS,{size:20})}),P.jsxs("div",{children:[P.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase tracking-tighter",children:"Active"}),P.jsx("div",{className:"font-bold text-slate-900",children:"2.4k Players"})]})]}),P.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-100 flex items-center gap-3",children:[P.jsx("div",{className:"w-10 h-10 rounded-xl bg-yellow-50 flex items-center justify-center text-yellow-500",children:P.jsx(oS,{size:20})}),P.jsxs("div",{children:[P.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase tracking-tighter",children:"Today"}),P.jsx("div",{className:"font-bold text-slate-900",children:"482 Winners"})]})]})]})]}),P.jsx("footer",{className:"mt-12 text-slate-400 text-sm font-medium",children:"v1.0.0  Built with  for fun"})]})}function Ex(){const{code:i}=lv(),[a,c]=k.useState(null),[u,m]=k.useState(!0),[y,g]=k.useState(""),T=$u(),C=async()=>{try{const B=localStorage.getItem(`session_${i}`),H=await(await fetch("/api/game/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameCode:i,sessionId:B})})).json();if(H.error)throw new Error(H.error);localStorage.setItem(`session_${i}`,H.sessionId),c(H.gameState),H.gameState.status==="RUNNING"&&T(`/game/${i}`)}catch(B){g(B.message)}finally{m(!1)}};k.useEffect(()=>{C();const B=setInterval(C,3e3);return()=>clearInterval(B)},[i]);const A=async()=>{try{const B=localStorage.getItem(`session_${i}`),H=await(await fetch("/api/game/add-bot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameCode:i,sessionId:B})})).json();H.error&&alert(H.error),C()}catch(B){console.error(B)}},w=async()=>{try{const B=localStorage.getItem(`session_${i}`),H=await(await fetch("/api/game/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameCode:i,sessionId:B})})).json();H.error?alert(H.error):T(`/game/${i}`)}catch(B){console.error(B)}},x=()=>{navigator.share?navigator.share({title:"Join my Ludo Game",text:`Join my Ludo game with code: ${i}`,url:window.location.href}):(navigator.clipboard.writeText(i),alert("Code copied to clipboard!"))};if(u)return P.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center",children:[P.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-red-500 rounded-full animate-spin mb-4"}),P.jsx("p",{className:"text-slate-500 font-bold animate-pulse",children:"PREPARING LOBBY..."})]});if(y)return P.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4 text-center",children:[P.jsx("div",{className:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center text-red-500 mb-6",children:P.jsx(vx,{size:40})}),P.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Something went wrong"}),P.jsx("p",{className:"text-slate-500 mb-8 max-w-xs",children:y}),P.jsx("button",{onClick:()=>T("/"),className:"bg-slate-900 text-white px-8 py-3 rounded-2xl font-bold",children:"GO BACK"})]});if(!a)return null;const M={RED:"bg-red-500",GREEN:"bg-green-500",YELLOW:"bg-yellow-500",BLUE:"bg-blue-500"},D={RED:"bg-red-50",GREEN:"bg-green-50",YELLOW:"bg-yellow-50",BLUE:"bg-blue-50"};return P.jsx("div",{className:"min-h-screen bg-slate-50 p-4 md:p-8 flex flex-col items-center",children:P.jsxs("div",{className:"w-full max-w-2xl",children:[P.jsxs("button",{onClick:()=>T("/"),className:"flex items-center gap-2 text-slate-400 hover:text-slate-900 font-bold transition-colors mb-8 group",children:[P.jsx(aS,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),"LEAVE LOBBY"]}),P.jsxs("div",{className:"grid md:grid-cols-[1fr_300px] gap-8",children:[P.jsxs("div",{children:[P.jsxs("div",{className:"mb-8",children:[P.jsx("h1",{className:"text-4xl font-black text-slate-900 mb-2",children:"Ludo Room"}),P.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[P.jsx("span",{className:"font-bold",children:"CODE:"}),P.jsx("span",{className:"font-mono text-xl text-slate-900 bg-white px-3 py-1 rounded-lg border border-slate-100 shadow-sm",children:i}),P.jsx("button",{onClick:x,className:"p-2 hover:bg-white rounded-lg transition-colors text-slate-900",children:P.jsx(gx,{size:18})})]})]}),P.jsxs("div",{className:"space-y-3",children:[P.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4",children:["Players (",a.players.length,"/4)"]}),P.jsx(Yb,{mode:"popLayout",children:a.players.map(B=>P.jsxs(Xs.div,{layout:!0,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},exit:{x:20,opacity:0},className:"flex items-center justify-between p-4 bg-white rounded-2xl border border-slate-100 shadow-sm",children:[P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsxs("div",{className:`w-12 h-12 rounded-xl ${D[B.color]} flex items-center justify-center relative`,children:[P.jsx("div",{className:`w-4 h-4 rounded-full ${M[B.color]} shadow-sm`}),B.kind==="BOT"&&P.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-slate-900 rounded-full flex items-center justify-center text-white border-2 border-white",children:P.jsx(hx,{size:10})})]}),P.jsxs("div",{children:[P.jsx("div",{className:"font-black text-slate-900",children:B.name}),P.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase tracking-tighter",children:B.kind==="BOT"?"Artificial Intelligence":"Human Player"})]})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("div",{className:`w-2 h-2 rounded-full ${B.connected?"bg-green-500 animate-pulse":"bg-slate-200"}`}),P.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:B.connected?"Online":"Offline"})]})]},B.id))}),Array.from({length:4-a.players.length}).map((B,X)=>P.jsxs("div",{className:"p-6 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200 flex flex-col items-center justify-center text-slate-300",children:[P.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-slate-200 mb-2 border-dashed"}),P.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Waiting for player..."})]},X))]})]}),P.jsx("div",{className:"flex flex-col gap-4",children:P.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-100 shadow-sm sticky top-8",children:[P.jsx("h3",{className:"font-black text-slate-900 mb-4 flex items-center gap-2",children:"Game Controls"}),P.jsxs("div",{className:"space-y-3",children:[P.jsxs("button",{onClick:A,disabled:a.players.length>=4,className:"w-full flex items-center justify-center gap-3 bg-slate-50 hover:bg-slate-100 text-slate-900 font-bold py-4 rounded-2xl transition-all border border-slate-100 disabled:opacity-50",children:[P.jsx(Tx,{size:20}),P.jsx("span",{children:"ADD BOT"})]}),P.jsxs("button",{onClick:w,disabled:a.players.length<2,className:"w-full flex items-center justify-center gap-3 bg-slate-900 hover:bg-slate-800 text-white font-bold py-5 rounded-2xl transition-all shadow-xl shadow-slate-200 disabled:opacity-30 disabled:grayscale",children:[P.jsx(rS,{size:20,fill:"currentColor"}),P.jsx("span",{children:"START GAME"})]})]}),P.jsx("div",{className:"mt-8 pt-8 border-t border-slate-100",children:P.jsxs("p",{className:"text-[10px] text-slate-400 font-bold leading-relaxed",children:["* NEED AT LEAST 2 PLAYERS TO START.",P.jsx("br",{}),"* ONLY THE CREATOR CAN ADD BOTS OR START."]})})]})})]})]})})}var Gu={exports:{}};var xx=Gu.exports,Q0;function Ox(){return Q0||(Q0=1,(function(i,a){(function(c,u){i.exports=u()})(xx,()=>{var c={},u={exports:c},m=Object.defineProperty,y=Object.defineProperties,g=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,C=Object.getOwnPropertyNames,A=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,M=(s,r,l)=>r in s?m(s,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[r]=l,D=(s,r)=>{for(var l in r||(r={}))w.call(r,l)&&M(s,l,r[l]);if(A)for(var l of A(r))x.call(r,l)&&M(s,l,r[l]);return s},B=(s,r)=>y(s,T(r)),X=(s,r)=>{var l={};for(var d in s)w.call(s,d)&&r.indexOf(d)<0&&(l[d]=s[d]);if(s!=null&&A)for(var d of A(s))r.indexOf(d)<0&&x.call(s,d)&&(l[d]=s[d]);return l},H=(s,r)=>{for(var l in r)m(s,l,{get:r[l],enumerable:!0})},F=(s,r,l,d)=>{if(r&&typeof r=="object"||typeof r=="function")for(let p of C(r))!w.call(s,p)&&p!==l&&m(s,p,{get:()=>r[p],enumerable:!(d=g(r,p))||d.enumerable});return s},W=s=>F(m({},"__esModule",{value:!0}),s),Y=function(s,r){this[0]=s,this[1]=r},re=(s,r,l)=>{var d=(E,O,V,j)=>{try{var Z=l[E](O),$=(O=Z.value)instanceof Y,oe=Z.done;Promise.resolve($?O[0]:O).then(J=>$?d(E==="return"?E:"next",O[1]?{done:J.done,value:J.value}:J,V,j):V({value:J,done:oe})).catch(J=>d("throw",J,V,j))}catch(J){j(J)}},p=E=>v[E]=O=>new Promise((V,j)=>d(E,O,V,j)),v={};return l=l.apply(s,r),v[Symbol.asyncIterator]=()=>v,p("next"),p("throw"),p("return"),v},ae={};H(ae,{ErrorInfo:()=>_,Realtime:()=>vt,Rest:()=>Do,default:()=>Gc,makeProtocolMessageFromDeserialized:()=>rr,msgpack:()=>Ar}),u.exports=W(ae);var G=class{},me=typeof Is<"u"?Is:typeof window<"u"?window:self;function ce(s,r){return`${s}`.padStart(r?3:2,"0")}function be(s){return G.Config.logTimestamps?function(r){const l=new Date;s(ce(l.getHours())+":"+ce(l.getMinutes())+":"+ce(l.getSeconds())+"."+ce(l.getMilliseconds(),1)+" "+r)}:function(r){s(r)}}var Pe=()=>{var s;let r,l;return typeof((s=me?.console)==null?void 0:s.log)=="function"?(r=function(...d){console.log.apply(console,d)},l=console.warn?function(...d){console.warn.apply(console,d)}:r):r=l=function(){},[r,l].map(be)},He=class Ol{constructor(){this.deprecated=(r,l)=>{this.deprecationWarning(`${r} is deprecated and will be removed in a future version. ${l}`)},this.shouldLog=r=>r<=this.logLevel,this.setLog=(r,l)=>{r!==void 0&&(this.logLevel=r),l!==void 0&&(this.logHandler=this.logErrorHandler=l)},this.logLevel=Ol.defaultLogLevel,this.logHandler=Ol.defaultLogHandler,this.logErrorHandler=Ol.defaultLogErrorHandler}static initLogHandlers(){const[r,l]=Pe();this.defaultLogHandler=r,this.defaultLogErrorHandler=l,this.defaultLogger=new Ol}static logActionNoStrip(r,l,d,p){r.logAction(l,d,p)}logAction(r,l,d){this.shouldLog(r)&&(r===1?this.logErrorHandler:this.logHandler)("Ably: "+l+": "+d,r)}renamedClientOption(r,l){this.deprecationWarning(`The \`${r}\` client option has been renamed to \`${l}\`. Please update your code to use \`${l}\` instead. \`${r}\` will be removed in a future version.`)}renamedMethod(r,l,d){this.deprecationWarning(`\`${r}\`s \`${l}\` method has been renamed to \`${d}\`. Please update your code to use \`${d}\` instead. \`${l}\` will be removed in a future version.`)}deprecationWarning(r){this.shouldLog(1)&&this.logErrorHandler(`Ably: Deprecation warning - ${r}`,1)}};He.defaultLogLevel=1,He.LOG_NONE=0,He.LOG_ERROR=1,He.LOG_MAJOR=2,He.LOG_MINOR=3,He.LOG_MICRO=4,He.logAction=(s,r,l,d)=>{He.logActionNoStrip(s,r,l,d)};var ut=He,S=ut,_t={};H(_t,{Format:()=>Zr,allSame:()=>rf,allToLowerCase:()=>xi,allToUpperCase:()=>Ht,arrChooseN:()=>Wl,arrDeleteValue:()=>Ga,arrEquals:()=>na,arrIntersect:()=>is,arrIntersectOb:()=>Ws,arrPopRandomElement:()=>Zs,arrWithoutValue:()=>Ql,cheapRandStr:()=>$s,containsValue:()=>Ut,copy:()=>Oe,createMissingPluginError:()=>En,dataSizeBytes:()=>$r,decodeBody:()=>St,encodeBody:()=>yn,ensureArray:()=>U,forInOwnNonNullProperties:()=>qa,getBackoffCoefficient:()=>Gn,getGlobalObject:()=>to,getJitterCoefficient:()=>qt,getRetryTime:()=>eo,inherits:()=>Ve,inspectBody:()=>Fl,inspectError:()=>Me,intersect:()=>nt,isEmpty:()=>fe,isErrorInfoOrPartialErrorInfo:()=>Jr,isNil:()=>he,isObject:()=>ne,keysArray:()=>gn,listenerToAsyncIterator:()=>of,matchDerivedChannel:()=>ta,mixin:()=>ue,parseQueryString:()=>Ia,prototypicalClone:()=>De,randomString:()=>ea,shallowClone:()=>Ee,shallowEquals:()=>Zl,stringifyValues:()=>Js,throwMissingPluginError:()=>mt,toBase64:()=>Oi,toQueryString:()=>Ei,valuesArray:()=>Ha,whenPromiseSettles:()=>Gt,withTimeoutAsync:()=>ss});function kt(s){let r="["+s.constructor.name;return s.message&&(r+=": "+s.message),s.statusCode&&(r+="; statusCode="+s.statusCode),s.code&&(r+="; code="+s.code),s.cause&&(r+="; cause="+Me(s.cause)),s.href&&!(s.message&&s.message.indexOf("help.ably.io")>-1)&&(r+="; see "+s.href+" "),r+="]",r}var _=class qd extends Error{constructor(r,l,d,p){super(r),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,qd.prototype),this.code=l,this.statusCode=d,this.cause=p}toString(){return kt(this)}static fromValues(r){const{message:l,code:d,statusCode:p}=r;if(typeof l!="string"||typeof d!="number"||typeof p!="number")throw new Error("ErrorInfo.fromValues(): invalid values: "+G.Config.inspect(r));const v=Object.assign(new qd(l,d,p),r);return v.code&&!v.href&&(v.href="https://help.ably.io/error/"+v.code),v}},se=class Id extends Error{constructor(r,l,d,p){super(r),typeof Object.setPrototypeOf<"u"&&Object.setPrototypeOf(this,Id.prototype),this.code=l,this.statusCode=d,this.cause=p}toString(){return kt(this)}static fromValues(r){const{message:l,code:d,statusCode:p}=r;if(typeof l!="string"||!he(d)&&typeof d!="number"||!he(p)&&typeof p!="number")throw new Error("PartialErrorInfo.fromValues(): invalid values: "+G.Config.inspect(r));const v=Object.assign(new Id(l,d,p),r);return v.code&&!v.href&&(v.href="https://help.ably.io/error/"+v.code),v}};function ye(s){return Math.floor(Math.random()*s.length)}function ue(s,...r){for(let l=0;l<r.length;l++){const d=r[l];if(!d)break;for(const p in d)Object.prototype.hasOwnProperty.call(d,p)&&(s[p]=d[p])}return s}function Oe(s){return ue({},s)}function U(s){return he(s)?[]:Array.isArray(s)?s:[s]}function ne(s){return Object.prototype.toString.call(s)=="[object Object]"}function fe(s){for(const r in s)return!1;return!0}function he(s){return s==null}function Ee(s){const r=new Object;for(const l in s)r[l]=s[l];return r}function De(s,r){class l{}l.prototype=s;const d=new l;return r&&ue(d,r),d}var Ve=function(s,r){if(G.Config.inherits){G.Config.inherits(s,r);return}s.super_=r,s.prototype=De(r.prototype,{constructor:s})};function Ut(s,r){for(const l in s)if(s[l]==r)return!0;return!1}function nt(s,r){return Array.isArray(r)?is(s,r):Ws(s,r)}function is(s,r){const l=[];for(let d=0;d<s.length;d++){const p=s[d];r.indexOf(p)!=-1&&l.push(p)}return l}function Ws(s,r){const l=[];for(let d=0;d<s.length;d++){const p=s[d];p in r&&l.push(p)}return l}function Ga(s,r){const l=s.indexOf(r),d=l!=-1;return d&&s.splice(l,1),d}function Ql(s,r){const l=s.slice();return Ga(l,r),l}function gn(s,r){const l=[];for(const d in s)r&&!Object.prototype.hasOwnProperty.call(s,d)||l.push(d);return l}function Ha(s,r){const l=[];for(const d in s)r&&!Object.prototype.hasOwnProperty.call(s,d)||l.push(s[d]);return l}function qa(s,r){for(const l in s)Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&r(l)}function rf(s,r){if(s.length===0)return!0;const l=s[0][r];return s.every(function(d){return d[r]===l})}var Zr=(s=>(s.msgpack="msgpack",s.json="json",s))(Zr||{});function Zs(s){return s.splice(ye(s),1)[0]}function Ei(s){const r=[];if(s)for(const l in s)r.push(encodeURIComponent(l)+"="+encodeURIComponent(s[l]));return r.length?"?"+r.join("&"):""}function Js(s){return Object.fromEntries(Object.entries(s).map(([r,l])=>[r,String(l)]))}function Ia(s){let r;const l=/([^?&=]+)=?([^&]*)/g,d={};for(;r=l.exec(s);)d[decodeURIComponent(r[1])]=decodeURIComponent(r[2]);return d}function Jr(s){return typeof s=="object"&&s!==null&&(s instanceof _||s instanceof se)}function Me(s){var r,l;return s instanceof Error||((r=s?.constructor)==null?void 0:r.name)==="ErrorInfo"||((l=s?.constructor)==null?void 0:l.name)==="PartialErrorInfo"?s.toString():G.Config.inspect(s)}function Fl(s){return G.BufferUtils.isBuffer(s)?s.toString():typeof s=="string"?s:G.Config.inspect(s)}function $r(s){if(G.BufferUtils.isBuffer(s))return G.BufferUtils.byteLength(s);if(typeof s=="string")return G.Config.stringByteSize(s);if(typeof s=="number")return 8;if(typeof s=="boolean")return 1;throw new Error(`Expected input of Utils.dataSizeBytes to be a string, a number, a boolean or a buffer, but was: ${typeof s}`)}function $s(){return String(Math.random()).substr(2)}var ea=async s=>{const r=await G.Config.getRandomArrayBuffer(s);return G.BufferUtils.base64Encode(r)};function Wl(s,r){const l=Math.min(r,s.length),d=s.slice(),p=[];for(let v=0;v<l;v++)p.push(Zs(d));return p}function Gt(s,r){s.then(l=>{r?.(null,l)}).catch(l=>{r?.(l)})}function St(s,r,l){return l=="msgpack"?(r||mt("MsgPack"),r.decode(s)):JSON.parse(String(s))}function yn(s,r,l){return l=="msgpack"?(r||mt("MsgPack"),r.encode(s,!0)):JSON.stringify(s)}function xi(s){return s.map(function(r){return r&&r.toLowerCase()})}function Ht(s){return s.map(function(r){return r&&r.toUpperCase()})}function Gn(s){return Math.min((s+2)/3,2)}function qt(){return 1-Math.random()*.2}function eo(s,r){return s*Gn(r)*qt()}function to(){return typeof Is<"u"?Is:typeof window<"u"?window:self}function Zl(s,r){return Object.keys(s).every(l=>s[l]===r[l])&&Object.keys(r).every(l=>r[l]===s[l])}function ta(s){const r=/^(\[([^?]*)(?:(.*))\])?(.+)$/,l=s.match(r);if(!l||!l.length||l.length<5)throw new _("regex match failed",400,40010);if(l[2])throw new _(`cannot use a derived option with a ${l[2]} channel`,400,40010);return{qualifierParam:l[3]||"",channelName:l[4]}}function Oi(s){const r=G.BufferUtils,l=r.utf8Encode(s);return r.base64Encode(l)}function na(s,r){return s.length===r.length&&s.every(function(l,d){return l===r[d]})}function En(s){return new _(`${s} plugin not provided`,40019,400)}function mt(s){throw En(s)}async function ss(s,r=5e3,l="Timeout expired"){const d=new _(l,5e4,500);return Promise.race([s,new Promise((p,v)=>setTimeout(()=>v(d),r))])}function of(s){return re(this,null,function*(){const r=[];let l=null;const d=s(p=>{if(l){const v=l;l=null,v(p)}else r.push(p)});try{for(;;)if(r.length>0)yield r.shift();else{if(l)throw new _("Concurrent next() calls are not supported",4e4,400);yield yield new Y(new Promise(v=>{l=v}))}}finally{d()}})}var no="2.17.1",io="ably-js/"+no,jt={ENDPOINT:"main",ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["main.a.fallback.ably-realtime.com","main.b.fallback.ably-realtime.com","main.c.fallback.ably-realtime.com","main.d.fallback.ably-realtime.com","main.e.fallback.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:no,protocolVersion:5,agent:io,getPort:lf,getHttpScheme:Jl,getPrimaryDomainFromEndpoint:ao,getEndpointFallbackHosts:Ya,getFallbackHosts:ro,getHosts:$l,checkHost:Hn,objectifyOptions:as,normaliseOptions:cf,defaultGetHeaders:co,defaultPostHeaders:os};function lf(s,r){return r||s.tls?s.tlsPort:s.port}function Jl(s){return s.tls?"https://":"http://"}function so(s){return s.includes(".")||s.includes("::")||s==="localhost"}function ao(s){return so(s)?s:s.startsWith("nonprod:")?`${s.replace("nonprod:","")}.realtime.ably-nonprod.net`:`${s}.realtime.ably.net`}function Ya(s){if(so(s))return[];if(s.startsWith("nonprod:")){const r=s.replace("nonprod:","");return Ka(r,"ably-realtime-nonprod.com")}return Ka(s,"ably-realtime.com")}function Ka(s,r){return["a","b","c","d","e"].map(l=>`${s}.${l}.fallback.${r}`)}function ro(s){const r=s.fallbackHosts,l=typeof s.httpMaxRetryCount<"u"?s.httpMaxRetryCount:jt.httpMaxRetryCount;return r?Wl(r,l):[]}function $l(s){return[s.primaryDomain].concat(ro(s))}function Hn(s){if(typeof s!="string")throw new _("host must be a string; was a "+typeof s,4e4,400);if(!s.length)throw new _("host must not be zero-length",4e4,400)}function Rt(s){const r={};for(const l in jt.TIMEOUTS)r[l]=s[l]||jt.TIMEOUTS[l];return r}function Nt(s){let r=jt.agent;if(s.agents)for(var l in s.agents)r+=" "+l+"/"+s.agents[l];return r}function as(s,r,l,d,p){if(s===void 0){const E=r?`${l} must be initialized with either a client options object, an Ably API key, or an Ably Token`:`${l} must be initialized with a client options object`;throw S.logAction(d,S.LOG_ERROR,`${l}()`,E),new Error(E)}let v;if(typeof s=="string")if(s.indexOf(":")==-1){if(!r){const E=`${l} cannot be initialized with just an Ably Token; you must provide a client options object with a \`plugins\` property. (Set this Ably Token as the objects \`token\` property.)`;throw S.logAction(d,S.LOG_ERROR,`${l}()`,E),new Error(E)}v={token:s}}else{if(!r){const E=`${l} cannot be initialized with just an Ably API key; you must provide a client options object with a \`plugins\` property. (Set this Ably API key as the objects \`key\` property.)`;throw S.logAction(d,S.LOG_ERROR,`${l}()`,E),new Error(E)}v={key:s}}else v=s;return p&&(v=B(D({},v),{plugins:D(D({},p),v.plugins)})),v}function oo(s){if(s.endpoint&&(s.environment||s.restHost||s.realtimeHost))throw new _("The `endpoint` option cannot be used in conjunction with the `environment`, `restHost`, or `realtimeHost` options.",40106,400);if(s.environment&&(s.restHost||s.realtimeHost))throw new _("The `environment` option cannot be used in conjunction with the `restHost`, or `realtimeHost` options.",40106,400)}function cf(s,r,l){const d=l??S.defaultLogger;s.environment&&d.deprecated("The `environment` client option","Use the `endpoint` client option instead."),s.restHost&&d.deprecated("The `restHost` client option","Use the `endpoint` client option instead."),s.realtimeHost&&d.deprecated("The `realtimeHost` client option","Use the `endpoint` client option instead."),oo(s),typeof s.recover=="function"&&s.closeOnUnload===!0&&(S.logAction(d,S.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),s.recover=void 0),"closeOnUnload"in s||(s.closeOnUnload=!s.recover),"queueMessages"in s||(s.queueMessages=!0);const p=s.endpoint||jt.ENDPOINT;!s.fallbackHosts&&!s.restHost&&!s.realtimeHost&&!s.port&&!s.tlsPort&&(s.fallbackHosts=Ya(s.environment||p));const v=s.environment&&`${s.environment}.realtime.ably.net`,O=s.restHost||s.realtimeHost||v||ao(p);(s.fallbackHosts||[]).concat(O).forEach(Hn),s.port=s.port||jt.PORT,s.tlsPort=s.tlsPort||jt.TLS_PORT,"tls"in s||(s.tls=!0);const V=Rt(s);r?"useBinaryProtocol"in s?s.useBinaryProtocol=G.Config.supportsBinary&&s.useBinaryProtocol:s.useBinaryProtocol=G.Config.preferBinary:s.useBinaryProtocol=!1;const j={};s.clientId&&(j["X-Ably-ClientId"]=G.BufferUtils.base64Encode(G.BufferUtils.utf8Encode(s.clientId))),"idempotentRestPublishing"in s||(s.idempotentRestPublishing=!0);let Z=null,$=s.connectivityCheckUrl;if(s.connectivityCheckUrl){let[J,le]=s.connectivityCheckUrl.split("?");Z=le?Ia(le):{},J.indexOf("://")===-1&&(J="https://"+J),$=J}let oe=s.wsConnectivityCheckUrl;return oe&&oe.indexOf("://")===-1&&(oe="wss://"+oe),B(D({},s),{primaryDomain:O,maxMessageSize:s.maxMessageSize||jt.maxMessageSize,timeouts:V,connectivityCheckParams:Z,connectivityCheckUrl:$,wsConnectivityCheckUrl:oe,headers:j})}function Xa(s,r,l){const d=l||{};if(d.cipher){s||mt("Crypto");const p=s.getCipher(d.cipher,r);d.cipher=p.cipherParams,d.channelCipher=p.cipher}else"cipher"in d&&(d.cipher=void 0,d.channelCipher=null);return d}var lo={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},rs={protocolVersion:jt.protocolVersion};function co(s,{format:r,protocolVersion:l=rs.protocolVersion}={}){return{accept:lo[r??(s.useBinaryProtocol?"msgpack":"json")],"X-Ably-Version":l.toString(),"Ably-Agent":Nt(s)}}function os(s,{format:r,protocolVersion:l=rs.protocolVersion}={}){const d=lo[r??(s.useBinaryProtocol?"msgpack":"json")];return{accept:d,"content-type":d,"X-Ably-Version":l.toString(),"Ably-Agent":Nt(s)}}var Se=jt;function ia(s){return Object.assign(jt,s)}var ls=class cS{constructor(r,l){this.logger=r,this.members=l||[]}call(r,l){for(const d of this.members)if(d)try{d(r,l)}catch(p){S.logAction(this.logger,S.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+p+"; stack = "+p.stack)}}push(...r){this.members.push(...r)}createPromise(){return new Promise((r,l)=>{this.push((d,p)=>{d?l(d):r(p)})})}resolveAll(r){this.call(null,r)}rejectAll(r){this.call(r)}static create(r,l){const d=new cS(r,l);return Object.assign((p,v)=>d.call(p,v),{push:p=>d.push(p),createPromise:()=>d.createPromise(),resolveAll:p=>d.resolveAll(p),rejectAll:p=>d.rejectAll(p)})}},pt=ls,uo=(s=>(s.Get="get",s.Delete="delete",s.Post="post",s.Put="put",s.Patch="patch",s))(uo||{}),it=uo,ii=(s=>(s[s.Success=200]="Success",s[s.NoContent=204]="NoContent",s[s.BadRequest=400]="BadRequest",s[s.Unauthorized=401]="Unauthorized",s[s.Forbidden=403]="Forbidden",s[s.RequestTimeout=408]="RequestTimeout",s[s.InternalServerError=500]="InternalServerError",s))(ii||{});function cs(s){return s>=200&&s<400}var Qa=ii,Fa=Math.pow(2,17);function ec(){return("000000"+Math.floor(Math.random()*1e16)).slice(-16)}function uf(s){return!!s.connection}function sa(s){return Jr(s)?(s.code||(s.statusCode===403?s.code=40300:(s.code=40170,s.statusCode=401)),s):new _(Me(s),s.code||40170,s.statusCode||401)}var Wa=(s,r)=>{const l=G.BufferUtils,d=l.utf8Encode(s),p=l.utf8Encode(r),v=l.hmacSha256(d,p);return l.base64Encode(v)};function xn(s){if(!s)return"";typeof s=="string"&&(s=JSON.parse(s));const r=Object.create(null),l=gn(s,!0);if(!l)return"";l.sort();for(let d=0;d<l.length;d++)r[l[d]]=s[l[d]].sort();return JSON.stringify(r)}function Wt(s,r){if(s.authCallback)S.logAction(r,S.LOG_MINOR,"Auth()","using token auth with authCallback");else if(s.authUrl)S.logAction(r,S.LOG_MINOR,"Auth()","using token auth with authUrl");else if(s.key)S.logAction(r,S.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(s.tokenDetails)S.logAction(r,S.LOG_MINOR,"Auth()","using token auth with supplied token only");else{const l="authOptions must include valid authentication parameters";throw S.logAction(r,S.LOG_ERROR,"Auth()",l),new Error(l)}}function tc(s){return"useTokenAuth"in s&&!s.useTokenAuth}function nc(s){return s.useTokenAuth||!tc(s)&&(s.authCallback||s.authUrl||s.token||s.tokenDetails)}function fo(s){return!s.key&&!s.authCallback&&!s.authUrl}var ic=0;function Za(){return ic++}var ff=class{constructor(s,r){if(this.authOptions={},this.client=s,this.tokenParams=r.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,nc(r))fo(r)&&S.logAction(this.logger,S.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(r.defaultTokenParams,r),Wt(this.authOptions,this.logger);else{if(!r.key){const l="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw S.logAction(this.logger,S.LOG_ERROR,"Auth()",l),new _(l,40160,401)}S.logAction(this.logger,S.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(r)}}get logger(){return this.client.logger}async authorize(s,r){if(r&&r.key&&this.authOptions.key!==r.key)throw new _("Unable to update auth options with incompatible key",40102,401);try{let l=await this._forceNewToken(s??null,r??null);return uf(this.client)?new Promise((d,p)=>{this.client.connection.connectionManager.onAuthUpdated(l,(v,E)=>v?p(v):d(E))}):l}catch(l){throw this.client.connection&&l.statusCode===Qa.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(l),l}}async _forceNewToken(s,r){this.tokenDetails=null,this._saveTokenOptions(s,r),Wt(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(s,r){const l=r||this.authOptions,d=s||Oe(this.tokenParams);let p,v=this.client;if(l.authCallback)S.logAction(this.logger,S.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),p=l.authCallback;else if(l.authUrl)S.logAction(this.logger,S.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),p=(O,V)=>{const j=ue({accept:"application/json, text/plain"},l.authHeaders),Z=l.authMethod&&l.authMethod.toLowerCase()==="post";let $;const oe=l.authUrl.indexOf("?");oe>-1&&($=Ia(l.authUrl.slice(oe)),l.authUrl=l.authUrl.slice(0,oe),Z||(l.authParams=ue($,l.authParams)));const J=ue({},l.authParams||{},O),le=de=>{var Ce,Be;let qe=(Ce=de.body)!=null?Ce:null,Fe=null;if(de.error)S.logAction(this.logger,S.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+Me(de.error));else{const Tt=(Be=de.headers["content-type"])!=null?Be:null;Array.isArray(Tt)?Fe=Tt.join(", "):Fe=Tt,S.logAction(this.logger,S.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+Fe+"; body: "+Fl(qe))}if(de.error){V(de.error,null);return}if(de.unpacked){V(null,qe);return}if(G.BufferUtils.isBuffer(qe)&&(qe=qe.toString()),!Fe){V(new _("authUrl response is missing a content-type header",40170,401),null);return}const Re=Fe.indexOf("application/json")>-1,Bt=Fe.indexOf("text/plain")>-1||Fe.indexOf("application/jwt")>-1;if(!Re&&!Bt){V(new _("authUrl responded with unacceptable content-type "+Fe+", should be either text/plain, application/jwt or application/json",40170,401),null);return}if(Re){if(qe.length>Fa){V(new _("authUrl response exceeded max permitted length",40170,401),null);return}try{qe=JSON.parse(qe)}catch(Tt){V(new _("Unexpected error processing authURL response; err = "+Tt.message,40170,401),null);return}}V(null,qe,Fe)};if(S.logAction(this.logger,S.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+l.authUrl+"; Params: "+JSON.stringify(J)+"; method: "+(Z?"POST":"GET")),Z){const de=j||{};de["content-type"]="application/x-www-form-urlencoded";const Ce=Ei(J).slice(1);Gt(this.client.http.doUri(it.Post,l.authUrl,de,Ce,$),(Be,qe)=>le(Be||qe))}else Gt(this.client.http.doUri(it.Get,l.authUrl,j||{},null,J),(de,Ce)=>le(de||Ce))};else if(l.key)S.logAction(this.logger,S.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),p=(O,V)=>{Gt(this.createTokenRequest(O,l),(j,Z)=>V(j,Z??null))};else{const O="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw S.logAction(this.logger,S.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new _(O,40171,403)}"capability"in d&&(d.capability=xn(d.capability));const E=(O,V)=>{const j=O.keyName,Z="/keys/"+j+"/requestToken",$=function(J){return v.baseUri(J)+Z},oe=Se.defaultPostHeaders(this.client.options,{format:"json"});l.requestHeaders&&ue(oe,l.requestHeaders),S.logAction(this.logger,S.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+Z+"; Token params: "+JSON.stringify(O)),Gt(this.client.http.do(it.Post,$,oe,JSON.stringify(O),null),(J,le)=>J?V(J):V(le.error,le.body,le.unpacked))};return new Promise((O,V)=>{let j=!1,Z=this.client.options.timeouts.realtimeRequestTimeout,$=setTimeout(()=>{j=!0;const oe="Token request callback timed out after "+Z/1e3+" seconds";S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()",oe),V(new _(oe,40170,401))},Z);p(d,(oe,J,le)=>{if(j)return;if(clearTimeout($),oe){S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+Me(oe)),V(sa(oe));return}if(typeof J=="string"){J.length===0?V(new _("Token string is empty",40170,401)):J.length>Fa?V(new _("Token string exceeded max permitted length (was "+J.length+" bytes)",40170,401)):J==="undefined"||J==="null"?V(new _("Token string was literal null/undefined",40170,401)):J[0]==="{"&&!(le&&le.indexOf("application/jwt")>-1)?V(new _("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)):O({token:J});return}if(typeof J!="object"||J===null){const Ce="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof J;S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()",Ce),V(new _(Ce,40170,401));return}const de=JSON.stringify(J).length;if(de>Fa&&!l.suppressMaxLengthCheck){V(new _("Token request/details object exceeded max permitted stringified size (was "+de+" bytes)",40170,401));return}if("issued"in J){O(J);return}if(!("keyName"in J)){const Ce="Expected token request callback to call back with a token string, token request object, or token details object";S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()",Ce),V(new _(Ce,40170,401));return}E(J,(Ce,Be,qe)=>{if(Ce){S.logAction(this.logger,S.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+Me(Ce)),V(sa(Ce));return}qe||(Be=JSON.parse(Be)),S.logAction(this.logger,S.LOG_MINOR,"Auth.getToken()","token received"),O(Be)})})})}async createTokenRequest(s,r){r=r||this.authOptions,s=s||Oe(this.tokenParams);const l=r.key;if(!l)throw new _("No key specified",40101,403);const d=l.split(":"),p=d[0],v=d[1];if(!v)throw new _("Invalid key specified",40101,403);if(s.clientId==="")throw new _("clientId cant be an empty string",40012,400);"capability"in s&&(s.capability=xn(s.capability));const E=ue({keyName:p},s),O=s.clientId||"",V=s.ttl||"",j=s.capability||"";E.timestamp||(E.timestamp=await this._getTimestamp(r&&r.queryTime));const Z=E.nonce||(E.nonce=ec()),$=E.timestamp,oe=E.keyName+`
`+V+`
`+j+`
`+O+`
`+$+`
`+Z+`
`;return E.mac=E.mac||Wa(oe,v),S.logAction(this.logger,S.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),E}async getAuthParams(){if(this.method=="basic")return{key:this.key};{let s=await this._ensureValidAuthCredentials(!1);if(!s)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:s.token}}}async getAuthHeaders(){if(this.method=="basic")return{authorization:"Basic "+this.basicKey};{const s=await this._ensureValidAuthCredentials(!1);if(!s)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+Oi(s.token)}}}_saveBasicOptions(s){this.method="basic",this.key=s.key,this.basicKey=Oi(s.key),this.authOptions=s||{},"clientId"in s&&this._userSetClientId(s.clientId)}_saveTokenOptions(s,r){this.method="token",s&&(this.tokenParams=s),r&&(r.token&&(r.tokenDetails=typeof r.token=="string"?{token:r.token}:r.token),r.tokenDetails&&(this.tokenDetails=r.tokenDetails),"clientId"in r&&this._userSetClientId(r.clientId),this.authOptions=r)}async _ensureValidAuthCredentials(s){const r=this.tokenDetails;if(r){if(this._tokenClientIdMismatch(r.clientId))throw new _("Mismatch between clientId in token ("+r.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.client.isTimeOffsetSet()||!r.expires||r.expires>=this.client.getTimestampUsingOffset())return S.logAction(this.logger,S.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+r.expires),r;S.logAction(this.logger,S.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const l=(this.waitingForTokenRequest||(this.waitingForTokenRequest=pt.create(this.logger))).createPromise();if(this.currentTokenRequestId!==null&&!s)return l;const d=this.currentTokenRequestId=Za();let p,v=null;try{p=await this.requestToken(this.tokenParams,this.authOptions)}catch(O){v=O}if(this.currentTokenRequestId>d)return S.logAction(this.logger,S.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),l;this.currentTokenRequestId=null;const E=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,v?(E?.rejectAll(v),l):(E?.resolveAll(this.tokenDetails=p),l)}_userSetClientId(s){if(typeof s=="string"||s===null){if(s==="*")throw new _('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const r=this._uncheckedSetClientId(s);if(r)throw r}}else throw new _("clientId must be either a string or null",40012,400)}_uncheckedSetClientId(s){if(this._tokenClientIdMismatch(s)){const r="Unexpected clientId mismatch: client has "+this.clientId+", requested "+s,l=new _(r,40102,401);return S.logAction(this.logger,S.LOG_ERROR,"Auth._uncheckedSetClientId()",r),l}else return this.clientId=this.tokenParams.clientId=s,null}_tokenClientIdMismatch(s){return!!(this.clientId&&this.clientId!=="*"&&s&&s!=="*"&&this.clientId!==s)}static isTokenErr(s){return s.code&&s.code>=40140&&s.code<40150}revokeTokens(s,r){return this.client.rest.revokeTokens(s,r)}async _getTimestamp(s){return this.client.getTimestamp(s||!!this.authOptions.queryTime)}},ft=ff;function aa(s){const r=[];if(s)for(const l in s)r.push(l+"="+s[l]);return r.join("&")}function Mi(s,r){return s+(r?"?":"")+aa(r)}function ho(s,r,l,d,p){s.error?S.logActionNoStrip(p,S.LOG_MICRO,"Http."+r+"()","Received Error; "+Mi(l,d)+"; Error: "+Me(s.error)):S.logActionNoStrip(p,S.LOG_MICRO,"Http."+r+"()","Received; "+Mi(l,d)+"; Headers: "+aa(s.headers)+"; StatusCode: "+s.statusCode+"; Body"+(G.BufferUtils.isBuffer(s.body)?" (Base64): "+G.BufferUtils.base64Encode(s.body):": "+s.body))}function us(s,r,l,d,p){p.shouldLog(S.LOG_MICRO)&&S.logActionNoStrip(p,S.LOG_MICRO,"Http."+s+"()","Sending; "+Mi(r,d)+"; Body"+(G.BufferUtils.isBuffer(l)?" (Base64): "+G.BufferUtils.base64Encode(l):": "+l))}var Ja=class{constructor(s){this.client=s,this.platformHttp=new G.Http(s),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var s,r;return(r=(s=this.client)==null?void 0:s.logger)!=null?r:S.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(s){const r=s.connection,l=r&&r.connectionManager.host;return l?[l].concat(Se.getFallbackHosts(s.options)):Se.getHosts(s.options)}async do(s,r,l,d,p){try{const v=this.client;if(!v)return{error:new _("http.do called without client",5e4,500)};const E=typeof r=="function"?r:function($){return v.baseUri($)+r},O=v._currentFallback;if(O)if(O.validUntil>Date.now()){const $=await this.doUri(s,E(O.host),l,d,p);return $.error&&this.platformHttp.shouldFallback($.error)?(v._currentFallback=null,this.do(s,r,l,d,p)):$}else v._currentFallback=null;const V=this._getHosts(v);if(V.length===1)return this.doUri(s,E(V[0]),l,d,p);let j=null;const Z=async($,oe)=>{const J=$.shift();j=j??new Date;const le=await this.doUri(s,E(J),l,d,p);return le.error&&this.platformHttp.shouldFallback(le.error)&&$.length?Date.now()-j.getTime()>v.options.timeouts.httpMaxRetryDuration?{error:new _(`Timeout for trying fallback hosts retries. Total elapsed time exceeded the ${v.options.timeouts.httpMaxRetryDuration}ms limit`,50003,500)}:Z($,!0):(oe&&(v._currentFallback={host:J,validUntil:Date.now()+v.options.timeouts.fallbackRetryTimeout}),le)};return Z(V)}catch(v){return{error:new _(`Unexpected error in Http.do: ${Me(v)}`,500,5e4)}}}async doUri(s,r,l,d,p){try{us(s,r,d,p,this.logger);const v=await this.platformHttp.doUri(s,r,l,d,p);return this.logger.shouldLog(S.LOG_MICRO)&&ho(v,s,r,p,this.logger),v}catch(v){return{error:new _(`Unexpected error in Http.doUri: ${Me(v)}`,500,5e4)}}}};function sc(s,r,l,d){try{l.apply(r,d)}catch(p){S.logAction(s,S.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+p+"; stack = "+(p&&p.stack))}}function si(s,r,l){let d,p,v;for(let E=0;E<s.length;E++)if(d=s[E],l&&(d=d[l]),Array.isArray(d)){for(;(p=d.indexOf(r))!==-1;)d.splice(p,1);l&&d.length===0&&delete s[E][l]}else if(ne(d))for(v in d)Object.prototype.hasOwnProperty.call(d,v)&&Array.isArray(d[v])&&si([d],r,v)}var hf=class{constructor(s){this.logger=s,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(...s){if(s.length===1){const r=s[0];if(typeof r=="function")this.any.push(r);else throw new Error("EventListener.on(): Invalid arguments: "+G.Config.inspect(s))}if(s.length===2){const[r,l]=s;if(typeof l!="function")throw new Error("EventListener.on(): Invalid arguments: "+G.Config.inspect(s));if(he(r))this.any.push(l);else if(Array.isArray(r))r.forEach(d=>{this.on(d,l)});else{if(typeof r!="string")throw new Error("EventListener.on(): Invalid arguments: "+G.Config.inspect(s));(this.events[r]||(this.events[r]=[])).push(l)}}}off(...s){if(s.length==0||he(s[0])&&he(s[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}const[r,l]=s;let d=null,p=null;if(s.length===1||!l)typeof r=="function"?d=r:p=r;else{if(typeof l!="function")throw new Error("EventEmitter.off(): invalid arguments:"+G.Config.inspect(s));[p,d]=[r,l]}if(d&&he(p)){si([this.any,this.events,this.anyOnce,this.eventsOnce],d);return}if(Array.isArray(p)){p.forEach(v=>{this.off(v,d)});return}if(typeof p!="string")throw new Error("EventEmitter.off(): invalid arguments:"+G.Config.inspect(s));d?si([this.events,this.eventsOnce],d,p):(delete this.events[p],delete this.eventsOnce[p])}listeners(s){if(s){const r=this.events[s]||[];return this.eventsOnce[s]&&Array.prototype.push.apply(r,this.eventsOnce[s]),r.length?r:null}return this.any.length?this.any:null}emit(s,...r){const l={event:s},d=[];this.anyOnce.length&&(Array.prototype.push.apply(d,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(d,this.any);const p=this.eventsOnce[s];p&&(Array.prototype.push.apply(d,p),delete this.eventsOnce[s]);const v=this.events[s];v&&Array.prototype.push.apply(d,v),d.forEach(E=>{sc(this.logger,l,E,r)})}once(...s){const r=s.length;if(r===0||r===1&&typeof s[0]!="function"){const p=s[0];return new Promise(v=>{this.once(p,v)})}const[l,d]=s;if(s.length===1&&typeof l=="function")this.anyOnce.push(l);else if(he(l)){if(typeof d!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+G.Config.inspect(s));this.anyOnce.push(d)}else if(Array.isArray(l)){const p=this,v=function(){const E=Array.prototype.slice.call(arguments);if(l.forEach(function(O){p.off(O,v)}),typeof d!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+G.Config.inspect(s));d.apply(this,E)};l.forEach(function(E){p.on(E,v)})}else{if(typeof l!="string")throw new Error("EventEmitter.once(): Invalid arguments:"+G.Config.inspect(s));const p=this.eventsOnce[l]||(this.eventsOnce[l]=[]);if(d){if(typeof d!="function")throw new Error("EventEmitter.once(): Invalid arguments:"+G.Config.inspect(s));p.push(d)}}}async whenState(s,r){if(typeof s!="string"||typeof r!="string")throw new Error("whenState requires a valid state String argument");return s===r?null:this.once(s)}},gt=hf,Ae={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18,OBJECT:19,OBJECT_SYNC:20,ANNOTATION:21},$a=[];Object.keys(Ae).forEach(function(s){$a[Ae[s]]=s});var It={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,HAS_OBJECTS:128,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19,ANNOTATION_PUBLISH:1<<21,ANNOTATION_SUBSCRIBE:1<<22,OBJECT_SUBSCRIBE:1<<24,OBJECT_PUBLISH:1<<25},df=Object.keys(It);It.MODE_ALL=It.PRESENCE|It.PUBLISH|It.SUBSCRIBE|It.PRESENCE_SUBSCRIBE|It.ANNOTATION_PUBLISH|It.ANNOTATION_SUBSCRIBE|It.OBJECT_SUBSCRIBE|It.OBJECT_PUBLISH;var ra=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE","ANNOTATION_PUBLISH","ANNOTATION_SUBSCRIBE","OBJECT_SUBSCRIBE","OBJECT_PUBLISH"];function qn(s){return!s||!s.channelOptions?{channelOptions:s,plugins:{},baseEncodedPreviousPayload:void 0}:s}function er(s,r,l){if(l&&l.cipher){s||mt("Crypto");const d=s.getCipher(l.cipher,r);return{cipher:d.cipherParams,channelCipher:d.cipher}}return l??{}}async function mo(s,r){const{data:l,encoding:d}=await _i(s.data,s.encoding,r);return s.data=l,s.encoding=d,s}async function _i(s,r,l){let d=l.channelCipher,p=s,v=r?r+"/":"";G.BufferUtils.isBuffer(p)||(p=G.BufferUtils.utf8Encode(String(p)),v=v+"utf-8/");const E=await d.encrypt(p);return v=v+"cipher+"+d.algorithm,{data:E,encoding:v}}async function ai(s,r){const{data:l,encoding:d}=po(s.data,s.encoding);return s.data=l,s.encoding=d,r!=null&&r.cipher?mo(s,r):s}function po(s,r){if(typeof s=="string"||G.BufferUtils.isBuffer(s)||s===null||s===void 0)return{data:s,encoding:r};if(ne(s)||Array.isArray(s))return{data:JSON.stringify(s),encoding:r?r+"/json":"json"};throw new _("Data type is unsupported",40013,400)}async function oa(s,r){const{data:l,encoding:d,error:p}=await go(s.data,s.encoding,r);if(s.data=l,s.encoding=d,p)throw p}async function go(s,r,l){const d=qn(l);let p=s,v=s,E=r,O;if(r){const V=r.split("/");let j,Z=V.length,$="";try{for(;(j=Z)>0;){const oe=V[--Z].match(/([-\w]+)(\+([\w-]+))?/);if(!oe)break;switch($=oe[1],$){case"base64":v=G.BufferUtils.base64Decode(String(v)),j==V.length&&(p=v);continue;case"utf-8":v=G.BufferUtils.utf8Decode(v);continue;case"json":v=JSON.parse(v);continue;case"cipher":if(d.channelOptions!=null&&d.channelOptions.cipher&&d.channelOptions.channelCipher){const J=oe[3],le=d.channelOptions.channelCipher;if(J!=le.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");v=await le.decrypt(v);continue}else throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!d.plugins||!d.plugins.vcdiff)throw new _("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if(typeof Uint8Array>"u")throw new _("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let J=d.baseEncodedPreviousPayload;typeof J=="string"&&(J=G.BufferUtils.utf8Encode(J));const le=G.BufferUtils.toBuffer(J);v=G.BufferUtils.toBuffer(v),v=G.BufferUtils.arrayBufferViewToBuffer(d.plugins.vcdiff.decode(v,le)),p=v}catch(J){throw new _("Vcdiff delta decode failed with "+J,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(oe){const J=oe;O=new _(`Error processing the ${$} encoding, decoder returned ${J.message}`,J.code||40013,400)}finally{E=j<=0?null:V.slice(0,j).join("/")}}return O?{error:O,data:v,encoding:E}:(d.baseEncodedPreviousPayload=p,{data:v,encoding:E})}function Ni(...s){const r=s.length>0?"json":"msgpack",{data:l,encoding:d}=On(this.data,this.encoding,r);return Object.assign({},this,{encoding:d,data:l})}function On(s,r,l){return!s||!G.BufferUtils.isBuffer(s)?{data:s,encoding:r}:l==="msgpack"?{data:G.BufferUtils.toBuffer(s),encoding:r}:{data:G.BufferUtils.base64Encode(s),encoding:r?r+"/base64":"base64"}}var fs={encryptData:_i,encodeData:po,encodeDataForWire:On,decodeData:go};function ri(s){const{id:r,connectionId:l,timestamp:d}=s;let p;switch(s.action){case Ae.MESSAGE:{p=s.messages;break}case Ae.PRESENCE:case Ae.SYNC:p=s.presence;break;case Ae.ANNOTATION:p=s.annotations;break;case Ae.OBJECT:case Ae.OBJECT_SYNC:p=s.state;break;default:throw new _("Unexpected action "+s.action,4e4,400)}for(let v=0;v<p.length;v++){const E=p[v];E.connectionId||(E.connectionId=l),E.timestamp||(E.timestamp=d),r&&!E.id&&(E.id=r+":"+v)}}function Zt(s,r){let l="["+r;for(const d in s)d==="data"?typeof s.data=="string"?l+="; data="+s.data:G.BufferUtils.isBuffer(s.data)?l+="; data (buffer)="+G.BufferUtils.base64Encode(s.data):typeof s.data<"u"&&(l+="; data (json)="+JSON.stringify(s.data)):d&&(d==="extras"||d==="operation")?l+="; "+d+"="+JSON.stringify(s[d]):d==="version"?l+="; version="+JSON.stringify(s[d]):d==="annotations"?l+="; annotations="+JSON.stringify(s[d]):s[d]!==void 0&&(l+="; "+d+"="+s[d]);return l+="]",l}var oi=class{},la=class{constructor(s){this.Platform=G,this.ErrorInfo=_,this.Logger=S,this.Defaults=Se,this.Utils=_t,this.EventEmitter=gt,this.MessageEncoding=fs;var r,l,d,p,v,E,O,V,j,Z;this._additionalHTTPRequestImplementations=(r=s.plugins)!=null?r:null,this.logger=new S,this.logger.setLog(s.logLevel,s.logHandler),S.logAction(this.logger,S.LOG_MICRO,"BaseClient()","initialized with clientOptions "+G.Config.inspect(s)),this._MsgPack=(d=(l=s.plugins)==null?void 0:l.MsgPack)!=null?d:null;const $=this.options=Se.normaliseOptions(s,this._MsgPack,this.logger);if($.key){const oe=$.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!oe){const J="invalid key parameter";throw S.logAction(this.logger,S.LOG_ERROR,"BaseClient()",J),new _(J,40400,404)}$.keyName=oe[1],$.keySecret=oe[2]}if("clientId"in $)if(typeof $.clientId=="string"||$.clientId===null){if($.clientId==="*")throw new _('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new _("clientId must be either a string or null",40012,400);S.logAction(this.logger,S.LOG_MINOR,"BaseClient()","started; version = "+Se.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new Ja(this),this.auth=new ft(this,$),this._rest=(p=s.plugins)!=null&&p.Rest?new s.plugins.Rest(this):null,this._Crypto=(E=(v=s.plugins)==null?void 0:v.Crypto)!=null?E:null,this.__FilteredSubscriptions=(V=(O=s.plugins)==null?void 0:O.MessageInteractions)!=null?V:null,this._Annotations=(Z=(j=s.plugins)==null?void 0:j.Annotations)!=null?Z:null}get rest(){return this._rest||mt("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||mt("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}device(){var s;return(!((s=this.options.plugins)!=null&&s.Push)||!this.push.LocalDevice)&&mt("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(s){return Se.getHttpScheme(this.options)+s+":"+Se.getPort(this.options,!1)}async stats(s){return this.rest.stats(s)}async time(s){return this.rest.time(s)}async request(s,r,l,d,p,v){return this.rest.request(s,r,l,d,p,v)}batchPublish(s){return this.rest.batchPublish(s)}batchPresence(s){return this.rest.batchPresence(s)}setLog(s){this.logger.setLog(s.level,s.handler)}async getTimestamp(s){return!this.isTimeOffsetSet()&&s?this.time():this.getTimestampUsingOffset()}getTimestampUsingOffset(){return Date.now()+(this.serverTimeOffset||0)}isTimeOffsetSet(){return this.serverTimeOffset!==null}};la.Platform=G;var yo=la,tr=class Pr{toJSON(){var r,l,d;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:(r=this.push)==null?void 0:r.recipient,state:(l=this.push)==null?void 0:l.state,error:(d=this.push)==null?void 0:d.error}}}toString(){var r,l,d,p;let v="[DeviceDetails";return this.id&&(v+="; id="+this.id),this.platform&&(v+="; platform="+this.platform),this.formFactor&&(v+="; formFactor="+this.formFactor),this.clientId&&(v+="; clientId="+this.clientId),this.metadata&&(v+="; metadata="+this.metadata),this.deviceIdentityToken&&(v+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(r=this.push)!=null&&r.recipient&&(v+="; push.recipient="+JSON.stringify(this.push.recipient)),(l=this.push)!=null&&l.state&&(v+="; push.state="+this.push.state),(d=this.push)!=null&&d.error&&(v+="; push.error="+JSON.stringify(this.push.error)),(p=this.push)!=null&&p.metadata&&(v+="; push.metadata="+this.push.metadata),v+="]",v}static toRequestBody(r,l,d){return yn(r,l,d)}static fromResponseBody(r,l,d){return d&&(r=St(r,l,d)),Array.isArray(r)?Pr.fromValuesArray(r):Pr.fromValues(r)}static fromValues(r){return r.error=r.error&&_.fromValues(r.error),Object.assign(new Pr,r)}static fromLocalDevice(r){return Object.assign(new Pr,r)}static fromValuesArray(r){const l=r.length,d=new Array(l);for(let p=0;p<l;p++)d[p]=Pr.fromValues(r[p]);return d}},In=tr;async function vo(s,r,l,d){if(s.http.supportsAuthHeaders){const p=await s.auth.getAuthHeaders();return d(ue(p,r),l)}else{const p=await s.auth.getAuthParams();return d(r,ue(p,l))}}function Yt(s,r,l){if(s.err&&!s.body)return{err:s.err};if(s.statusCode===Qa.NoContent)return B(D({},s),{body:[],unpacked:!0});let d=s.body;if(!s.unpacked)try{d=St(d,r,l)}catch(O){return Jr(O)?{err:O}:{err:new se(Me(O),null)}}if(!d)return{err:new se("unenvelope(): Response body is missing",null)};const{statusCode:p,response:v,headers:E}=d;if(p===void 0)return B(D({},s),{body:d,unpacked:!0});if(p<200||p>=300){let O=v&&v.error||s.err;return O||(O=new Error("Error in unenveloping "+d),O.statusCode=p),{err:O,body:v,headers:E,unpacked:!0,statusCode:p}}return{err:s.err,body:v,headers:E,unpacked:!0,statusCode:p}}function Di(s,r,l,d,p){s.err?S.logAction(p,S.LOG_MICRO,"Resource."+r+"()","Received Error; "+Mi(l,d)+"; Error: "+Me(s.err)):S.logAction(p,S.LOG_MICRO,"Resource."+r+"()","Received; "+Mi(l,d)+"; Headers: "+aa(s.headers)+"; StatusCode: "+s.statusCode+"; Body: "+(G.BufferUtils.isBuffer(s.body)?" (Base64): "+G.BufferUtils.base64Encode(s.body):": "+G.Config.inspect(s.body)))}var nr=class Vr{static async get(r,l,d,p,v,E){return Vr.do(it.Get,r,l,null,d,p,v,E??!1)}static async delete(r,l,d,p,v,E){return Vr.do(it.Delete,r,l,null,d,p,v,E)}static async post(r,l,d,p,v,E,O){return Vr.do(it.Post,r,l,d,p,v,E,O)}static async patch(r,l,d,p,v,E,O){return Vr.do(it.Patch,r,l,d,p,v,E,O)}static async put(r,l,d,p,v,E,O){return Vr.do(it.Put,r,l,d,p,v,E,O)}static async do(r,l,d,p,v,E,O,V){O&&((E=E||{}).envelope=O);const j=l.logger;async function Z(oe,J){var le;if(j.shouldLog(S.LOG_MICRO)){let Ce=p;if(((le=oe["content-type"])==null?void 0:le.indexOf("msgpack"))>0)try{l._MsgPack||mt("MsgPack"),Ce=l._MsgPack.decode(p)}catch(Be){S.logAction(j,S.LOG_MICRO,"Resource."+r+"()","Sending MsgPack Decoding Error: "+Me(Be))}S.logAction(j,S.LOG_MICRO,"Resource."+r+"()","Sending; "+Mi(d,J)+"; Body: "+Ce)}const de=await l.http.do(r,d,oe,p,J);return de.error&&ft.isTokenErr(de.error)?(await l.auth.authorize(null,null),vo(l,oe,J,Z)):{err:de.error,body:de.body,headers:de.headers,unpacked:de.unpacked,statusCode:de.statusCode}}let $=await vo(l,v,E,Z);if(O&&($=Yt($,l._MsgPack,O)),j.shouldLog(S.LOG_MICRO)&&Di($,r,d,E,j),V){if($.err)throw $.err;{const oe=D({},$);return delete oe.err,oe}}return $}},Qe=nr;function mf(s){const r=s.match(/^\.\/(\w+)\?(.*)$/);return r&&r[2]&&Ia(r[2])}function bo(s){typeof s=="string"&&(s=s.split(","));const r={};for(let l=0;l<s.length;l++){const d=s[l].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(d){const p=mf(d[1]);p&&(r[d[2]]=p)}}return r}function So(s,r,l){return!(l&&(r||typeof s.code=="number"))}var ca=class{constructor(s,r,l,d,p,v){this.client=s,this.path=r,this.headers=l,this.envelope=d??null,this.bodyHandler=p,this.useHttpPaginatedResponse=v||!1}get logger(){return this.client.logger}async get(s){const r=await Qe.get(this.client,this.path,this.headers,s,this.envelope,!1);return this.handlePage(r)}async delete(s){const r=await Qe.delete(this.client,this.path,this.headers,s,this.envelope,!1);return this.handlePage(r)}async post(s,r){const l=await Qe.post(this.client,this.path,r,this.headers,s,this.envelope,!1);return this.handlePage(l)}async put(s,r){const l=await Qe.put(this.client,this.path,r,this.headers,s,this.envelope,!1);return this.handlePage(l)}async patch(s,r){const l=await Qe.patch(this.client,this.path,r,this.headers,s,this.envelope,!1);return this.handlePage(l)}async handlePage(s){if(s.err&&So(s.err,s.body,this.useHttpPaginatedResponse))throw S.logAction(this.logger,S.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+Me(s.err)),s.err;let r,l,d;try{r=s.statusCode==Qa.NoContent?[]:await this.bodyHandler(s.body,s.headers||{},s.unpacked)}catch(p){throw s.err||p}return s.headers&&(l=s.headers.Link||s.headers.link)&&(d=bo(l)),this.useHttpPaginatedResponse?new ac(this,r,s.headers||{},s.statusCode,d,s.err):new ua(this,r,d)}},ua=class{constructor(s,r,l){this.resource=s,this.items=r,this._relParams=l}async first(){if(this.hasFirst())return this.get(this._relParams.first);throw new _("No link to the first page of results",40400,404)}async current(){if(this.hasCurrent())return this.get(this._relParams.current);throw new _("No link to the current page of results",40400,404)}async next(){return this.hasNext()?this.get(this._relParams.next):null}hasFirst(){return this._relParams!=null&&"first"in this._relParams}hasCurrent(){return this._relParams!=null&&"current"in this._relParams}hasNext(){return this._relParams!=null&&"next"in this._relParams}isLast(){return!this.hasNext()}async get(s){const r=this.resource,l=await Qe.get(r.client,r.path,r.headers,s,r.envelope,!1);return r.handlePage(l)}},ac=class extends ua{constructor(s,r,l,d,p,v){super(s,r,p),this.statusCode=d,this.success=d<300&&d>=200,this.headers=l,this.errorCode=v&&v.code,this.errorMessage=v&&v.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},vn=ca,rc=class Ml{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let r="[PushChannelSubscription";return this.channel&&(r+="; channel="+this.channel),this.deviceId&&(r+="; deviceId="+this.deviceId),this.clientId&&(r+="; clientId="+this.clientId),r+="]",r}static fromResponseBody(r,l,d){return d&&(r=St(r,l,d)),Array.isArray(r)?Ml.fromValuesArray(r):Ml.fromValues(r)}static fromValues(r){return Object.assign(new Ml,r)}static fromValuesArray(r){const l=r.length,d=new Array(l);for(let p=0;p<l;p++)d[p]=Ml.fromValues(r[p]);return d}};rc.toRequestBody=yn;var pf=rc,hs=pf,gf=class{constructor(s){var r;this.client=s,this.admin=new yf(s),G.Config.push&&((r=s.options.plugins)!=null&&r.Push)&&(this.stateMachine=new s.options.plugins.Push.ActivationStateMachine(s),this.LocalDevice=s.options.plugins.Push.localDeviceFactory(In))}async activate(s,r){await new Promise((l,d)=>{var p;if(!((p=this.client.options.plugins)!=null&&p.Push)){d(En("Push"));return}if(!this.stateMachine){d(new _("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.activatedCallback){d(new _("Activation already in progress",4e4,400));return}this.stateMachine.activatedCallback=v=>{if(v){d(v);return}l()},this.stateMachine.updateFailedCallback=r,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,s))})}async deactivate(s){await new Promise((r,l)=>{var d;if(!((d=this.client.options.plugins)!=null&&d.Push)){l(En("Push"));return}if(!this.stateMachine){l(new _("This platform is not supported as a target of push notifications",4e4,400));return}if(this.stateMachine.deactivatedCallback){l(new _("Deactivation already in progress",4e4,400));return}this.stateMachine.deactivatedCallback=p=>{if(p){l(p);return}r()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,s))})}},yf=class{constructor(s){this.client=s,this.deviceRegistrations=new vf(s),this.channelSubscriptions=new bf(s)}async publish(s,r){const l=this.client,d=l.options.useBinaryProtocol?"msgpack":"json",p=Se.defaultPostHeaders(l.options),v={},E=ue({recipient:s},r);ue(p,l.options.headers),l.options.pushFullWait&&ue(v,{fullWait:"true"});const O=yn(E,l._MsgPack,d);await Qe.post(l,"/push/publish",O,p,v,null,!0)}},vf=class{constructor(s){this.client=s}async save(s){const r=this.client,l=In.fromValues(s),d=r.options.useBinaryProtocol?"msgpack":"json",p=Se.defaultPostHeaders(r.options),v={};ue(p,r.options.headers),r.options.pushFullWait&&ue(v,{fullWait:"true"});const E=yn(l,r._MsgPack,d),O=await Qe.put(r,"/push/deviceRegistrations/"+encodeURIComponent(s.id),E,p,v,null,!0);return In.fromResponseBody(O.body,r._MsgPack,O.unpacked?void 0:d)}async get(s){const r=this.client,l=r.options.useBinaryProtocol?"msgpack":"json",d=Se.defaultGetHeaders(r.options),p=s.id||s;if(typeof p!="string"||!p.length)throw new _("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);ue(d,r.options.headers);const v=await Qe.get(r,"/push/deviceRegistrations/"+encodeURIComponent(p),d,{},null,!0);return In.fromResponseBody(v.body,r._MsgPack,v.unpacked?void 0:l)}async list(s){const r=this.client,l=r.options.useBinaryProtocol?"msgpack":"json",d=this.client.http.supportsLinkHeaders?void 0:l,p=Se.defaultGetHeaders(r.options);return ue(p,r.options.headers),new vn(r,"/push/deviceRegistrations",p,d,async function(v,E,O){return In.fromResponseBody(v,r._MsgPack,O?void 0:l)}).get(s)}async remove(s){const r=this.client,l=Se.defaultGetHeaders(r.options),d={},p=s.id||s;if(typeof p!="string"||!p.length)throw new _("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);ue(l,r.options.headers),r.options.pushFullWait&&ue(d,{fullWait:"true"}),await Qe.delete(r,"/push/deviceRegistrations/"+encodeURIComponent(p),l,d,null,!0)}async removeWhere(s){const r=this.client,l=r.options.useBinaryProtocol?"msgpack":"json",d=Se.defaultGetHeaders(r.options,{format:l});ue(d,r.options.headers),r.options.pushFullWait&&ue(s,{fullWait:"true"}),await Qe.delete(r,"/push/deviceRegistrations",d,s,null,!0)}},bf=class uS{constructor(r){this.remove=uS.prototype.removeWhere,this.client=r}async save(r){const l=this.client,d=hs.fromValues(r),p=l.options.useBinaryProtocol?"msgpack":"json",v=Se.defaultPostHeaders(l.options),E={};ue(v,l.options.headers),l.options.pushFullWait&&ue(E,{fullWait:"true"});const O=yn(d,l._MsgPack,p),V=await Qe.post(l,"/push/channelSubscriptions",O,v,E,null,!0);return hs.fromResponseBody(V.body,l._MsgPack,V.unpacked?void 0:p)}async list(r){const l=this.client,d=l.options.useBinaryProtocol?"msgpack":"json",p=this.client.http.supportsLinkHeaders?void 0:d,v=Se.defaultGetHeaders(l.options);return ue(v,l.options.headers),new vn(l,"/push/channelSubscriptions",v,p,async function(E,O,V){return hs.fromResponseBody(E,l._MsgPack,V?void 0:d)}).get(r)}async removeWhere(r){const l=this.client,d=l.options.useBinaryProtocol?"msgpack":"json",p=Se.defaultGetHeaders(l.options,{format:d});ue(p,l.options.headers),l.options.pushFullWait&&ue(r,{fullWait:"true"}),await Qe.delete(l,"/push/channelSubscriptions",p,r,null,!0)}async listChannels(r){const l=this.client,d=l.options.useBinaryProtocol?"msgpack":"json",p=this.client.http.supportsLinkHeaders?void 0:d,v=Se.defaultGetHeaders(l.options);return ue(v,l.options.headers),l.options.pushFullWait&&ue(r,{fullWait:"true"}),new vn(l,"/push/channels",v,p,async function(E,O,V){const j=!V&&d?St(E,l._MsgPack,d):E;for(let Z=0;Z<j.length;Z++)j[Z]=String(j[Z]);return j}).get(r)}},Sf=gf,To=["absent","present","enter","leave","update"];async function oc(s,r,l,d){const p=er(r,s,d??null);return fa.fromValues(l).decode(p,s)}async function Tf(s,r,l,d){return Promise.all(l.map(function(p){return oc(s,r,p,d)}))}async function Af(s,r){return fa.fromValues(s).decode(r.channelOptions,r.logger)}async function lc(s,r){return Promise.all(s.map(function(l){return Af(l,r)}))}var ir=class _l extends oi{isSynthesized(){return!this.id||!this.connectionId?!0:this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const r=this.id.split(":");return{connectionId:r[0],msgSerial:parseInt(r[1],10),index:parseInt(r[2],10)}}async encode(r){const l=Object.assign(new fa,this,{action:To.indexOf(this.action||"present")});return ai(l,r)}static fromValues(r){return Object.assign(new _l,r)}static fromValuesArray(r){return r.map(l=>_l.fromValues(l))}static fromData(r){return r instanceof _l?r:_l.fromValues({data:r})}toString(){return Zt(this,"PresenceMessage")}},fa=class Yd extends oi{toJSON(...r){return Ni.call(this,...r)}static fromValues(r){return Object.assign(new Yd,r)}static fromValuesArray(r){return r.map(l=>Yd.fromValues(l))}async decode(r,l){const d=Object.assign(new ir,B(D({},this),{action:To[this.action]}));try{await oa(d,r)}catch(p){S.logAction(l,S.LOG_ERROR,"WirePresenceMessage.decode()",Me(p))}return d}toString(){return Zt(this,"WirePresenceMessage")}},li=ir,Cf=class{constructor(s){this.channel=s}get logger(){return this.channel.logger}async get(s){S.logAction(this.logger,S.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const r=this.channel.client,l=r.options.useBinaryProtocol?"msgpack":"json",d=this.channel.client.http.supportsLinkHeaders?void 0:l,p=Se.defaultGetHeaders(r.options);return ue(p,r.options.headers),new vn(r,this.channel.client.rest.presenceMixin.basePath(this),p,d,async(v,E,O)=>{const V=O?v:St(v,r._MsgPack,l);return lc(V,this.channel)}).get(s)}async history(s){return S.logAction(this.logger,S.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,s)}},cc=Cf,uc=["message.create","message.update","message.delete","meta","message.summary","message.append"];function wf(s){return uc[s||0]||"unknown"}function Rf(s){let r=0;return s.name&&(r+=s.name.length),s.clientId&&(r+=s.clientId.length),s.extras&&(r+=JSON.stringify(s.extras).length),s.data&&(r+=$r(s.data)),r}async function fc(s,r,l,d){const p=er(r,s,d??null);return ha.fromValues(l).decode(p,s)}async function Ef(s,r,l,d){return Promise.all(l.map(function(p){return fc(s,r,p,d)}))}async function hc(s,r){return ha.fromValues(s).decode(r.channelOptions,r.logger)}async function dc(s,r){return Promise.all(s.map(function(l){return hc(l,r)}))}async function mc(s,r){return Promise.all(s.map(l=>l.encode(r)))}var pc=yn;function sr(s){let r,l=0;for(let d=0;d<s.length;d++)r=s[d],l+=r.size||(r.size=Rf(r));return l}var ds=class Kd extends oi{expandFields(){if(this.version||(this.version={}),!this.version.serial&&this.serial&&(this.version.serial=this.serial),!this.version.timestamp&&this.timestamp&&(this.version.timestamp=this.timestamp),this.annotations?this.annotations.summary||(this.annotations.summary={}):this.annotations={summary:{}},this.annotations&&this.annotations.summary)for(const[r,l]of Object.entries(this.annotations.summary))if(r.endsWith(":distinct.v1")||r.endsWith(":unique.v1")||r.endsWith(":multiple.v1"))for(const[,d]of Object.entries(l))d.clipped||(d.clipped=!1);else r.endsWith(":flag.v1")&&(l.clipped||(l.clipped=!1))}async encode(r){const l=Object.assign(new ha,this,{action:uc.indexOf(this.action||"message.create")});return ai(l,r)}static fromValues(r){return Object.assign(new Kd,r)}static fromValuesArray(r){return r.map(l=>Kd.fromValues(l))}toString(){return Zt(this,"Message")}},ha=class Xd extends oi{toJSON(...r){return Ni.call(this,...r)}static fromValues(r){return Object.assign(new Xd,r)}static fromValuesArray(r){return r.map(l=>Xd.fromValues(l))}async decodeWithErr(r,l){const d=Object.assign(new ds,B(D({},this),{action:wf(this.action)}));let p;try{await oa(d,r)}catch(v){S.logAction(l,S.LOG_ERROR,"WireMessage.decode()",Me(v)),p=v}return d.expandFields(),{decoded:d,err:p}}async decode(r,l){const{decoded:d}=await this.decodeWithErr(r,l);return d}toString(){return Zt(this,"WireMessage")}},bn=ds,gc=9;function yc(s){return s.every(function(r){return!r.id})}var vc=class{constructor(s,r,l){this._annotations=null;var d,p;S.logAction(s.logger,S.LOG_MINOR,"RestChannel()","started; name = "+r),this.name=r,this.client=s,this.presence=new cc(this),this.channelOptions=Xa((d=s._Crypto)!=null?d:null,this.logger,l),(p=s.options.plugins)!=null&&p.Push&&(this._push=new s.options.plugins.Push.PushChannel(this)),s._Annotations&&(this._annotations=new s._Annotations.RestAnnotations(this))}get annotations(){return this._annotations||mt("Annotations"),this._annotations}get push(){return this._push||mt("Push"),this._push}get logger(){return this.client.logger}setOptions(s){var r;this.channelOptions=Xa((r=this.client._Crypto)!=null?r:null,this.logger,s)}async history(s){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,s)}async publish(...s){const r=s[0],l=s[1];let d,p;if(typeof r=="string"||r===null)d=[bn.fromValues({name:r,data:l})],p=s[2];else if(ne(r))d=[bn.fromValues(r)],p=s[1];else if(Array.isArray(r))d=bn.fromValuesArray(r),p=s[1];else throw new _("The single-argument form of publish() expects a message object or an array of message objects",40013,400);p||(p={});const v=this.client,E=v.options,O=E.useBinaryProtocol?"msgpack":"json",V=v.options.idempotentRestPublishing,j=Se.defaultPostHeaders(v.options);if(ue(j,E.headers),V&&yc(d)){const J=await ea(gc);d.forEach(function(le,de){le.id=J+":"+de.toString()})}const Z=await mc(d,this.channelOptions),$=sr(Z),oe=E.maxMessageSize;if($>oe)throw new _(`Maximum size of messages that can be published at once exceeded (was ${$} bytes; limit is ${oe} bytes)`,40009,400);return this._publish(pc(Z,v._MsgPack,O),j,p)}async _publish(s,r,l){const d=this.client,p=d.options.useBinaryProtocol?"msgpack":"json",{body:v,unpacked:E}=await Qe.post(d,d.rest.channelMixin.basePath(this)+"/messages",s,r,l,null,!0),O=(E?v:St(v,d._MsgPack,p))||{};return delete O.channel,delete O.messageId,O}async status(){return this.client.rest.channelMixin.status(this)}async getMessage(s){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.getMessage()","channel = "+this.name),this.client.rest.channelMixin.getMessage(this,s)}async updateMessage(s,r,l){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.updateMessage()","channel = "+this.name),this.client.rest.channelMixin.updateDeleteMessage(this,"message.update",s,r,l)}async deleteMessage(s,r,l){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.deleteMessage()","channel = "+this.name),this.client.rest.channelMixin.updateDeleteMessage(this,"message.delete",s,r,l)}async appendMessage(s,r,l){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.appendMessage()","channel = "+this.name),this.client.rest.channelMixin.updateDeleteMessage(this,"message.append",s,r,l)}async getMessageVersions(s,r){return S.logAction(this.logger,S.LOG_MICRO,"RestChannel.getMessageVersions()","channel = "+this.name),this.client.rest.channelMixin.getMessageVersions(this,s,r)}},bc=vc,ms=class fS{constructor(r){this.entries=r&&r.entries||void 0,this.schema=r&&r.schema||void 0,this.appId=r&&r.appId||void 0,this.inProgress=r&&r.inProgress||void 0,this.unit=r&&r.unit||void 0,this.intervalId=r&&r.intervalId||void 0}static fromValues(r){return new fS(r)}},xf=ms,Sc=class{static basePath(s){return"/channels/"+encodeURIComponent(s.name)}static history(s,r){const l=s.client,d=l.options.useBinaryProtocol?"msgpack":"json",p=s.client.http.supportsLinkHeaders?void 0:d,v=Se.defaultGetHeaders(l.options);return ue(v,l.options.headers),new vn(l,this.basePath(s)+"/messages",v,p,async function(E,O,V){const j=V?E:St(E,l._MsgPack,d);return dc(j,s)}).get(r)}static async status(s){const r=s.client.options.useBinaryProtocol?"msgpack":"json",l=Se.defaultPostHeaders(s.client.options);return(await Qe.get(s.client,this.basePath(s),l,{},r,!0)).body}static async getMessage(s,r){const l=typeof r=="string"?r:r.serial;if(!l)throw new _('This message lacks a serial. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);const d=s.client,p=d.options.useBinaryProtocol?"msgpack":"json",v=Se.defaultGetHeaders(d.options);ue(v,d.options.headers);const{body:E,unpacked:O}=await Qe.get(d,this.basePath(s)+"/messages/"+encodeURIComponent(l),v,{},null,!0),V=O?E:St(E,d._MsgPack,p);return hc(V,s)}static async updateDeleteMessage(s,r,l,d,p){if(!l.serial)throw new _('This message lacks a serial and cannot be updated. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);const v=s.client,E=v.options.useBinaryProtocol?"msgpack":"json",O=Se.defaultPostHeaders(v.options);ue(O,v.options.headers);const V=bn.fromValues(l);V.action=r,V.version=d;const j=await V.encode(s.channelOptions),Z=pc(j,v._MsgPack,E);let $=Qe.patch;const{body:oe,unpacked:J}=await $(v,this.basePath(s)+"/messages/"+encodeURIComponent(l.serial),Z,O,p||{},null,!0);return(J?oe:St(oe,v._MsgPack,E))||{versionSerial:null}}static getMessageVersions(s,r,l){const d=typeof r=="string"?r:r.serial;if(!d)throw new _('This message lacks a serial. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);const p=s.client,v=p.options.useBinaryProtocol?"msgpack":"json",E=s.client.http.supportsLinkHeaders?void 0:v,O=Se.defaultGetHeaders(p.options);return ue(O,p.options.headers),new vn(p,this.basePath(s)+"/messages/"+encodeURIComponent(d)+"/versions",O,E,async(V,j,Z)=>{const $=Z?V:St(V,p._MsgPack,v);return dc($,s)}).get(l||{})}},Of=class{static basePath(s){return Sc.basePath(s.channel)+"/presence"}static async history(s,r){const l=s.channel.client,d=l.options.useBinaryProtocol?"msgpack":"json",p=s.channel.client.http.supportsLinkHeaders?void 0:d,v=Se.defaultGetHeaders(l.options);return ue(v,l.options.headers),new vn(l,this.basePath(s)+"/history",v,p,async(E,O,V)=>{const j=V?E:St(E,l._MsgPack,d);return lc(j,s.channel)}).get(r)}},Ao=class{constructor(s){this.channelMixin=Sc,this.presenceMixin=Of,this.Resource=Qe,this.PaginatedResource=vn,this.DeviceDetails=In,this.PushChannelSubscription=hs,this.client=s,this.channels=new Tc(this.client),this.push=new Sf(this.client)}async stats(s){const r=Se.defaultGetHeaders(this.client.options),l=this.client.options.useBinaryProtocol?"msgpack":"json",d=this.client.http.supportsLinkHeaders?void 0:l;return ue(r,this.client.options.headers),new vn(this.client,"/stats",r,d,async(p,v,E)=>{const O=E?p:St(p,this.client._MsgPack,l);for(let V=0;V<O.length;V++)O[V]=xf.fromValues(O[V]);return O}).get(s)}async time(s){const r=Se.defaultGetHeaders(this.client.options,{format:"json"});this.client.options.headers&&ue(r,this.client.options.headers);const l=O=>this.client.baseUri(O)+"/time";let{error:d,body:p,unpacked:v}=await this.client.http.do(it.Get,l,r,null,s);if(d)throw d;v||(p=JSON.parse(p));const E=p[0];if(!E)throw new _("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=E-Date.now(),E}async request(s,r,l,d,p,v){var E;const[O,V,j]=this.client.options.useBinaryProtocol?(this.client._MsgPack||mt("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"],Z=this.client.http.supportsLinkHeaders?void 0:j;d=d||{};const $=s.toLowerCase(),oe=$=="get"?Se.defaultGetHeaders(this.client.options,{format:j,protocolVersion:l}):Se.defaultPostHeaders(this.client.options,{format:j,protocolVersion:l});typeof p!="string"&&(p=(E=O(p))!=null?E:null),ue(oe,this.client.options.headers),v&&ue(oe,v);const J=new vn(this.client,r,oe,Z,async function(le,de,Ce){return U(Ce?le:V(le))},!0);if(!G.Http.methods.includes($))throw new _("Unsupported method "+$,40500,405);return G.Http.methodsWithBody.includes($)?J[$](d,p):J[$](d)}async batchPublish(s){let r,l;Array.isArray(s)?(r=s,l=!1):(r=[s],l=!0);const d=this.client.options.useBinaryProtocol?"msgpack":"json",p=Se.defaultPostHeaders(this.client.options);this.client.options.headers&&ue(p,this.client.options.headers);const v=yn(r,this.client._MsgPack,d),E=await Qe.post(this.client,"/messages",v,p,{},null,!0),O=E.unpacked?E.body:St(E.body,this.client._MsgPack,d);return l?O[0]:O}async batchPresence(s){const r=this.client.options.useBinaryProtocol?"msgpack":"json",l=Se.defaultGetHeaders(this.client.options);this.client.options.headers&&ue(l,this.client.options.headers);const d=s.join(","),p=await Qe.get(this.client,"/presence",l,{channels:d},null,!0);return p.unpacked?p.body:St(p.body,this.client._MsgPack,r)}async revokeTokens(s,r){if(nc(this.client.options))throw new _("Cannot revoke tokens when using token auth",40162,401);const l=this.client.options.keyName;let d=r??{};const p=D({targets:s.map(j=>`${j.type}:${j.value}`)},d),v=this.client.options.useBinaryProtocol?"msgpack":"json",E=Se.defaultPostHeaders(this.client.options);this.client.options.headers&&ue(E,this.client.options.headers);const O=yn(p,this.client._MsgPack,v),V=await Qe.post(this.client,`/keys/${l}/revokeTokens`,O,E,{},null,!0);return V.unpacked?V.body:St(V.body,this.client._MsgPack,v)}},Tc=class{constructor(s){this.client=s,this.all=Object.create(null)}get(s,r){s=String(s);let l=this.all[s];return l?r&&l.setOptions(r):this.all[s]=l=new bc(this.client,s,r),l}release(s){delete this.all[String(s)]}},da=class extends yo{constructor(s){super(Se.objectifyOptions(s,!1,"BaseRest",S.defaultLogger,{Rest:Ao}))}},ps={Rest:Ao},Ac=class extends bn{static async fromEncoded(s,r){return fc(S.defaultLogger,G.Crypto,s,r)}static async fromEncodedArray(s,r){return Ef(S.defaultLogger,G.Crypto,s,r)}static fromValues(s){return bn.fromValues(s)}},ma=class extends li{static async fromEncoded(s,r){return oc(S.defaultLogger,G.Crypto,s,r)}static async fromEncodedArray(s,r){return Tf(S.defaultLogger,G.Crypto,s,r)}static fromValues(s){return li.fromValues(s)}},Co=["annotation.create","annotation.delete"];async function wo(s,r,l){return Li.fromValues(r).decode(l||{},s)}async function Ro(s,r,l){return Promise.all(r.map(function(d){return wo(s,d,l)}))}async function Eo(s,r){return Li.fromValues(s).decode(r.channelOptions,r.logger)}async function Cc(s,r){return Promise.all(s.map(function(l){return Eo(l,r)}))}var xo=class Qd extends oi{async encode(){const r=Object.assign(new Li,this,{action:Co.indexOf(this.action||"annotation.create")});return ai(r,{})}static fromValues(r){return Object.assign(new Qd,r)}static fromValuesArray(r){return r.map(l=>Qd.fromValues(l))}toString(){return Zt(this,"Annotation")}},Li=class Fd extends oi{toJSON(...r){return Ni.call(this,...r)}static fromValues(r){return Object.assign(new Fd,r)}static fromValuesArray(r){return r.map(l=>Fd.fromValues(l))}async decode(r,l){const d=Object.assign(new xo,B(D({},this),{action:Co[this.action]}));try{await oa(d,r)}catch(p){S.logAction(l,S.LOG_ERROR,"WireAnnotation.decode()",Me(p))}return d}toString(){return Zt(this,"WireAnnotation")}},pa=xo,wc=class extends pa{static async fromEncoded(s,r){return wo(S.defaultLogger,s,r)}static async fromEncodedArray(s,r){return Ro(S.defaultLogger,s,r)}static fromValues(s){return pa.fromValues(s)}};function Rc(s){let r;switch(typeof s){case"string":r=s;break;case"object":r=s.serial;break}if(!r||typeof r!="string")throw new _("First argument of annotations.publish() must be either a Message (or at least an object with a string `serial` property) or a message serial (string)",40003,400);return r}function Ec(s,r){const l=Rc(s);if(!r||typeof r!="object")throw new _("Second argument of annotations.publish() must be an object (the intended annotation to publish)",40003,400);const d=pa.fromValues(r);return d.messageSerial=l,d.action||(d.action="annotation.create"),d}function xc(s,r){return s.client.rest.channelMixin.basePath(s)+"/messages/"+encodeURIComponent(r)+"/annotations"}var Jt=class{constructor(s){this.channel=s}async publish(s,r){const l=Ec(s,r),d=await l.encode(),p=this.channel.client,v=p.options,E=v.useBinaryProtocol?"msgpack":"json",O=Se.defaultPostHeaders(p.options),V={};ue(O,p.options.headers);const j=yn([d],p._MsgPack,E);await Qe.post(p,xc(this.channel,l.messageSerial),j,O,V,null,!0)}async delete(s,r){return r.action="annotation.delete",this.publish(s,r)}async get(s,r){const l=this.channel.client,d=Rc(s),p=l.options.useBinaryProtocol?"msgpack":"json",v=l.http.supportsLinkHeaders?void 0:p,E=Se.defaultGetHeaders(l.options);return ue(E,l.options.headers),new vn(l,xc(this.channel,d),E,v,async(O,V,j)=>{const Z=j?O:St(O,l._MsgPack,p);return Cc(Z,this.channel)}).get(r)}},ki=Jt,Oc=yn;function ga(s){const r=[];if(s)for(let l=0;l<s.length;l++)r.push(s[l].toString());return"[ "+r.join(", ")+" ]"}function Mc(s,r,l,d,p,v){const E=St(s,r,v);return ar(E,l,d,p)}function ar(s,r,l,d){let p;s.error&&(p=_.fromValues(s.error));let v;s.messages&&(v=ha.fromValuesArray(s.messages));let E;r&&s.presence&&(E=r.WirePresenceMessage.fromValuesArray(s.presence));let O;l&&s.annotations&&(O=l.WireAnnotation.fromValuesArray(s.annotations));let V;return d&&s.state&&(V=d.WireObjectMessage.fromValuesArray(s.state,_t,fs)),Object.assign(new ya,B(D({},s),{presence:E,messages:v,annotations:O,state:V,error:p}))}function rr(s){return r=>{var l;return ar(r,{WirePresenceMessage:fa},{WireAnnotation:Li},(l=s?.LiveObjectsPlugin)!=null?l:null)}}function Kt(s){return Object.assign(new ya,s)}function ci(s,r,l,d){let p="[ProtocolMessage";s.action!==void 0&&(p+="; action="+$a[s.action]||s.action);const v=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let E;for(let O=0;O<v.length;O++)E=v[O],s[E]!==void 0&&(p+="; "+E+"="+s[E]);if(s.messages&&(p+="; messages="+ga(ha.fromValuesArray(s.messages))),s.presence&&r&&(p+="; presence="+ga(r.WirePresenceMessage.fromValuesArray(s.presence))),s.annotations&&l&&(p+="; annotations="+ga(l.WireAnnotation.fromValuesArray(s.annotations))),s.state&&d&&(p+="; state="+ga(d.WireObjectMessage.fromValuesArray(s.state,_t,fs))),s.error&&(p+="; error="+_.fromValues(s.error).toString()),s.auth&&s.auth.accessToken&&(p+="; token="+s.auth.accessToken),s.flags&&(p+="; flags="+df.filter(s.hasFlag).join(",")),s.params){let O="";qa(s.params,function(V){O.length>0&&(O+="; "),O+=V+"="+s.params[V]}),O.length>0&&(p+="; params=["+O+"]")}return p+="]",p}var ya=class{constructor(){this.hasFlag=s=>(this.flags&It[s])>0}setFlag(s){return this.flags=this.flags|It[s]}getMode(){return(this.flags||0)&It.MODE_ALL}encodeModesToFlags(s){s.forEach(r=>this.setFlag(r))}decodeModesFromFlags(){const s=[];return ra.forEach(r=>{this.hasFlag(r)&&s.push(r)}),s.length>0?s:void 0}},va=ya,Oo=class{constructor(s,r,l,d,p){this.previous=s,this.current=r,r==="attached"&&(this.resumed=l,this.hasBacklog=d),p&&(this.reason=p)}},or=Oo,ui=function(){};function gs(s){if(s&&"params"in s&&!ne(s.params))return new _("options.params must be an object",4e4,400);if(s&&"modes"in s){if(!Array.isArray(s.modes))return new _("options.modes must be an array",4e4,400);for(let r=0;r<s.modes.length;r++){const l=s.modes[r];if(!l||typeof l!="string"||!ra.includes(String.prototype.toUpperCase.call(l)))return new _("Invalid channel mode: "+l,4e4,400)}}}var Mo=class Wd extends gt{constructor(r,l,d){var p,v,E;super(r.logger),this._annotations=null,this._mode=0,this.retryCount=0,this.history=async function(O){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const V=this.client.rest.channelMixin;if(O&&O.untilAttach){if(this.state!=="attached")throw new _("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new _("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete O.untilAttach,O.from_serial=this.properties.attachSerial}return V.history(this,O)},this.whenState=O=>gt.prototype.whenState.call(this,O,this.state),S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel()","started; name = "+l),this.name=l,this.channelOptions=Xa((p=r._Crypto)!=null?p:null,this.logger,d),this.client=r,this._presence=r._RealtimePresence?new r._RealtimePresence.RealtimePresence(this):null,r._Annotations&&(this._annotations=new r._Annotations.RealtimeAnnotations(this)),this.connectionManager=r.connection.connectionManager,this.state="initialized",this.subscriptions=new gt(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(d),this.errorReason=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:r.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new gt(this.logger),(v=r.options.plugins)!=null&&v.Push&&(this._push=new r.options.plugins.Push.PushChannel(this)),(E=r.options.plugins)!=null&&E.LiveObjects&&(this._object=new r.options.plugins.LiveObjects.RealtimeObject(this))}get presence(){return this._presence||mt("RealtimePresence"),this._presence}get annotations(){return this._annotations||mt("Annotations"),this._annotations}get push(){return this._push||mt("Push"),this._push}get object(){return this._object||mt("LiveObjects"),this._object}invalidStateError(){return new _("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(r){return r=Array.prototype.slice.call(r),typeof r[0]=="function"&&r.unshift(null),r}async setOptions(r){var l;const d=this.channelOptions,p=gs(r);if(p)throw p;if(this.channelOptions=Xa((l=this.client._Crypto)!=null?l:null,this.logger,r),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(r,d))return this.attachImpl(),new Promise((v,E)=>{this._allChannelChanges.once(["attached","update","detached","failed"],function(O){switch(this.event){case"update":case"attached":v();break;default:E(O.reason)}})})}_shouldReattachToSetOptions(r,l){if(!(this.state==="attached"||this.state==="attaching"))return!1;if(r?.params){const d=_o(r.params),p=_o(l.params);if(Object.keys(d).length!==Object.keys(p).length||!Zl(p,d))return!0}return!!(r?.modes&&(!l.modes||!na(r.modes,l.modes)))}async publish(...r){const l=r[0],d=r[1];let p,v;if(typeof l=="string"||l===null||l===void 0)p=[bn.fromValues({name:l,data:d})],v=r[2];else if(ne(l))p=[bn.fromValues(l)],v=r[1];else if(Array.isArray(l))p=bn.fromValuesArray(l),v=r[1];else throw new _("The single-argument form of publish() expects a message object or an array of message objects",40013,400);const E=this.client.options.maxMessageSize,O=await mc(p,this.channelOptions),V=sr(O);if(V>E)throw new _(`Maximum size of messages that can be published at once exceeded (was ${V} bytes; limit is ${E} bytes)`,40009,400);this.throwIfUnpublishableState(),S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+this.state+", message count = "+O.length);const j=Kt({action:Ae.MESSAGE,channel:this.name,messages:O,params:v?Js(v):void 0});return await this.sendMessage(j)||{serials:[]}}throwIfUnpublishableState(){if(!this.connectionManager.activeState())throw this.connectionManager.getError();if(this.state==="failed"||this.state==="suspended")throw this.invalidStateError()}onEvent(r){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const l=this.subscriptions;for(let d=0;d<r.length;d++){const p=r[d];l.emit(p.name,p)}}async attach(){return this.state==="attached"?null:new Promise((r,l)=>{this._attach(!1,null,(d,p)=>d?l(d):r(p))})}_attach(r,l,d){d||(d=v=>{v&&S.logAction(this.logger,S.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+v.toString())});const p=this.connectionManager;if(!p.activeState()){d(p.getError());return}(this.state!=="attaching"||r)&&this.requestState("attaching",l),this.once(function(v){switch(this.event){case"attached":d?.(null,v);break;case"detached":case"suspended":case"failed":d?.(v.reason||p.getError()||new _("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":d?.(new _("Attach request superseded by a subsequent detach request",9e4,409));break}})}attachImpl(){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const r=Kt({action:Ae.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this.channelOptions.modes&&r.encodeModesToFlags(Ht(this.channelOptions.modes)),this._attachResume&&r.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(r.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(r).catch(ui)}async detach(){const r=this.connectionManager;switch(this.state){case"suspended":this.notifyState("detached");return;case"detached":return;case"failed":throw new _("Unable to detach; channel state = failed",90001,400);default:if(r.state.state!=="connected"){this.notifyState("detached");return}this.requestState("detaching");case"detaching":return new Promise((l,d)=>{this.once(function(p){switch(this.event){case"detached":l();break;case"attached":case"suspended":case"failed":d(p.reason||r.getError()||new _("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":d(new _("Detach request superseded by a subsequent attach request",9e4,409));break}})})}}detachImpl(){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const r=Kt({action:Ae.DETACH,channel:this.name});this.sendMessage(r).catch(ui)}async subscribe(...r){const[l,d]=Wd.processListenerArgs(r);if(this.state==="failed")throw _.fromValues(this.invalidStateError());return l&&typeof l=="object"&&!Array.isArray(l)?this.client._FilteredSubscriptions.subscribeFilter(this,l,d):this.subscriptions.on(l,d),this.channelOptions.attachOnSubscribe!==!1?this.attach():null}unsubscribe(...r){var l;const[d,p]=Wd.processListenerArgs(r);if(typeof d=="object"&&!p||(l=this.filteredSubscriptions)!=null&&l.has(p)){this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,d,p).forEach(v=>this.subscriptions.off(v));return}this.subscriptions.off(d,p)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new se("Unable to sync to channel; not attached",4e4)}const r=this.connectionManager;if(!r.activeState())throw r.getError();const l=Kt({action:Ae.SYNC,channel:this.name});this.syncChannelSerial&&(l.channelSerial=this.syncChannelSerial),r.send(l)}async sendMessage(r){return new Promise((l,d)=>{this.connectionManager.send(r,this.client.options.queueMessages,(p,v)=>{p?d(p):l(v)})})}async sendPresence(r){const l=Kt({action:Ae.PRESENCE,channel:this.name,presence:r});await this.sendMessage(l)}async sendState(r){const l=Kt({action:Ae.OBJECT,channel:this.name,state:r});await this.sendMessage(l)}async processMessage(r){(r.action===Ae.ATTACHED||r.action===Ae.MESSAGE||r.action===Ae.PRESENCE||r.action===Ae.OBJECT||r.action===Ae.ANNOTATION)&&this.setChannelSerial(r.channelSerial);let l,d=!1;switch(r.action){case Ae.ATTACHED:{this.properties.attachSerial=r.channelSerial,this._mode=r.getMode(),this.params=r.params||{};const p=r.decodeModesFromFlags();this.modes=p&&xi(p)||void 0;const v=r.hasFlag("RESUMED"),E=r.hasFlag("HAS_PRESENCE"),O=r.hasFlag("HAS_BACKLOG"),V=r.hasFlag("HAS_OBJECTS");if(this.state==="attached"){v||(this._presence&&this._presence.onAttached(E),this._object&&this._object.onAttached(V));const j=new or(this.state,this.state,v,O,r.error);this._allChannelChanges.emit("update",j),(!v||this.channelOptions.updateOnAttached)&&this.emit("update",j)}else this.state==="detaching"?this.checkPendingState():this.notifyState("attached",r.error,v,E,O,V);break}case Ae.DETACHED:{const p=r.error?_.fromValues(r.error):new _("Channel detached",90001,404);this.state==="detaching"?this.notifyState("detached",p):this.state==="attaching"?this.notifyState("suspended",p):(this.state==="attached"||this.state==="suspended")&&this.requestState("attaching",p);break}case Ae.SYNC:if(d=!0,l=this.syncChannelSerial=r.channelSerial,!r.presence)break;case Ae.PRESENCE:{if(!r.presence)break;ri(r);const p=this.channelOptions;if(this._presence){const v=await Promise.all(r.presence.map(E=>E.decode(p,this.logger)));this._presence.setPresence(v,d,l)}break}case Ae.OBJECT:case Ae.OBJECT_SYNC:{if(!this._object||!r.state)return;ri(r);const p=this.client.connection.connectionManager.getActiveTransportFormat(),v=r.state.map(E=>E.decode(this.client,p));r.action===Ae.OBJECT?this._object.handleObjectMessages(v):this._object.handleObjectSyncMessages(v,r.channelSerial);break}case Ae.MESSAGE:{if(this.state!=="attached"){S.logAction(this.logger,S.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+r.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}ri(r);const p=r.messages,v=p[0],E=p[p.length-1];if(v.extras&&v.extras.delta&&v.extras.delta.from!==this._lastPayload.messageId){const V='Delta message decode failure - previous message not available for message "'+r.id+'" on this channel "'+this.name+'".';S.logAction(this.logger,S.LOG_ERROR,"RealtimeChannel.processMessage()",V),this._startDecodeFailureRecovery(new _(V,40018,400));break}let O=[];for(let V=0;V<p.length;V++){const{decoded:j,err:Z}=await p[V].decodeWithErr(this._decodingContext,this.logger);if(O[V]=j,Z)switch(Z.code){case 40018:this._startDecodeFailureRecovery(Z);return;case 40019:case 40021:this.notifyState("failed",Z);return}}this._lastPayload.messageId=E.id,this._lastPayload.protocolMessageChannelSerial=r.channelSerial,this.onEvent(O);break}case Ae.ANNOTATION:{ri(r);const p=this.channelOptions;if(this._annotations){const v=await Promise.all((r.annotations||[]).map(E=>E.decode(p,this.logger)));this._annotations._processIncoming(v)}break}case Ae.ERROR:{const p=r.error;p&&p.code==80016?this.checkPendingState():this.notifyState("failed",_.fromValues(p));break}default:S.logAction(this.logger,S.LOG_MAJOR,"RealtimeChannel.processMessage()","Protocol error: unrecognised message action ("+r.action+")")}}_startDecodeFailureRecovery(r){this._lastPayload.decodeFailureRecoveryInProgress||(S.logAction(this.logger,S.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,r,()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1}))}onAttached(){S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(r,l,d,p,v,E){if(S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+r),this.clearStateTimer(),["detached","suspended","failed"].includes(r)&&(this.properties.channelSerial=null),r===this.state)return;this._presence&&this._presence.actOnChannelState(r,p,l),this._object&&this._object.actOnChannelState(r,E),r==="suspended"&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),l&&(this.errorReason=l);const O=new or(this.state,r,d,v,l),V='Channel state for channel "'+this.name+'"',j=r+(l?"; reason: "+l:"");r==="failed"?S.logAction(this.logger,S.LOG_ERROR,V,j):S.logAction(this.logger,S.LOG_MAJOR,V,j),r!=="attaching"&&r!=="suspended"&&(this.retryCount=0),r==="attached"&&this.onAttached(),r==="attached"?this._attachResume=!0:(r==="detaching"||r==="failed")&&(this._attachResume=!1),this.state=r,this._allChannelChanges.emit(r,O),this.emit(r,O)}requestState(r,l){S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+r),this.notifyState(r,l),this.checkPendingState()}checkPendingState(){if(!this.connectionManager.state.sendEvents){S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}switch(S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync();break}}timeoutPendingState(){switch(this.state){case"attaching":{const r=new _("Channel attach timed out",90007,408);this.notifyState("suspended",r);break}case"detaching":{const r=new _("Channel detach timed out",90007,408);this.notifyState("attached",r);break}default:this.checkPendingState();break}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout(()=>{S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()},this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const r=this.stateTimer;r&&(clearTimeout(r),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const r=eo(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(()=>{this.state==="suspended"&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))},r)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const r=this.state;return r==="initialized"||r==="detached"||r==="failed"?null:new _("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+r,90001,400)}setChannelSerial(r){S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+r+"; previous = "+this.properties.channelSerial),r&&(this.properties.channelSerial=r)}async status(){return this.client.rest.channelMixin.status(this)}async getMessage(r){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.getMessage()","channel = "+this.name),this.client.rest.channelMixin.getMessage(this,r)}async updateMessage(r,l,d){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.updateMessage()","channel = "+this.name),this.sendUpdate(r,"message.update",l,d)}async deleteMessage(r,l,d){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.deleteMessage()","channel = "+this.name),this.sendUpdate(r,"message.delete",l,d)}async appendMessage(r,l,d){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.appendMessage()","channel = "+this.name),this.sendUpdate(r,"message.append",l,d)}async sendUpdate(r,l,d,p){var v,E;if(!r.serial)throw new _('This message lacks a serial and cannot be updated. Make sure you have enabled "Message annotations, updates, and deletes" in channel settings on your dashboard.',40003,400);this.throwIfUnpublishableState();const V=await bn.fromValues(B(D({},r),{action:l,version:d})).encode(this.channelOptions),j=Kt({action:Ae.MESSAGE,channel:this.name,messages:[V],params:p?Js(p):void 0}),Z=await this.sendMessage(j);return{versionSerial:(E=(v=Z?.serials)==null?void 0:v[0])!=null?E:null}}async getMessageVersions(r,l){return S.logAction(this.logger,S.LOG_MICRO,"RealtimeChannel.getMessageVersions()","channel = "+this.name),this.client.rest.channelMixin.getMessageVersions(this,r,l)}async ensureAttached(){switch(this.state){case"attached":case"suspended":break;case"initialized":case"detached":case"detaching":case"attaching":await this.attach();break;default:throw _.fromValues(this.invalidStateError())}}};function _o(s){const r=s||{},{agent:l}=r;return X(r,["agent"])}var Sn=Mo,_c=class{constructor(s){this.channel=s,this.logger=s.logger,this.subscriptions=new gt(this.logger)}async publish(s,r){const l=this.channel.name,d=Ec(s,r),p=await d.encode();this.channel.throwIfUnpublishableState(),S.logAction(this.logger,S.LOG_MICRO,"RealtimeAnnotations.publish()","channelName = "+l+", sending annotation with messageSerial = "+d.messageSerial+", type = "+d.type);const v=Kt({action:Ae.ANNOTATION,channel:l,annotations:[p]});await this.channel.sendMessage(v)}async delete(s,r){r.action="annotation.delete",await this.publish(s,r)}async subscribe(...s){const r=Sn.processListenerArgs(s),l=r[0],d=r[1],p=this.channel;if(p.state==="failed")throw _.fromValues(p.invalidStateError());if(this.subscriptions.on(l,d),this.channel.channelOptions.attachOnSubscribe!==!1&&await p.attach(),(this.channel.state==="attached"&&this.channel._mode&It.ANNOTATION_SUBSCRIBE)===0)throw new _("You are trying to add an annotation listener, but you haven't requested the annotation_subscribe channel mode in ChannelOptions, so this won't do anything (we only deliver annotations to clients who have explicitly requested them)",93001,400)}unsubscribe(...s){const r=Sn.processListenerArgs(s),l=r[0],d=r[1];this.subscriptions.off(l,d)}_processIncoming(s){for(const r of s)this.subscriptions.emit(r.type||"",r)}async get(s,r){return ki.prototype.get.call(this,s,r)}},No=_c,fi=class Hu extends da{constructor(r){var l,d;if(!Hu._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(Se.objectifyOptions(r,!0,"Rest",S.defaultLogger,B(D({},ps),{Crypto:(l=Hu.Crypto)!=null?l:void 0,MsgPack:(d=Hu._MsgPack)!=null?d:void 0,Annotations:{Annotation:pa,WireAnnotation:Li,RealtimeAnnotations:No,RestAnnotations:ki}})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(r){this._Crypto=r}};fi._Crypto=null,fi.Message=Ac,fi.PresenceMessage=ma,fi.Annotation=wc,fi._MsgPack=null,fi._Http=Ja;var Do=fi,Mf=class extends gt{constructor(s){super(s),this.messages=[]}count(){return this.messages.length}push(s){this.messages.push(s)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(s){this.messages.push.apply(this.messages,s)}prepend(s){this.messages.unshift.apply(this.messages,s)}completeMessages(s,r,l){S.logAction(this.logger,S.LOG_MICRO,"MessageQueue.completeMessages()",s=="all"?"(all)":"serial = "+s.serial+"; count = "+s.count),r=r||null;const d=this.messages;if(d.length===0)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");let p=[];if(s==="all")p=d.splice(0);else{const v=d[0];if(v){const E=v.message.msgSerial,O=s.serial+s.count;O>E&&(p=d.splice(0,O-E))}}for(let v=0;v<p.length;v++){const E=p[v],O=l?.[v];E.callback(r,O)}d.length==0&&this.emit("idle")}completeAllMessages(s){this.completeMessages("all",s)}resetSendAttempted(){for(let s of this.messages)s.sendAttempted=!1}clear(){S.logAction(this.logger,S.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},Nc=Mf,Lo=class{constructor(s,r){this.message=s,this.callback=r,this.merged=!1;const l=s.action;this.sendAttempted=!1,this.ackRequired=typeof l=="number"&&[Ae.MESSAGE,Ae.PRESENCE,Ae.ANNOTATION,Ae.OBJECT].includes(l)}},Dc=class extends gt{constructor(s){super(s.logger),this.transport=s,this.messageQueue=new Nc(this.logger),s.on("ack",(r,l,d)=>{this.onAck(r,l,d)}),s.on("nack",(r,l,d)=>{this.onNack(r,l,d)})}onAck(s,r,l){S.logAction(this.logger,S.LOG_MICRO,"Protocol.onAck()","serial = "+s+"; count = "+r),this.messageQueue.completeMessages({serial:s,count:r},null,l)}onNack(s,r,l){S.logAction(this.logger,S.LOG_ERROR,"Protocol.onNack()","serial = "+s+"; count = "+r+"; err = "+Me(l)),l||(l=new _("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages({serial:s,count:r},l)}onceIdle(s){const r=this.messageQueue;if(r.count()===0){s();return}r.once("idle",s)}send(s){s.ackRequired&&this.messageQueue.push(s),this.logger.shouldLog(S.LOG_MICRO)&&S.logActionNoStrip(this.logger,S.LOG_MICRO,"Protocol.send()","sending msg; "+ci(s.message,this.transport.connectionManager.realtime._RealtimePresence,this.transport.connectionManager.realtime._Annotations,this.transport.connectionManager.realtime._liveObjectsPlugin)),s.sendAttempted=!0,this.transport.send(s.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const s=this.transport;this.onceIdle(function(){s.disconnect()})}},ko=Dc,Tn=class{constructor(s,r,l,d){this.previous=s,this.current=r,l&&(this.retryIn=l),d&&(this.reason=d)}},Ui=Tn,yt={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},ys={disconnected:()=>_.fromValues({statusCode:400,code:yt.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>_.fromValues({statusCode:400,code:yt.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>_.fromValues({statusCode:400,code:yt.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>_.fromValues({statusCode:400,code:yt.CLOSING,message:"Connection closing"}),closed:()=>_.fromValues({statusCode:400,code:yt.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>_.fromValues({statusCode:500,code:yt.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>_.fromValues({statusCode:500,code:yt.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})};function Uo(s){return!s.statusCode||!s.code||s.statusCode>=500?!0:Object.values(yt).includes(s.code)}var Mn=ys,lr=Kt({action:Ae.CLOSE}),jo=Kt({action:Ae.DISCONNECT}),ji=class extends gt{constructor(s,r,l,d){super(s.logger),d&&(l.format=void 0,l.heartbeats=!0),this.connectionManager=s,this.auth=r,this.params=l,this.timeouts=l.options.timeouts,this.format=l.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",Mn.closed())}disconnect(s){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",s||Mn.disconnected())}fail(s){this.isConnected&&this.requestDisconnect(),this.finish("failed",s||Mn.failed())}finish(s,r){var l;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout((l=this.idleTimer)!=null?l:void 0),this.idleTimer=null,this.emit(s,r),this.dispose())}onProtocolMessage(s){switch(this.logger.shouldLog(S.LOG_MICRO)&&S.logActionNoStrip(this.logger,S.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+ci(s,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._liveObjectsPlugin)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),s.action){case Ae.HEARTBEAT:S.logActionNoStrip(this.logger,S.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",s.id);break;case Ae.CONNECTED:this.onConnect(s),this.emit("connected",s.error,s.connectionId,s.connectionDetails,s);break;case Ae.CLOSED:this.onClose(s);break;case Ae.DISCONNECTED:this.onDisconnect(s);break;case Ae.ACK:this.emit("ack",s.msgSerial,s.count,s.res);break;case Ae.NACK:this.emit("nack",s.msgSerial,s.count,s.error);break;case Ae.SYNC:this.connectionManager.onChannelMessage(s,this);break;case Ae.ACTIVATE:break;case Ae.AUTH:Gt(this.auth.authorize(),r=>{r&&S.logAction(this.logger,S.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+Me(r))});break;case Ae.ERROR:if(S.logAction(this.logger,S.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+G.Config.inspect(s.error)+(s.channel?", channel: "+s.channel:"")),s.channel===void 0){this.onFatalError(s);break}this.connectionManager.onChannelMessage(s,this);break;default:this.connectionManager.onChannelMessage(s,this)}}onConnect(s){if(this.isConnected=!0,!s.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const r=s.connectionDetails.maxIdleInterval;r&&(this.maxIdleInterval=r+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(s){const r=s&&s.error;S.logAction(this.logger,S.LOG_MINOR,"Transport.onDisconnect()","err = "+Me(r)),this.finish("disconnected",r)}onFatalError(s){const r=s&&s.error;S.logAction(this.logger,S.LOG_MINOR,"Transport.onFatalError()","err = "+Me(r)),this.finish("failed",r)}onClose(s){const r=s&&s.error;S.logAction(this.logger,S.LOG_MINOR,"Transport.onClose()","err = "+Me(r)),this.finish("closed",r)}requestClose(){S.logAction(this.logger,S.LOG_MINOR,"Transport.requestClose()",""),this.send(lr)}requestDisconnect(){S.logAction(this.logger,S.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(jo)}ping(s){const r={action:Ae.HEARTBEAT};s&&(r.id=s),this.send(Kt(r))}dispose(){S.logAction(this.logger,S.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(s){this.idleTimer||(this.idleTimer=setTimeout(()=>{this.onIdleTimerExpire()},s))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const s=Date.now()-this.lastActivity,r=this.maxIdleInterval-s;if(r<=0){const l="No activity seen from realtime in "+s+"ms; assuming connection has dropped";S.logAction(this.logger,S.LOG_ERROR,"Transport.onIdleTimerExpire()",l),this.disconnect(new _(l,80003,408))}else this.setIdleTimer(r+100)}static tryConnect(s,r,l,d,p){const v=new s(r,l,d);let E;const O=function(j){clearTimeout(E),p({event:this.event,error:j})},V=r.options.timeouts.realtimeRequestTimeout;return E=setTimeout(()=>{v.off(["preconnect","disconnected","failed"]),v.dispose(),O.call({event:"disconnected"},new _("Timeout waiting for transport to indicate itself viable",5e4,500))},V),v.on(["failed","disconnected"],O),v.on("preconnect",function(){S.logAction(r.logger,S.LOG_MINOR,"Transport.tryConnect()","viable transport "+v),clearTimeout(E),v.off(["failed","disconnected"],O),p(null,v)}),v.connect(),v}static isAvailable(){throw new _("isAvailable not implemented for transport",5e4,500)}},Bi=ji,Et;(s=>{s.WebSocket="web_socket",s.Comet="comet",s.XhrPolling="xhr_polling"})(Et||(Et={}));var vs=typeof Is<"u"?Is:typeof window<"u"?window:self,Bo=()=>{var s;return typeof G.WebStorage<"u"&&((s=G.WebStorage)==null?void 0:s.localSupported)},xt=()=>{var s;return typeof G.WebStorage<"u"&&((s=G.WebStorage)==null?void 0:s.sessionSupported)},cr=function(){},An="ably-transport-preference";function ur(s){try{return JSON.parse(s)}catch{return null}}var fr=class{constructor(s,r,l,d){this.options=s,this.host=r,this.mode=l,this.connectionKey=d,this.format=s.useBinaryProtocol?"msgpack":"json"}getConnectParams(s){const r=s?Oe(s):{},l=this.options;switch(this.mode){case"resume":r.resume=this.connectionKey;break;case"recover":{const d=ur(l.recover);d&&(r.recover=d.connectionKey);break}}return l.clientId!==void 0&&(r.clientId=l.clientId),l.echoMessages===!1&&(r.echo="false"),this.format!==void 0&&(r.format=this.format),this.stream!==void 0&&(r.stream=this.stream),this.heartbeats!==void 0&&(r.heartbeats=this.heartbeats),r.v=Se.protocolVersion,r.agent=Nt(this.options),l.transportParams!==void 0&&ue(r,l.transportParams),r}toString(){let s="[mode="+this.mode;return this.host&&(s+=",host="+this.host),this.connectionKey&&(s+=",connectionKey="+this.connectionKey),this.format&&(s+=",format="+this.format),s+="]",s}},Pi=class hS extends gt{constructor(r,l){super(r.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=r,this.initTransports(),this.options=l;const d=l.timeouts,p=d.webSocketConnectTimeout+d.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:p,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:d.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:d.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:d.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new Nc(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=d.connectionStateTtl,this.maxIdleInterval=null,this.transports=nt(l.transports||Se.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(Et.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(Et.XhrPolling)?this.baseTransport=Et.XhrPolling:this.transports.includes(Et.Comet)&&(this.baseTransport=Et.Comet),this.domains=Se.getHosts(l),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,S.logAction(this.logger,S.LOG_MINOR,"Realtime.ConnectionManager()","started"),S.logAction(this.logger,S.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(l.transports||Se.defaultTransports)+"]"),S.logAction(this.logger,S.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),S.logAction(this.logger,S.LOG_MICRO,"Realtime.ConnectionManager()","http domains = ["+this.domains+"]"),!this.transports.length){const E="no requested transports available";throw S.logAction(this.logger,S.LOG_ERROR,"realtime.ConnectionManager()",E),new Error(E)}const v=G.Config.addEventListener;v&&(xt()&&typeof l.recover=="function"&&v("beforeunload",this.persistConnection.bind(this)),l.closeOnUnload===!0&&v("beforeunload",()=>{S.logAction(this.logger,S.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})}),v("online",()=>{var E;this.state==this.states.disconnected||this.state==this.states.suspended?(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager caught browser online event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&((E=this.pendingTransport)==null||E.off(),this.disconnectAllTransports(),this.startConnect())}),v("offline",()=>{this.state==this.states.connected&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager caught browser offline event","disconnecting active transport"),this.disconnectAllTransports())}))}static supportedTransports(r){const l={supportedTransports:{}};return this.initTransports(r,l),l.supportedTransports}static initTransports(r,l){const d=D(D({},G.Transports.bundledImplementations),r);[Et.WebSocket,...G.Transports.order].forEach(p=>{const v=d[p];v&&v.isAvailable()&&(l.supportedTransports[p]=v)})}initTransports(){hS.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(r,l){return new fr(this.options,r,l,this.connectionKey)}getTransportParams(r){(d=>{if(this.connectionKey){d("resume");return}if(typeof this.options.recover=="string"){d("recover");return}const p=this.options.recover,v=this.getSessionRecoverData(),E=this.sessionRecoveryName();if(v&&typeof p=="function"){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+E+")"),p(v,O=>{O?(this.options.recover=v.recoveryKey,d("recover")):d("clean")});return}d("clean")})(d=>{const p=this.createTransportParams(null,d);if(d==="recover"){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const v=ur(this.options.recover);v&&(this.msgSerial=v.msgSerial)}else S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+p.toString());r(p)})}tryATransport(r,l,d){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+l),this.proposedTransport=Bi.tryConnect(this.supportedTransports[l],this,this.realtime.auth,r,(p,v)=>{const E=this.state;if(E==this.states.closing||E==this.states.closed||E==this.states.failed){v&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+E.state+" while we were attempting the transport; closing "+v),v.close()),d(!0);return}if(p){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+l+" "+p.event+", err: "+p.error.toString()),ft.isTokenErr(p.error)&&!(this.errorReason&&ft.isTokenErr(this.errorReason))?(this.errorReason=p.error,Gt(this.realtime.auth._forceNewToken(null,null),O=>{if(O){this.actOnErrorFromAuthorize(O);return}this.tryATransport(r,l,d)})):p.event==="failed"?(this.notifyState({state:"failed",error:p.error}),d(!0)):p.event==="disconnected"&&(Uo(p.error)?d(!1):(this.notifyState({state:this.states.connecting.failState,error:p.error}),d(!0)));return}S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+l+"; setting pending"),this.setTransportPending(v,r),d(null,v)})}setTransportPending(r,l){const d=l.mode;S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+r+"; mode = "+d),this.pendingTransport=r,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),r.once("connected",(v,E,O)=>{this.activateTransport(v,r,E,O),d==="recover"&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())});const p=this;r.on(["disconnected","closed","failed"],function(v){p.deactivateTransport(r,this.event,v)}),this.emit("transport.pending",r)}activateTransport(r,l,d,p){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+l),r&&S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+r),d&&S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+d),p&&S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(p)),this.persistTransportPreference(l);const v=this.state,E=this.states.connected.state;if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+v.state),v.state==this.states.closing.state||v.state==this.states.closed.state||v.state==this.states.failed.state)return S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),l.disconnect(),!1;if(delete this.pendingTransport,!l.isConnected)return S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+l+" since it appears to no longer be connected"),!1;const O=this.activeProtocol;this.activeProtocol=new ko(l),this.host=l.params.host;const V=p.connectionKey;if(V&&this.connectionKey!=V&&this.setConnection(d,p,!!r),this.onConnectionDetailsUpdate(p,l),G.Config.nextTick(()=>{l.on("connected",(j,Z,$)=>{this.onConnectionDetailsUpdate($,l),this.emit("update",new Ui(E,E,null,j))})}),v.state===this.states.connected.state?r&&(this.errorReason=this.realtime.connection.errorReason=r,this.emit("update",new Ui(E,E,null,r))):(this.notifyState({state:"connected",error:r}),this.errorReason=this.realtime.connection.errorReason=r||null),this.emit("transport.active",l),O)if(O.messageQueue.count()>0&&S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+O.transport.shortName+", new one is "+l.shortName+") finishing with "+O.messageQueue.count()+" messages still pending"),O.transport===l){const j="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+l.shortName+"; stack = "+new Error().stack;S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.activateTransport()",j)}else O.finish();return!0}deactivateTransport(r,l,d){const p=this.activeProtocol,v=p&&p.getTransport()===r,E=r===this.pendingTransport,O=this.noTransportsScheduledForActivation();if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+r),S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+l+(v?"; was active":E?"; was pending":"")+(O?"":"; another transport is scheduled for activation")),d&&d.message&&S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+d.message),v&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(p.getPendingMessages()),p.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",r),v&&O||v&&l==="failed"||l==="closed"||p===null&&E){if(l==="disconnected"&&d&&d.statusCode>500&&this.domains.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,this.notifyState({state:l,error:d,retryImmediately:!0});return}const V=l==="failed"&&ft.isTokenErr(d)?"disconnected":l;this.notifyState({state:V,error:d});return}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(r,l,d){const p=this.connectionId;(p&&p!==r||!p&&d)&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==r&&S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=r,this.realtime.connection.key=this.connectionKey=l.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.queuedMessages.resetSendAttempted(),this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const r=Date.now()-this.lastActivity;r>this.connectionStateTtl+this.maxIdleInterval&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+r+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(xt()){const r=this.createRecoveryKey();r&&this.setSessionRecoverData({recoveryKey:r,disconnectedAt:Date.now(),location:vs.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getActiveTransportFormat(){var r;return(r=this.activeProtocol)==null?void 0:r.getTransport().format}getError(){if(this.errorReason){const r=se.fromValues(this.errorReason);return r.cause=this.errorReason,r}return this.getStateError()}getStateError(){var r,l;return(l=(r=Mn)[this.state.state])==null?void 0:l.call(r)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(r){const l="Connection state",d=r.current+(r.reason?"; reason: "+r.reason:"");r.current==="failed"?S.logAction(this.logger,S.LOG_ERROR,l,d):S.logAction(this.logger,S.LOG_MAJOR,l,d),S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+r.current+"; reason = "+(r.reason&&r.reason.message));const p=this.state=this.states[r.current];r.reason&&(this.errorReason=r.reason,this.realtime.connection.errorReason=r.reason),(p.terminal||p.state==="suspended")&&this.clearConnection(),this.emit("connectionstate",r)}startTransitionTimer(r){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+r.state),this.transitionTimer&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(()=>{this.transitionTimer&&(this.transitionTimer=null,S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager "+r.state+" timer expired","requesting new state: "+r.failState),this.notifyState({state:r.failState}))},r.retryDelay)}cancelTransitionTimer(){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout(()=>{this.suspendTimer&&(this.suspendTimer=null,S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))},this.connectionStateTtl))}checkSuspendTimer(r){r!=="disconnected"&&r!=="suspended"&&r!=="connecting"&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(r){this.retryTimer=setTimeout(()=>{S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})},r)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout(()=>{S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.checkWsConnectivity().then(()=>{S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0}).catch(()=>{S.logAction(this.logger,S.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1}),this.realtime.http.checkConnectivity&&Gt(this.realtime.http.checkConnectivity(),(r,l)=>{r||!l?(S.logAction(this.logger,S.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new _("Unable to connect (network unreachable)",80003,404)})):S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")})},this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(r){this.webSocketGiveUpTimer=setTimeout(()=>{var l,d;this.wsCheckResult||(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,(l=this.proposedTransport)==null||l.dispose(),(d=this.pendingTransport)==null||d.dispose(),this.connectBase(r,++this.connectCounter)):S.logAction(this.logger,S.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))},this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(r){var l,d;const p=r.state,v=p==="disconnected"&&(this.state===this.states.connected||r.retryImmediately||this.state===this.states.connecting&&r.error&&ft.isTokenErr(r.error)&&!(this.errorReason&&ft.isTokenErr(this.errorReason)));if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+p+(v?"; will retry connection immediately":"")),p==this.state.state||(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(r.state),(p==="suspended"||p==="connected")&&(this.disconnectedRetryCount=0),this.state.terminal))return;const E=this.states[r.state];let O=E.retryDelay;E.state==="disconnected"&&(this.disconnectedRetryCount++,O=eo(E.retryDelay,this.disconnectedRetryCount));const V=new Ui(this.state.state,E.state,O,r.error||((d=(l=Mn)[E.state])==null?void 0:d.call(l)));if(v){const j=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},Z=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;Z&&Z<1e3?(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+Z+"ms ago, waiting another "+(1e3-Z)+"ms before trying again"),setTimeout(j,1e3-Z)):G.Config.nextTick(j)}else(p==="disconnected"||p==="suspended")&&this.startRetryTimer(O);(p==="disconnected"&&!v||p==="suspended"||E.terminal)&&G.Config.nextTick(()=>{this.disconnectAllTransports()}),p=="connected"&&!this.activeProtocol&&S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(V),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(p,V.reason),this.failQueuedMessages(V.reason))}requestState(r){var l,d;const p=r.state;if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+p+"; current state: "+this.state.state),p==this.state.state||(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(p),p=="connecting"&&this.state.state=="connected")||p=="closing"&&this.state.state=="closed")return;const v=this.states[p],E=new Ui(this.state.state,v.state,null,r.error||((d=(l=Mn)[v.state])==null?void 0:d.call(l)));this.enactStateChange(E),p=="connecting"&&G.Config.nextTick(()=>{this.startConnect()}),p=="closing"&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}const r=this.realtime.auth,l=++this.connectCounter,d=()=>{this.checkConnectionStateFreshness(),this.getTransportParams(p=>{if(p.mode==="recover"&&p.options.recover){const v=ur(p.options.recover);v&&this.realtime.channels.recoverChannels(v.channelSerials)}l===this.connectCounter&&this.connectImpl(p,l)})};if(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),r.method==="basic")d();else{const p=v=>{l===this.connectCounter&&(v?this.actOnErrorFromAuthorize(v):d())};this.errorReason&&ft.isTokenErr(this.errorReason)?Gt(r._forceNewToken(null,null),p):Gt(r._ensureValidAuthCredentials(!1),p)}}connectImpl(r,l){const d=this.state.state;if(d!==this.states.connecting.state){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+d);return}const p=this.getTransportPreference();p&&p===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then(()=>{this.unpersistTransportPreference(),this.state===this.states.connecting&&(S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(r,++this.connectCounter))}).catch(cr),p&&p===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(r,l):this.connectWs(r,l)}connectWs(r,l){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.connectWs()"),this.wsCheckResult=null,this.abandonedWebSocket=!1,this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(r),this.tryTransportWithFallbacks("web_socket",r,!0,l,()=>this.wsCheckResult!==!1&&!this.abandonedWebSocket)}connectBase(r,l){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,r,!1,l,()=>!0):this.notifyState({state:"disconnected",error:new _("No transports left to try",8e4,404)})}tryTransportWithFallbacks(r,l,d,p,v){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",r);const E=$=>{this.notifyState({state:this.states.connecting.failState,error:$})},O=this.domains.slice(),V=($,oe)=>{if(p===this.connectCounter){if(!v()){oe&&oe.dispose();return}!oe&&!$&&Z()}},j=O.shift();if(!j){E(new _("Unable to connect (no available host)",80003,404));return}l.host=j;const Z=()=>{if(!O.length){E(new _("Unable to connect (and no more fallback hosts to try)",80003,404));return}if(!this.realtime.http.checkConnectivity){E(new se("Internal error: Http.checkConnectivity not set",null,500));return}Gt(this.realtime.http.checkConnectivity(),($,oe)=>{if(p===this.connectCounter&&v()){if($){E($);return}if(!oe){E(new _("Unable to connect (network unreachable)",80003,404));return}l.host=Zs(O),this.tryATransport(l,r,V)}})};if(this.forceFallbackHost&&O.length){this.forceFallbackHost=!1,Z();return}this.tryATransport(l,r,V)}closeImpl(){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(r,l){var d;switch(this.state.state){case"connected":{S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const p=(d=this.activeProtocol)==null?void 0:d.getTransport();p&&p.onAuthUpdated&&p.onAuthUpdated(r);const v=Kt({action:Ae.AUTH,auth:{accessToken:r.token}});this.send(v);const E=()=>{this.off(O),l(null,r)},O=V=>{V.current==="failed"&&(this.off(E),this.off(O),l(V.reason||this.getStateError()))};this.once("connectiondetails",E),this.on("connectionstate",O);break}case"connecting":S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const p=v=>{switch(v.current){case"connected":this.off(p),l(null,r);break;case"failed":case"closed":case"suspended":this.off(p),l(v.reason||this.getStateError());break}};this.on("connectionstate",p),this.state.state==="connecting"?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(r,l,d){d=d||cr;const p=this.state;if(p.sendEvents){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new Lo(r,d));return}if(!(l&&p.queueEvents)){const E="rejecting event, queueEvent was "+l+", state was "+p.state;S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.send()",E),d(this.errorReason||new _(E,9e4,400));return}this.logger.shouldLog(S.LOG_MICRO)&&S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+ci(r,this.realtime._RealtimePresence,this.realtime._Annotations,this.realtime._liveObjectsPlugin)),this.queue(r,d)}sendImpl(r){const l=r.message;r.ackRequired&&!r.sendAttempted&&(l.msgSerial=this.msgSerial++);try{this.activeProtocol.send(r)}catch(d){S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+d.stack)}}queue(r,l){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.queue()","queueing event"),this.queuedMessages.push(new Lo(r,l))}sendQueuedMessages(){S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");let r;for(;r=this.queuedMessages.shift();)this.sendImpl(r)}queuePendingMessages(r){r&&r.length&&(S.logAction(this.logger,S.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+r.length+" pending messages"),this.queuedMessages.prepend(r))}failQueuedMessages(r){const l=this.queuedMessages.count();l>0&&(S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+l+" queued messages, err = "+Me(r)),this.queuedMessages.completeAllMessages(r))}onChannelMessage(r,l){this.pendingChannelMessagesState.queue.push({message:r,transport:l}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const r=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(r.message).catch(l=>{S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",l)}).finally(()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()})}}async processChannelMessage(r){await this.realtime.channels.processChannelMessage(r)}async ping(){var r;if(this.state.state!=="connected")throw new _("Unable to ping service; not connected",4e4,400);const l=(r=this.activeProtocol)==null?void 0:r.getTransport();if(!l)throw this.getStateError();S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.ping()","transport = "+l);const d=Date.now(),p=$s();return ss(new Promise(v=>{const E=O=>{O===p&&(l.off("heartbeat",E),v(Date.now()-d))};l.on("heartbeat",E),l.ping(p)}),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(r){this.activeProtocol.getTransport().fail(r)}getTransportPreference(){var r,l;return this.transportPreference||Bo()&&((l=(r=G.WebStorage)==null?void 0:r.get)==null?void 0:l.call(r,An))}persistTransportPreference(r){var l,d;this.transportPreference=r.shortName,Bo()&&((d=(l=G.WebStorage)==null?void 0:l.set)==null||d.call(l,An,r.shortName))}unpersistTransportPreference(){var r,l;this.transportPreference=null,Bo()&&((l=(r=G.WebStorage)==null?void 0:r.remove)==null||l.call(r,An))}actOnErrorFromAuthorize(r){if(r.code===40171)this.notifyState({state:"failed",error:r});else if(r.code===40102)this.notifyState({state:"failed",error:r});else if(r.statusCode===Qa.Forbidden){const l="Client configured authentication provider returned 403; failing the connection";S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",l),this.notifyState({state:"failed",error:new _(l,80019,403,r)})}else{const l="Client configured authentication provider request failed";S.logAction(this.logger,S.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",l),this.notifyState({state:this.state.failState,error:new _(l,80019,401,r)})}}onConnectionDetailsUpdate(r,l){if(!r)return;this.connectionDetails=r,r.maxMessageSize&&(this.options.maxMessageSize=r.maxMessageSize);const d=r.clientId;if(d){const v=this.realtime.auth._uncheckedSetClientId(d);if(v){S.logAction(this.logger,S.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",v.message),l.fail(v);return}}const p=r.connectionStateTtl;p&&(this.connectionStateTtl=p),this.maxIdleInterval=r.maxIdleInterval,this.emit("connectiondetails",r)}checkWsConnectivity(){const r=this.options.wsConnectivityCheckUrl||Se.wsConnectivityCheckUrl,l=new G.Config.WebSocket(r);return new Promise((d,p)=>{let v=!1;l.onopen=()=>{v||(v=!0,d(),l.close())},l.onclose=l.onerror=()=>{v||(v=!0,p())}})}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var r,l;return xt()&&((l=(r=G.WebStorage)==null?void 0:r.getSession)==null?void 0:l.call(r,this.sessionRecoveryName()))}setSessionRecoverData(r){var l,d;return xt()&&((d=(l=G.WebStorage)==null?void 0:l.setSession)==null?void 0:d.call(l,this.sessionRecoveryName(),r))}clearSessionRecoverData(){var r,l;return xt()&&((l=(r=G.WebStorage)==null?void 0:r.removeSession)==null?void 0:l.call(r,this.sessionRecoveryName()))}},hr=Pi,Lc=class extends gt{constructor(s,r){super(s.logger),this.whenState=l=>gt.prototype.whenState.call(this,l,this.state),this.ably=s,this.connectionManager=new hr(s,r),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",l=>{const d=this.state=l.current;G.Config.nextTick(()=>{this.emit(d,l)})}),this.connectionManager.on("update",l=>{G.Config.nextTick(()=>{this.emit("update",l)})})}connect(){S.logAction(this.logger,S.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return S.logAction(this.logger,S.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){S.logAction(this.logger,S.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},Po=Lc,Vo=class dS extends yo{constructor(r){var l,d,p,v;if(super(Se.objectifyOptions(r,!1,"BaseRealtime",S.defaultLogger)),S.logAction(this.logger,S.LOG_MINOR,"Realtime()",""),typeof EdgeRuntime=="string")throw new _(`Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === 'string')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.`,4e4,400);this._additionalTransportImplementations=dS.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=(d=(l=this.options.plugins)==null?void 0:l.RealtimePresence)!=null?d:null,this._liveObjectsPlugin=(v=(p=this.options.plugins)==null?void 0:p.LiveObjects)!=null?v:null,this.connection=new Po(this,this.options),this._channels=new bs(this),this.options.autoConnect!==!1&&this.connect()}static transportImplementationsFromPlugins(r){const l={};return r?.WebSocketTransport&&(l[Et.WebSocket]=r.WebSocketTransport),r?.XHRPolling&&(l[Et.XhrPolling]=r.XHRPolling),l}get channels(){return this._channels}get clientId(){return this.auth.clientId}connect(){S.logAction(this.logger,S.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){S.logAction(this.logger,S.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};Vo.EventEmitter=gt;var an=Vo,bs=class extends gt{constructor(s){super(s.logger),this.realtime=s,this.all=Object.create(null),s.connection.connectionManager.on("transport.active",()=>{this.onTransportActive()})}channelSerials(){let s={};for(const r of gn(this.all,!0)){const l=this.all[r];l.properties.channelSerial&&(s[r]=l.properties.channelSerial)}return s}recoverChannels(s){for(const r of gn(s,!0)){const l=this.get(r);l.properties.channelSerial=s[r]}}async processChannelMessage(s){const r=s.channel;if(r===void 0){S.logAction(this.logger,S.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+s.action);return}const l=this.all[r];if(!l){S.logAction(this.logger,S.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+r);return}await l.processMessage(s)}onTransportActive(){for(const s in this.all){const r=this.all[s];r.state==="attaching"||r.state==="detaching"?r.checkPendingState():r.state==="suspended"?r._attach(!1,null):r.state==="attached"&&r.requestState("attaching")}}propogateConnectionInterruption(s,r){const l={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"},d=["attaching","attached","detaching","suspended"],p=l[s];for(const v in this.all){const E=this.all[v];d.includes(E.state)&&E.notifyState(p,r)}}get(s,r){s=String(s);let l=this.all[s];if(!l)l=this.all[s]=new Sn(this.realtime,s,r);else if(r){if(l._shouldReattachToSetOptions(r,l.channelOptions))throw new _("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);l.setOptions(r)}return l}getDerived(s,r,l){if(r.filter){const d=Oi(r.filter),p=ta(s);s=`[filter=${d}${p.qualifierParam}]${p.channelName}`}return this.get(s,l)}release(s){s=String(s);const r=this.all[s];if(!r)return;const l=r.getReleaseErr();if(l)throw l;delete this.all[s]}},Ss=an;function dr(s,r){if(s.isSynthesized()||r.isSynthesized())return s.timestamp>=r.timestamp;const l=s.parseId(),d=r.parseId();return l.msgSerial===d.msgSerial?l.index>d.index:l.msgSerial>d.msgSerial}var Vi=class extends gt{constructor(s,r,l=dr){super(s.logger),this.presence=s,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=r,this.newerThan=l}get(s){return this.map[s]}getClient(s){const r=this.map,l=[];for(const d in r){const p=r[d];p.clientId==s&&p.action!="absent"&&l.push(p)}return l}list(s){const r=this.map,l=s&&s.clientId,d=s&&s.connectionId,p=[];for(const v in r){const E=r[v];E.action!=="absent"&&(l&&l!=E.clientId||d&&d!=E.connectionId||p.push(E))}return p}put(s){(s.action==="enter"||s.action==="update")&&(s=li.fromValues(s),s.action="present");const r=this.map,l=this.memberKey(s);this.residualMembers&&delete this.residualMembers[l];const d=r[l];return d&&!this.newerThan(s,d)?!1:(r[l]=s,!0)}values(){const s=this.map,r=[];for(const l in s){const d=s[l];d.action!="absent"&&r.push(d)}return r}remove(s){const r=this.map,l=this.memberKey(s),d=r[l];return d&&!this.newerThan(s,d)?!1:(this.syncInProgress?(s=li.fromValues(s),s.action="absent",r[l]=s):delete r[l],!!d)}startSync(){const s=this.map,r=this.syncInProgress;S.logAction(this.logger,S.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+r),this.syncInProgress||(this.residualMembers=Oe(s),this.setInProgress(!0))}endSync(){const s=this.map,r=this.syncInProgress;if(S.logAction(this.logger,S.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+r),r){for(const l in s)s[l].action==="absent"&&delete s[l];this.presence._synthesizeLeaves(Ha(this.residualMembers));for(const l in this.residualMembers)delete s[l];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}async waitSync(){const s=this.syncInProgress;S.logAction(this.logger,S.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+s),s&&await this.once("sync")}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(s){S.logAction(this.logger,S.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+s),this.syncInProgress=s,this.presence.syncComplete=!s}};function rn(s){return s.channel.client.auth.clientId}function Xt(s){const r=s.channel.client,l=r.auth.clientId;return(!l||l==="*")&&r.connection.state==="connected"}var hi=class extends gt{constructor(s){super(s.logger),this.channel=s,this.syncComplete=!1,this.members=new Vi(this,r=>r.clientId+":"+r.connectionId),this._myMembers=new Vi(this,r=>r.clientId),this.subscriptions=new gt(this.logger),this.pendingPresence=[]}async enter(s){if(Xt(this))throw new _("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,s,"enter")}async update(s){if(Xt(this))throw new _("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,s,"update")}async enterClient(s,r){return this._enterOrUpdateClient(void 0,s,r,"enter")}async updateClient(s,r){return this._enterOrUpdateClient(void 0,s,r,"update")}async _enterOrUpdateClient(s,r,l,d){const p=this.channel;if(!p.connectionManager.activeState())throw p.connectionManager.getError();S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence."+d+"Client()","channel = "+p.name+", id = "+s+", client = "+(r||"(implicit) "+rn(this)));const v=li.fromData(l);v.action=d,s&&(v.id=s),r&&(v.clientId=r);const E=await v.encode(p.channelOptions);switch(p.state){case"attached":return p.sendPresence([E]);case"initialized":case"detached":p.attach();case"attaching":return new Promise((O,V)=>{this.pendingPresence.push({presence:E,callback:j=>j?V(j):O()})});default:{const O=new se("Unable to "+d+" presence channel while in "+p.state+" state",90001);throw O.code=90001,O}}}async leave(s){if(Xt(this))throw new _("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,s)}async leaveClient(s,r){const l=this.channel;if(!l.connectionManager.activeState())throw l.connectionManager.getError();S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+s);const d=li.fromData(r);d.action="leave",s&&(d.clientId=s);const p=await d.encode(l.channelOptions);switch(l.state){case"attached":return l.sendPresence([p]);case"attaching":return new Promise((v,E)=>{this.pendingPresence.push({presence:p,callback:O=>O?E(O):v()})});case"initialized":case"failed":throw new se("Unable to leave presence channel (incompatible state)",90001);default:throw l.invalidStateError()}}async get(s){const r=!s||("waitForSync"in s?s.waitForSync:!0);function l(p){return s?p.list(s):p.values()}if(this.channel.state==="suspended"){if(r)throw _.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"});return l(this.members)}await this.channel.ensureAttached();const d=this.members;return r&&await d.waitSync(),l(this.members)}async history(s){S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const r=this.channel.client.rest.presenceMixin;if(s&&s.untilAttach)if(this.channel.state==="attached")delete s.untilAttach,s.from_serial=this.channel.properties.attachSerial;else throw new _("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);return r.history(this,s)}setPresence(s,r,l){S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+s.length+" participants; syncChannelSerial = "+l);let d,p;const v=this.members,E=this._myMembers,O=[],V=this.channel.connectionManager.connectionId;r&&(this.members.startSync(),l&&(p=l.match(/^[\w-]+:(.*)$/))&&(d=p[1]));for(let j of s)switch(j.action){case"leave":v.remove(j)&&O.push(j),j.connectionId===V&&!j.isSynthesized()&&E.remove(j);break;case"enter":case"present":case"update":v.put(j)&&O.push(j),j.connectionId===V&&E.put(j);break}r&&!d&&(v.endSync(),this.channel.syncChannelSerial=null);for(let j=0;j<O.length;j++){const Z=O[j];this.subscriptions.emit(Z.action,Z)}}onAttached(s){S.logAction(this.logger,S.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+s),s?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const r=this.pendingPresence,l=r.length;if(l){this.pendingPresence=[];const d=[],p=pt.create(this.logger);S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence.onAttached","sending "+l+" queued presence messages");for(let v=0;v<l;v++){const E=r[v];d.push(E.presence),p.push(E.callback)}this.channel.sendPresence(d).then(()=>p()).catch(v=>p(v))}}actOnChannelState(s,r,l){switch(s){case"attached":this.onAttached(r);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(l);break}}failPendingPresence(s){if(this.pendingPresence.length){S.logAction(this.logger,S.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+Me(s));for(let r=0;r<this.pendingPresence.length;r++)try{this.pendingPresence[r].callback(s)}catch{}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const s=this._myMembers,r=this.channel.connectionManager.connectionId;for(const l in s.map){const d=s.map[l];S.logAction(this.logger,S.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+d.clientId+'" into the presence set');const p=d.connectionId===r?d.id:void 0;this._enterOrUpdateClient(p,d.clientId,d.data,"enter").catch(v=>{const E=new _("Presence auto re-enter failed",91004,400,v);S.logAction(this.logger,S.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()","Presence auto re-enter failed; reason = "+Me(v));const O=new or(this.channel.state,this.channel.state,!0,!1,E);this.channel.emit("update",O)})}}_synthesizeLeaves(s){const r=this.subscriptions;s.forEach(function(l){const d=li.fromValues({action:"leave",connectionId:l.connectionId,clientId:l.clientId,data:l.data,encoding:l.encoding,timestamp:Date.now()});r.emit("leave",d)})}async subscribe(...s){const r=Sn.processListenerArgs(s),l=r[0],d=r[1],p=this.channel;if(p.state==="failed")throw _.fromValues(p.invalidStateError());this.subscriptions.on(l,d),p.channelOptions.attachOnSubscribe!==!1&&await p.attach()}unsubscribe(...s){const r=Sn.processListenerArgs(s),l=r[0],d=r[1];this.subscriptions.off(l,d)}},_n=hi,Nn=Et.WebSocket;function Yn(s){return!!s.on}var kc=class extends Bi{constructor(s,r,l){super(s,r,l),this.shortName=Nn,l.heartbeats=G.Config.useProtocolHeartbeats,this.wsHost=l.host}static isAvailable(){return!!G.Config.WebSocket}createWebSocket(s,r){return this.uri=s+Ei(r),new G.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.connect()","starting"),Bi.prototype.connect.call(this);const s=this,r=this.params,l=r.options,p=(l.tls?"wss://":"ws://")+this.wsHost+":"+Se.getPort(l)+"/";S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.connect()","uri: "+p),Gt(this.auth.getAuthParams(),function(v,E){if(s.isDisposed)return;let O="";for(const j in E)O+=" "+j+": "+E[j]+";";if(S.logAction(s.logger,S.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+O+" err: "+v),v){s.disconnect(v);return}const V=r.getConnectParams(E);try{const j=s.wsConnection=s.createWebSocket(p,V);j.binaryType=G.Config.binaryType,j.onopen=function(){s.onWsOpen()},j.onclose=function(Z){s.onWsClose(Z)},j.onmessage=function(Z){s.onWsData(Z.data)},j.onerror=function(Z){s.onWsError(Z)},Yn(j)&&j.on("ping",function(){s.onActivity()})}catch(j){S.logAction(s.logger,S.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(j.stack||j.message)),s.disconnect(j)}})}send(s){const r=this.wsConnection;if(!r){S.logAction(this.logger,S.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{r.send(Oc(s,this.connectionManager.realtime._MsgPack,this.params.format))}catch(l){const d="Exception from ws connection when trying to send: "+Me(l);S.logAction(this.logger,S.LOG_ERROR,"WebSocketTransport.send()",d),this.finish("disconnected",new _(d,5e4,500))}}onWsData(s){S.logAction(this.logger,S.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+s.length+"; type = "+typeof s);try{this.onProtocolMessage(Mc(s,this.connectionManager.realtime._MsgPack,this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._liveObjectsPlugin,this.format))}catch(r){S.logAction(this.logger,S.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+r.stack)}}onWsOpen(){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(s){let r,l;if(typeof s=="object"?(l=s.code,r=s.wasClean||l===1e3):(l=s,r=l==1e3),delete this.wsConnection,r){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const d=new _("Websocket closed",80003,400);this.finish("disconnected",d)}else{const d="Unclean disconnection of WebSocket ; code = "+l,p=new _(d,80003,400);S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.onWsClose()",d),this.finish("disconnected",p)}this.emit("disposed")}onWsError(s){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+s.message),G.Config.nextTick(()=>{this.disconnect(Error(s.message))})}dispose(){S.logAction(this.logger,S.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const s=this.wsConnection;s&&(s.onmessage=function(){},delete this.wsConnection,G.Config.nextTick(()=>{if(S.logAction(this.logger,S.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!s)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");s.close()}))}},mr=kc,zo=class{static subscribeFilter(s,r,l){const d=p=>{var v,E,O,V,j,Z;const $={name:p.name,refTimeserial:(E=(v=p.extras)==null?void 0:v.ref)==null?void 0:E.timeserial,refType:(V=(O=p.extras)==null?void 0:O.ref)==null?void 0:V.type,isRef:!!((Z=(j=p.extras)==null?void 0:j.ref)!=null&&Z.timeserial),clientId:p.clientId};Object.entries(r).find(([oe,J])=>J!==void 0?$[oe]!==J:!1)||l(p)};this.addFilteredSubscription(s,r,l,d),s.subscriptions.on(d)}static addFilteredSubscription(s,r,l,d){var p;if(s.filteredSubscriptions||(s.filteredSubscriptions=new Map),s.filteredSubscriptions.has(l)){const v=s.filteredSubscriptions.get(l);v.set(r,((p=v?.get(r))==null?void 0:p.concat(d))||[d])}else s.filteredSubscriptions.set(l,new Map([[r,[d]]]))}static getAndDeleteFilteredSubscriptions(s,r,l){if(!s.filteredSubscriptions)return[];if(!l&&r)return Array.from(s.filteredSubscriptions.entries()).map(([v,E])=>{var O;let V=E.get(r);return E.delete(r),E.size===0&&((O=s.filteredSubscriptions)==null||O.delete(v)),V}).reduce((v,E)=>E?v.concat(...E):v,[]);if(!l||!s.filteredSubscriptions.has(l))return[];const d=s.filteredSubscriptions.get(l);if(!r){const v=Array.from(d.values()).reduce((E,O)=>E.concat(...O),[]);return s.filteredSubscriptions.delete(l),v}let p=d.get(r);return d.delete(r),p||[]}},$t=class Zd extends Ss{constructor(r){var l;const d=Zd._MsgPack;if(!d)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(Se.objectifyOptions(r,!0,"Realtime",S.defaultLogger,B(D({},ps),{Crypto:(l=Zd.Crypto)!=null?l:void 0,MsgPack:d,RealtimePresence:{RealtimePresence:_n,PresenceMessage:li,WirePresenceMessage:fa},Annotations:{Annotation:pa,WireAnnotation:Li,RealtimeAnnotations:No,RestAnnotations:ki},WebSocketTransport:mr,MessageInteractions:zo})))}static get Crypto(){if(this._Crypto===null)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(r){this._Crypto=r}};$t.Utils=_t,$t.ConnectionManager=hr,$t.ProtocolMessage=va,$t._Crypto=null,$t.Message=Ac,$t.PresenceMessage=ma,$t.Annotation=wc,$t._MsgPack=null,$t._Http=Ja,$t._PresenceMap=Vi,$t._MessageEncoding=fs;var vt=$t,Ye=Uint8Array,_e=Uint32Array,Dn=Math.pow,en=new _e(8),pr=[],on=new _e(64);function Go(s){return(s-(s|0))*Dn(2,32)|0}for(var Ts=2,Ln=0;Ln<64;){for(Kn=!0,As=2;As<=Ts/2;As++)Ts%As===0&&(Kn=!1);Kn&&(Ln<8&&(en[Ln]=Go(Dn(Ts,1/2))),pr[Ln]=Go(Dn(Ts,1/3)),Ln++),Ts++}var Kn,As,ba=!!new Ye(new _e([1]).buffer)[0];function Sa(s){return ba?s>>>24|(s>>>16&255)<<8|(s&65280)<<8|s<<24:s}function Dt(s,r){return s>>>r|s<<32-r}function ln(s){var r=en.slice(),l=s.length,d=l*8,p=512-(d+64)%512-1+d+65,v=new Ye(p/8),E=new _e(v.buffer);v.set(s,0),v[l]=128,E[E.length-1]=Sa(d);for(var O,V=0;V<p/32;V+=16){var j=r.slice();for(O=0;O<64;O++){var Z;if(O<16)Z=Sa(E[V+O]);else{var $=on[O-15],oe=on[O-2];Z=on[O-7]+on[O-16]+(Dt($,7)^Dt($,18)^$>>>3)+(Dt(oe,17)^Dt(oe,19)^oe>>>10)}on[O]=Z|=0;for(var J=(Dt(j[4],6)^Dt(j[4],11)^Dt(j[4],25))+(j[4]&j[5]^~j[4]&j[6])+j[7]+Z+pr[O],le=(Dt(j[0],2)^Dt(j[0],13)^Dt(j[0],22))+(j[0]&j[1]^j[2]&(j[0]^j[1])),de=7;de>0;de--)j[de]=j[de-1];j[0]=J+le|0,j[4]=j[4]+J|0}for(O=0;O<8;O++)r[O]=r[O]+j[O]|0}return new Ye(new _e(r.map(function(Ce){return Sa(Ce)})).buffer)}function di(s,r){if(s.length>64&&(s=ln(s)),s.length<64){const O=new Uint8Array(64);O.set(s,0),s=O}for(var l=new Uint8Array(64),d=new Uint8Array(64),p=0;p<64;p++)l[p]=54^s[p],d[p]=92^s[p];var v=new Uint8Array(r.length+64);v.set(l,0),v.set(r,64);var E=new Uint8Array(96);return E.set(d,0),E.set(ln(v),64),ln(E)}var Xn=class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(s){let r="";const l=this.base64CharSet,d=s.byteLength,p=d%3,v=d-p;let E,O,V,j,Z;for(let $=0;$<v;$=$+3)Z=s[$]<<16|s[$+1]<<8|s[$+2],E=(Z&16515072)>>18,O=(Z&258048)>>12,V=(Z&4032)>>6,j=Z&63,r+=l[E]+l[O]+l[V]+l[j];return p==1?(Z=s[v],E=(Z&252)>>2,O=(Z&3)<<4,r+=l[E]+l[O]+"=="):p==2&&(Z=s[v]<<8|s[v+1],E=(Z&64512)>>10,O=(Z&1008)>>4,V=(Z&15)<<2,r+=l[E]+l[O]+l[V]+"="),r}base64ToArrayBuffer(s){const r=atob?.(s),l=r.length,d=new Uint8Array(l);for(let p=0;p<l;p++){const v=r.charCodeAt(p);d[p]=v}return this.toArrayBuffer(d)}isBuffer(s){return s instanceof ArrayBuffer||ArrayBuffer.isView(s)}toBuffer(s){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(s instanceof ArrayBuffer)return new Uint8Array(s);if(ArrayBuffer.isView(s))return new Uint8Array(this.toArrayBuffer(s));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(s){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(s instanceof ArrayBuffer)return s;if(ArrayBuffer.isView(s))return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(s){return this.uint8ViewToBase64(this.toBuffer(s))}base64UrlEncode(s){return this.base64Encode(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}base64Decode(s){if(ArrayBuffer&&G.Config.atob)return this.base64ToArrayBuffer(s);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(s){return this.toBuffer(s).reduce((l,d)=>l+d.toString(16).padStart(2,"0"),"")}hexDecode(s){if(s.length%2!==0)throw new Error("Can't create a byte array from a hex string of odd length");const r=new Uint8Array(s.length/2);for(let l=0;l<r.length;l++)r[l]=parseInt(s.slice(2*l,2*(l+1)),16);return this.toArrayBuffer(r)}utf8Encode(s){if(G.Config.TextEncoder){const r=new G.Config.TextEncoder().encode(s);return this.toArrayBuffer(r)}else throw new Error("Expected TextEncoder to be configured")}utf8Decode(s){if(!this.isBuffer(s))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return new TextDecoder().decode(s);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(s,r){if(!s||!r)return!1;const l=this.toArrayBuffer(s),d=this.toArrayBuffer(r);if(l.byteLength!=d.byteLength)return!1;const p=new Uint8Array(l),v=new Uint8Array(d);for(var E=0;E<p.length;E++)if(p[E]!=v[E])return!1;return!0}byteLength(s){return s instanceof ArrayBuffer||ArrayBuffer.isView(s)?s.byteLength:-1}arrayBufferViewToBuffer(s){return this.toArrayBuffer(s)}concat(s){const r=s.reduce((p,v)=>p+v.byteLength,0),l=new Uint8Array(r);let d=0;for(const p of s){const v=this.toBuffer(p);l.set(v,d),d+=v.byteLength}return l.buffer}sha256(s){const r=ln(this.toBuffer(s));return this.toArrayBuffer(r)}hmacSha256(s,r){const l=di(this.toBuffer(r),this.toBuffer(s));return this.toArrayBuffer(l)}},gr=new Xn,Ho=function(s,r){var l="aes",d=256,p="cbc",v=16;function E(oe){if(oe.algorithm==="aes"&&oe.mode==="cbc"){if(oe.keyLength===128||oe.keyLength===256)return;throw new Error("Unsupported key length "+oe.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}function O(oe){return oe.replace("_","/").replace("-","+")}function V(oe){return oe instanceof j}class j{constructor(J,le,de,Ce){this.algorithm=J,this.keyLength=le,this.mode=de,this.key=Ce}}class Z{static getDefaultParams(J){var le;if(!J.key)throw new Error("Crypto.getDefaultParams: a key is required");typeof J.key=="string"?le=r.toArrayBuffer(r.base64Decode(O(J.key))):J.key instanceof ArrayBuffer?le=J.key:le=r.toArrayBuffer(J.key);var de=J.algorithm||l,Ce=le.byteLength*8,Be=J.mode||p,qe=new j(de,Ce,Be,le);if(J.keyLength&&J.keyLength!==qe.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+J.keyLength+" was specified, but the key actually has length "+qe.keyLength);return E(qe),qe}static async generateRandomKey(J){try{return s.getRandomArrayBuffer((J||d)/8)}catch(le){throw new _("Failed to generate random key: "+le.message,400,5e4,le)}}static getCipher(J,le){var de,Ce=V(J)?J:this.getDefaultParams(J);return{cipherParams:Ce,cipher:new $(Ce,(de=J.iv)!=null?de:null,le)}}}Z.CipherParams=j;class ${constructor(J,le,de){if(this.logger=de,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browsers SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browsers SubtleCrypto class is not available.");this.algorithm=J.algorithm+"-"+String(J.keyLength)+"-"+J.mode,this.webCryptoAlgorithm=J.algorithm+"-"+J.mode,this.key=r.toArrayBuffer(J.key),this.iv=le?r.toArrayBuffer(le):null}concat(J,le){const de=new ArrayBuffer(J.byteLength+le.byteLength),Ce=new DataView(de),Be=new DataView(r.toArrayBuffer(J));for(let Fe=0;Fe<Be.byteLength;Fe++)Ce.setInt8(Fe,Be.getInt8(Fe));const qe=new DataView(r.toArrayBuffer(le));for(let Fe=0;Fe<qe.byteLength;Fe++)Ce.setInt8(Be.byteLength+Fe,qe.getInt8(Fe));return de}async encrypt(J){S.logAction(this.logger,S.LOG_MICRO,"CBCCipher.encrypt()","");const le=await this.getIv(),de=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),Ce=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:le},de,J);return this.concat(le,Ce)}async decrypt(J){S.logAction(this.logger,S.LOG_MICRO,"CBCCipher.decrypt()","");const le=r.toArrayBuffer(J),de=le.slice(0,v),Ce=le.slice(v),Be=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:de},Be,Ce)}async getIv(){if(this.iv){var J=this.iv;return this.iv=null,J}const le=await s.getRandomArrayBuffer(v);return r.toArrayBuffer(le)}}return Z},zi=(s=>(s[s.REQ_SEND=0]="REQ_SEND",s[s.REQ_RECV=1]="REQ_RECV",s[s.REQ_RECV_POLL=2]="REQ_RECV_POLL",s[s.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",s))(zi||{}),cn=zi;function mi(){return new _("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var rt,Ta=(rt=class{constructor(s){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1;var r;this.client=s??null;const l=s?.options.connectivityCheckUrl||Se.connectivityCheckUrl,d=(r=s?.options.connectivityCheckParams)!=null?r:null,p=!s?.options.connectivityCheckUrl,v=D(D({},Ta.bundledRequestImplementations),s?._additionalHTTPRequestImplementations),E=v.XHRRequest,O=v.FetchRequest,V=!!(E||O);if(!V)throw mi();G.Config.xhrSupported&&E?(this.supportsAuthHeaders=!0,this.Request=async function(j,Z,$,oe,J){return new Promise(le=>{var de;const Ce=E.createRequest(Z,$,oe,J,cn.REQ_SEND,(de=s&&s.options.timeouts)!=null?de:null,this.logger,j);Ce.once("complete",(Be,qe,Fe,Re,Bt)=>le({error:Be,body:qe,headers:Fe,unpacked:Re,statusCode:Bt})),Ce.exec()})},s?.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var j;S.logAction(this.logger,S.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+l);const Z=await this.doUri(it.Get,l,null,null,d);let $=!1;return p?$=!Z.error&&((j=Z.body)==null?void 0:j.replace(/\n/,""))=="yes":$=!Z.error&&cs(Z.statusCode),S.logAction(this.logger,S.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+$),$}):G.Config.fetchSupported&&O?(this.supportsAuthHeaders=!0,this.Request=async(j,Z,$,oe,J)=>O(j,s??null,Z,$,oe,J),s?.options.disableConnectivityCheck?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var j;S.logAction(this.logger,S.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+l);const Z=await this.doUri(it.Get,l,null,null,null),$=!Z.error&&((j=Z.body)==null?void 0:j.replace(/\n/,""))=="yes";return S.logAction(this.logger,S.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+$),$}):this.Request=async()=>({error:V?new se("no supported HTTP transports available",null,400):mi()})}get logger(){var s,r;return(r=(s=this.client)==null?void 0:s.logger)!=null?r:S.defaultLogger}async doUri(s,r,l,d,p){return this.Request?this.Request(s,r,l,p,d):{error:new se("Request invoked before assigned to",null,500)}}shouldFallback(s){const r=s.statusCode;return r===408&&!s.code||r===400&&!s.code||r>=500&&r<=504}},rt.methods=[it.Get,it.Delete,it.Post,it.Put,it.Patch],rt.methodsWithoutBody=[it.Get,it.Delete],rt.methodsWithBody=[it.Post,it.Put,it.Patch],rt),qo=Ta,Cs="ablyjs-storage-test",ws=typeof Is<"u"?Is:typeof window<"u"?window:self,_f=class{constructor(){try{ws.sessionStorage.setItem(Cs,Cs),ws.sessionStorage.removeItem(Cs),this.sessionSupported=!0}catch{this.sessionSupported=!1}try{ws.localStorage.setItem(Cs,Cs),ws.localStorage.removeItem(Cs),this.localSupported=!0}catch{this.localSupported=!1}}get(s){return this._get(s,!1)}getSession(s){return this._get(s,!0)}remove(s){return this._remove(s,!1)}removeSession(s){return this._remove(s,!0)}set(s,r,l){return this._set(s,r,l,!1)}setSession(s,r,l){return this._set(s,r,l,!0)}_set(s,r,l,d){const p={value:r};return l&&(p.expires=Date.now()+l),this.storageInterface(d).setItem(s,JSON.stringify(p))}_get(s,r){if(r&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!r&&!this.localSupported)throw new Error("Local Storage not supported");const l=this.storageInterface(r).getItem(s);if(!l)return null;const d=JSON.parse(l);return d.expires&&d.expires<Date.now()?(this.storageInterface(r).removeItem(s),null):d.value}_remove(s,r){return this.storageInterface(r).removeItem(s)}storageInterface(s){return s?ws.sessionStorage:ws.localStorage}},ot=new _f,st=to(),Aa=typeof EdgeRuntime=="string";typeof Window>"u"&&typeof WorkerGlobalScope>"u"&&!Aa&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");function Ca(){const s=st.location;return!st.WebSocket||!s||!s.origin||s.origin.indexOf("http")>-1}function Io(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}var Rs=st.navigator&&st.navigator.userAgent.toString(),Es=st.location&&st.location.href,Nf={agent:"browser",logTimestamps:!0,userAgent:Rs,currentUrl:Es,binaryType:"arraybuffer",WebSocket:st.WebSocket,fetchSupported:!!st.fetch,xhrSupported:st.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:Ca(),useProtocolHeartbeats:!0,supportsBinary:!!st.TextDecoder,preferBinary:!1,ArrayBuffer:st.ArrayBuffer,atob:st.atob,nextTick:typeof st.queueMicrotask=="function"?s=>st.queueMicrotask(s):s=>Promise.resolve().then(s),addEventListener:st.addEventListener,inspect:JSON.stringify,stringByteSize:function(s){return st.TextDecoder&&new st.TextEncoder().encode(s).length||s.length},TextEncoder:st.TextEncoder,TextDecoder:st.TextDecoder,getRandomArrayBuffer:async function(s){const r=new Uint8Array(s);return st.crypto.getRandomValues(r),r.buffer},isWebworker:Io(),push:{platform:"browser",formFactor:"desktop",storage:ot}},Yo=Nf;function Df(s){const r=[80015,80017,80030];return s.code?ft.isTokenErr(s)?!1:r.includes(s.code)?!0:s.code>=4e4&&s.code<5e4:!1}function yr(s){return Df(s)?[Kt({action:Ae.ERROR,error:s})]:[Kt({action:Ae.DISCONNECTED,error:s})]}var Gi=class extends Bi{constructor(s,r,l){super(s,r,l,!0),this.onAuthUpdated=d=>{this.authParams={access_token:d.token}},this.stream="stream"in l?l.stream:!0,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){S.logAction(this.logger,S.LOG_MINOR,"CometTransport.connect()","starting"),Bi.prototype.connect.call(this);const s=this.params,r=s.options,l=s.host||r.primaryDomain,d=Se.getPort(r),p=r.tls?"https://":"http://";this.baseUri=p+l+":"+d+"/comet/";const v=this.baseUri+"connect";S.logAction(this.logger,S.LOG_MINOR,"CometTransport.connect()","uri: "+v),Gt(this.auth.getAuthParams(),(E,O)=>{if(E){this.disconnect(E);return}if(this.isDisposed)return;this.authParams=O;const V=this.params.getConnectParams(O);"stream"in V&&(this.stream=V.stream),S.logAction(this.logger,S.LOG_MINOR,"CometTransport.connect()","connectParams:"+Ei(V));let j=!1;const Z=this.recvRequest=this.createRequest(v,null,V,null,this.stream?cn.REQ_RECV_STREAM:cn.REQ_RECV);Z.on("data",$=>{this.recvRequest&&(j||(j=!0,this.emit("preconnect")),this.onData($))}),Z.on("complete",$=>{if(this.recvRequest||($=$||new _("Request cancelled",80003,400)),this.recvRequest=null,!j&&!$&&(j=!0,this.emit("preconnect")),this.onActivity(),$){$.code?this.onData(yr($)):this.disconnect($);return}G.Config.nextTick(()=>{this.recv()})}),Z.exec()})}requestClose(){S.logAction(this.logger,S.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){S.logAction(this.logger,S.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(s){const r=s?this.closeUri:this.disconnectUri;if(r){const l=this.createRequest(r,null,this.authParams,null,cn.REQ_SEND);l.on("complete",d=>{d&&(S.logAction(this.logger,S.LOG_ERROR,"CometTransport.request"+(s?"Close()":"Disconnect()"),"request returned err = "+Me(d)),this.finish("disconnected",d))}),l.exec()}}dispose(){S.logAction(this.logger,S.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(S.logAction(this.logger,S.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",Mn.disconnected()),G.Config.nextTick(()=>{this.emit("disposed")}))}onConnect(s){var r;if(this.isDisposed)return;const l=(r=s.connectionDetails)==null?void 0:r.connectionKey;Bi.prototype.onConnect.call(this,s);const d=this.baseUri+l;S.logAction(this.logger,S.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+d),this.sendUri=d+"/send",this.recvUri=d+"/recv",this.closeUri=d+"/close",this.disconnectUri=d+"/disconnect"}send(s){if(this.sendRequest){this.pendingItems=this.pendingItems||[],this.pendingItems.push(s);return}const r=this.pendingItems||[];r.push(s),this.pendingItems=null,this.sendItems(r)}sendAnyPending(){const s=this.pendingItems;s&&(this.pendingItems=null,this.sendItems(s))}sendItems(s){const r=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(s),cn.REQ_SEND);r.on("complete",(l,d)=>{if(l&&S.logAction(this.logger,S.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+Me(l)),this.sendRequest=null,l){l.code?this.onData(yr(l)):this.disconnect(l);return}d&&this.onData(d),this.pendingItems&&G.Config.nextTick(()=>{this.sendRequest||this.sendAnyPending()})}),r.exec()}recv(){if(this.recvRequest||!this.isConnected)return;const s=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?cn.REQ_RECV_STREAM:cn.REQ_RECV_POLL);s.on("data",r=>{this.onData(r)}),s.on("complete",r=>{if(this.recvRequest=null,this.onActivity(),r){r.code?this.onData(yr(r)):this.disconnect(r);return}G.Config.nextTick(()=>{this.recv()})}),s.exec()}onData(s){try{const r=this.decodeResponse(s);if(r&&r.length)for(let l=0;l<r.length;l++)this.onProtocolMessage(ar(r[l],this.connectionManager.realtime._RealtimePresence,this.connectionManager.realtime._Annotations,this.connectionManager.realtime._liveObjectsPlugin))}catch(r){S.logAction(this.logger,S.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+r.stack)}}encodeRequest(s){return JSON.stringify(s)}decodeResponse(s){return typeof s=="string"?JSON.parse(s):s}},Ko=Gi;function vr(s,r){return xi(gn(r)).includes("x-ably-errorcode")}function Uc(s,r){if(vr(s,r))return s.error&&_.fromValues(s.error)}var xs=function(){},Xo=0,wa={};function br(s,r){return s.getResponseHeader&&s.getResponseHeader(r)}function jc(s){return s.getResponseHeader&&(s.getResponseHeader("transfer-encoding")||!s.getResponseHeader("content-length"))}function Bc(s){const r=s.getAllResponseHeaders().trim().split(`\r
`),l={};for(let d=0;d<r.length;d++){const p=r[d].split(":").map(v=>v.trim());l[p[0].toLowerCase()]=p[1]}return l}var Hi=class mS extends gt{constructor(r,l,d,p,v,E,O,V){super(O),d=d||{},d.rnd=$s(),this.uri=r+Ei(d),this.headers=l||{},this.body=p,this.method=V?V.toUpperCase():he(p)?"GET":"POST",this.requestMode=v,this.timeouts=E,this.timedOut=!1,this.requestComplete=!1,this.id=String(++Xo),wa[this.id]=this}static createRequest(r,l,d,p,v,E,O,V){const j=E||Se.TIMEOUTS;return new mS(r,l,Oe(d),p,v,j,O,V)}complete(r,l,d,p,v){this.requestComplete||(this.requestComplete=!0,!r&&l&&this.emit("data",l),this.emit("complete",r,l,d,p,v),this.dispose())}abort(){this.dispose()}exec(){let r=this.headers;const l=this.requestMode==cn.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,d=this.timer=setTimeout(()=>{this.timedOut=!0,v.abort()},l),p=this.method,v=this.xhr=new XMLHttpRequest,E=r.accept;let O=this.body,V="text";E?E.indexOf("application/x-msgpack")===0&&(V="arraybuffer"):r.accept="application/json",O&&(r["content-type"]||(r["content-type"]="application/json")).indexOf("application/json")>-1&&typeof O!="string"&&(O=JSON.stringify(O)),v.open(p,this.uri,!0),v.responseType=V,"authorization"in r&&(v.withCredentials=!0);for(const Re in r)v.setRequestHeader(Re,r[Re]);const j=(Re,Bt,Tt,bt)=>{var We;let _s=Bt+" (event type: "+Re.type+")";(We=this==null?void 0:this.xhr)!=null&&We.statusText&&(_s+=", current statusText is "+this.xhr.statusText),S.logAction(this.logger,S.LOG_ERROR,"Request.on"+Re.type+"()",_s),this.complete(new se(_s,Tt,bt))};v.onerror=Re=>{j(Re,"XHR error occurred",null,400)},v.onabort=Re=>{this.timedOut?j(Re,"Request aborted due to request timeout expiring",null,408):j(Re,"Request cancelled",null,400)},v.ontimeout=Re=>{j(Re,"Request timed out",null,408)};let Z,$,oe,J=0,le=!1;const de=()=>{if(clearTimeout(d),oe=$<400,$==204){this.complete(null,null,null,null,$);return}Z=this.requestMode==cn.REQ_RECV_STREAM&&oe&&jc(v)},Ce=()=>{let Re;try{const Tt=br(v,"content-type");if(Tt?Tt.indexOf("application/json")>=0:v.responseType=="text"){const We=v.responseType==="arraybuffer"?G.BufferUtils.utf8Decode(v.response):String(v.responseText);We.length?Re=JSON.parse(We):Re=We,le=!0}else Re=v.response;Re.response!==void 0?($=Re.statusCode,oe=$<400,r=Re.headers,Re=Re.response):r=Bc(v)}catch(Tt){this.complete(new se("Malformed response body from server: "+Tt.message,null,400));return}if(oe||Array.isArray(Re)){this.complete(null,Re,r,le,$);return}let Bt=Uc(Re,r);Bt||(Bt=new se("Error response received from server: "+$+" body was: "+G.Config.inspect(Re),null,$)),this.complete(Bt,Re,r,le,$)};function Be(){const Re=v.responseText,Bt=Re.length-1;let Tt,bt;for(;J<Bt&&(Tt=Re.indexOf(`
`,J))>-1;)bt=Re.slice(J,Tt),J=Tt+1,qe(bt)}const qe=Re=>{try{Re=JSON.parse(Re)}catch(Bt){this.complete(new se("Malformed response body from server: "+Bt.message,null,400));return}this.emit("data",Re)},Fe=()=>{Be(),this.streamComplete=!0,G.Config.nextTick(()=>{this.complete()})};v.onreadystatechange=()=>{const Re=v.readyState;Re<3||v.status!==0&&($===void 0&&($=v.status,de()),Re==3&&Z?Be():Re==4&&(Z?Fe():Ce()))},v.send(O)}dispose(){const r=this.xhr;if(r){r.onreadystatechange=r.onerror=r.onabort=r.ontimeout=xs,this.xhr=null;const l=this.timer;l&&(clearTimeout(l),this.timer=null),this.requestComplete||r.abort()}delete wa[this.id]}},pi=Hi,Qo=Et.XhrPolling,Pc=class extends Ko{constructor(s,r,l){super(s,r,l),this.shortName=Qo,l.stream=!1,this.shortName=Qo}static isAvailable(){return!!(G.Config.xhrSupported&&G.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(s,r,l,d,p){return pi.createRequest(s,r,l,d,p,this.timeouts,this.logger)}},Os=Pc,Ra=["xhr_polling"],Sr={order:Ra,bundledImplementations:{web_socket:mr,xhr_polling:Os}},Ea=Sr,Tr={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityCheckUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[Et.XhrPolling,Et.WebSocket]},Vc=Tr;function qi(s){if(s===void 0)return"undefined";let r,l;if(s instanceof ArrayBuffer?(l="ArrayBuffer",r=new DataView(s)):s instanceof DataView&&(l="DataView",r=s),!r)return JSON.stringify(s);const d=[];for(let p=0;p<s.byteLength;p++){if(p>20){d.push("...");break}let v=r.getUint8(p).toString(16);v.length===1&&(v="0"+v),d.push(v)}return"<"+l+" "+d.join(" ")+">"}function Ms(s,r,l){const p=new TextEncoder().encode(l);for(let v=0;v<p.length;v++)s.setUint8(r+v,p[v])}function Qn(s,r,l){return new TextDecoder().decode(s.buffer.slice(r,r+l))}function xa(s){return new TextEncoder().encode(s).length}function Fo(s,r){const l=gi(s,r);if(l===0)return;const d=new ArrayBuffer(l),p=new DataView(d);return Un(s,p,0,r),d}var kn=65536*65536,Fn=1/kn;function Oa(s,r){return r=r||0,s.getInt32(r)*kn+s.getUint32(r+4)}function Wo(s,r){return r=r||0,s.getUint32(r)*kn+s.getUint32(r+4)}function Zo(s,r,l){l<9223372036854776e3?(s.setInt32(r,Math.floor(l*Fn)),s.setInt32(r+4,l&-1)):(s.setUint32(r,2147483647),s.setUint32(r+4,2147483647))}function Ma(s,r,l){l<18446744073709552e3?(s.setUint32(r,Math.floor(l*Fn)),s.setInt32(r+4,l&-1)):(s.setUint32(r,4294967295),s.setUint32(r+4,4294967295))}var _a=class{constructor(s,r){this.map=l=>{const d={};for(let p=0;p<l;p++){const v=this.parse();d[v]=this.parse()}return d},this.bin=l=>{const d=new ArrayBuffer(l);return new Uint8Array(d).set(new Uint8Array(this.view.buffer,this.offset,l),0),this.offset+=l,d},this.buf=this.bin,this.str=l=>{const d=Qn(this.view,this.offset,l);return this.offset+=l,d},this.array=l=>{const d=new Array(l);for(let p=0;p<l;p++)d[p]=this.parse();return d},this.ext=l=>(this.offset+=l,{type:this.view.getInt8(this.offset),data:this.buf(l)}),this.parse=()=>{const l=this.view.getUint8(this.offset);let d,p;if((l&128)===0)return this.offset++,l;if((l&240)===128)return p=l&15,this.offset++,this.map(p);if((l&240)===144)return p=l&15,this.offset++,this.array(p);if((l&224)===160)return p=l&31,this.offset++,this.str(p);if((l&224)===224)return d=this.view.getInt8(this.offset),this.offset++,d;switch(l){case 192:return this.offset++,null;case 193:this.offset++;return;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return p=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(p);case 197:return p=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(p);case 198:return p=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(p);case 199:return p=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(p);case 200:return p=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(p);case 201:return p=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(p);case 202:return d=this.view.getFloat32(this.offset+1),this.offset+=5,d;case 203:return d=this.view.getFloat64(this.offset+1),this.offset+=9,d;case 204:return d=this.view.getUint8(this.offset+1),this.offset+=2,d;case 205:return d=this.view.getUint16(this.offset+1),this.offset+=3,d;case 206:return d=this.view.getUint32(this.offset+1),this.offset+=5,d;case 207:return d=Wo(this.view,this.offset+1),this.offset+=9,d;case 208:return d=this.view.getInt8(this.offset+1),this.offset+=2,d;case 209:return d=this.view.getInt16(this.offset+1),this.offset+=3,d;case 210:return d=this.view.getInt32(this.offset+1),this.offset+=5,d;case 211:return d=Oa(this.view,this.offset+1),this.offset+=9,d;case 212:return p=1,this.offset++,this.ext(p);case 213:return p=2,this.offset++,this.ext(p);case 214:return p=4,this.offset++,this.ext(p);case 215:return p=8,this.offset++,this.ext(p);case 216:return p=16,this.offset++,this.ext(p);case 217:return p=this.view.getUint8(this.offset+1),this.offset+=2,this.str(p);case 218:return p=this.view.getUint16(this.offset+1),this.offset+=3,this.str(p);case 219:return p=this.view.getUint32(this.offset+1),this.offset+=5,this.str(p);case 220:return p=this.view.getUint16(this.offset+1),this.offset+=3,this.array(p);case 221:return p=this.view.getUint32(this.offset+1),this.offset+=5,this.array(p);case 222:return p=this.view.getUint16(this.offset+1),this.offset+=3,this.map(p);case 223:return p=this.view.getUint32(this.offset+1),this.offset+=5,this.map(p)}throw new Error("Unknown type 0x"+l.toString(16))},this.offset=r||0,this.view=s}};function zc(s){const r=new DataView(s),l=new _a(r),d=l.parse();if(l.offset!==s.byteLength)throw new Error(s.byteLength-l.offset+" trailing bytes");return d}function Jo(s,r){return Object.keys(s).filter(function(l){const d=s[l],p=typeof d;return(!r||d!=null)&&(p!=="function"||!!d.toJSON)})}function Un(s,r,l,d){const p=typeof s;if(typeof s=="string"){const v=xa(s);if(v<32)return r.setUint8(l,v|160),Ms(r,l+1,s),1+v;if(v<256)return r.setUint8(l,217),r.setUint8(l+1,v),Ms(r,l+2,s),2+v;if(v<65536)return r.setUint8(l,218),r.setUint16(l+1,v),Ms(r,l+3,s),3+v;if(v<4294967296)return r.setUint8(l,219),r.setUint32(l+1,v),Ms(r,l+5,s),5+v}if(ArrayBuffer.isView&&ArrayBuffer.isView(s)&&(s=s.buffer),s instanceof ArrayBuffer){const v=s.byteLength;if(v<256)return r.setUint8(l,196),r.setUint8(l+1,v),new Uint8Array(r.buffer).set(new Uint8Array(s),l+2),2+v;if(v<65536)return r.setUint8(l,197),r.setUint16(l+1,v),new Uint8Array(r.buffer).set(new Uint8Array(s),l+3),3+v;if(v<4294967296)return r.setUint8(l,198),r.setUint32(l+1,v),new Uint8Array(r.buffer).set(new Uint8Array(s),l+5),5+v}if(typeof s=="number"){if(Math.floor(s)!==s)return r.setUint8(l,203),r.setFloat64(l+1,s),9;if(s>=0){if(s<128)return r.setUint8(l,s),1;if(s<256)return r.setUint8(l,204),r.setUint8(l+1,s),2;if(s<65536)return r.setUint8(l,205),r.setUint16(l+1,s),3;if(s<4294967296)return r.setUint8(l,206),r.setUint32(l+1,s),5;if(s<18446744073709552e3)return r.setUint8(l,207),Ma(r,l+1,s),9;throw new Error("Number too big 0x"+s.toString(16))}if(s>=-32)return r.setInt8(l,s),1;if(s>=-128)return r.setUint8(l,208),r.setInt8(l+1,s),2;if(s>=-32768)return r.setUint8(l,209),r.setInt16(l+1,s),3;if(s>=-2147483648)return r.setUint8(l,210),r.setInt32(l+1,s),5;if(s>=-9223372036854776e3)return r.setUint8(l,211),Zo(r,l+1,s),9;throw new Error("Number too small -0x"+(-s).toString(16).substr(1))}if(p==="undefined")return d?0:(r.setUint8(l,212),r.setUint8(l+1,0),r.setUint8(l+2,0),3);if(s===null)return d?0:(r.setUint8(l,192),1);if(p==="boolean")return r.setUint8(l,s?195:194),1;if(typeof s.toJSON=="function")return Un(s.toJSON(),r,l,d);if(p==="object"){let v,E=0,O;const V=Array.isArray(s);if(V?v=s.length:(O=Jo(s,d),v=O.length),v<16?(r.setUint8(l,v|(V?144:128)),E=1):v<65536?(r.setUint8(l,V?220:222),r.setUint16(l+1,v),E=3):v<4294967296&&(r.setUint8(l,V?221:223),r.setUint32(l+1,v),E=5),V)for(let j=0;j<v;j++)E+=Un(s[j],r,l+E,d);else if(O)for(let j=0;j<v;j++){const Z=O[j];E+=Un(Z,r,l+E),E+=Un(s[Z],r,l+E,d)}return E}if(p==="function")return 0;throw new Error("Unknown type "+p)}function gi(s,r){const l=typeof s;if(l==="string"){const d=xa(s);if(d<32)return 1+d;if(d<256)return 2+d;if(d<65536)return 3+d;if(d<4294967296)return 5+d}if(ArrayBuffer.isView&&ArrayBuffer.isView(s)&&(s=s.buffer),s instanceof ArrayBuffer){const d=s.byteLength;if(d<256)return 2+d;if(d<65536)return 3+d;if(d<4294967296)return 5+d}if(typeof s=="number"){if(Math.floor(s)!==s)return 9;if(s>=0){if(s<128)return 1;if(s<256)return 2;if(s<65536)return 3;if(s<4294967296)return 5;if(s<18446744073709552e3)return 9;throw new Error("Number too big 0x"+s.toString(16))}if(s>=-32)return 1;if(s>=-128)return 2;if(s>=-32768)return 3;if(s>=-2147483648)return 5;if(s>=-9223372036854776e3)return 9;throw new Error("Number too small -0x"+s.toString(16).substr(1))}if(l==="boolean")return 1;if(s===null)return r?0:1;if(s===void 0)return r?0:3;if(typeof s.toJSON=="function")return gi(s.toJSON(),r);if(l==="object"){let d,p=0;if(Array.isArray(s)){d=s.length;for(let v=0;v<d;v++)p+=gi(s[v],r)}else{const v=Jo(s,r);d=v.length;for(let E=0;E<d;E++){const O=v[E];p+=gi(O)+gi(s[O],r)}}if(d<16)return 1+p;if(d<65536)return 3+p;if(d<4294967296)return 5+p;throw new Error("Array or object too long 0x"+d.toString(16))}if(l==="function")return 0;throw new Error("Unknown type "+l)}var Ar={encode:Fo,decode:zc,inspect:qi,utf8Write:Ms,utf8Read:Qn,utf8ByteCount:xa};function $o(s,r){return!!r.get("x-ably-errorcode")}function el(s,r){if($o(s,r))return s.error&&_.fromValues(s.error)}function tn(s){const r={};return s.forEach((l,d)=>{r[d]=l}),r}async function un(s,r,l,d,p,v){const E=new Headers(d||{}),O=s?s.toUpperCase():he(v)?"GET":"POST",V=new AbortController;let j;const Z=new Promise(J=>{j=setTimeout(()=>{V.abort(),J({error:new se("Request timed out",null,408)})},r?r.options.timeouts.httpRequestTimeout:Se.TIMEOUTS.httpRequestTimeout)}),$={method:O,headers:E,body:v,signal:V.signal};G.Config.isWebworker||($.credentials=E.has("authorization")?"include":"same-origin");const oe=(async()=>{try{const J=new URLSearchParams(p||{});J.set("rnd",$s());const le=l+"?"+J,de=await to().fetch(le,$);if(clearTimeout(j),de.status==204)return{error:null,statusCode:de.status};const Ce=de.headers.get("Content-Type");let Be;Ce&&Ce.indexOf("application/x-msgpack")>-1?Be=await de.arrayBuffer():Ce&&Ce.indexOf("application/json")>-1?Be=await de.json():Be=await de.text();const qe=!!Ce&&Ce.indexOf("application/x-msgpack")===-1,Fe=tn(de.headers);return de.ok?{error:null,body:Be,headers:Fe,unpacked:qe,statusCode:de.status}:{error:el(Be,de.headers)||new se("Error response received from server: "+de.status+" body was: "+G.Config.inspect(Be),null,de.status),body:Be,headers:Fe,unpacked:qe,statusCode:de.status}}catch(J){return clearTimeout(j),{error:J}}})();return Promise.race([Z,oe])}var yi={XHRRequest:pi,FetchRequest:un},Cr=Ho(Yo,gr);G.Crypto=Cr,G.BufferUtils=gr,G.Http=qo,G.Config=Yo,G.Transports=Ea,G.WebStorage=ot;for(const s of[Do,vt])s.Crypto=Cr,s._MsgPack=Ar;qo.bundledRequestImplementations=yi,S.initLogHandlers(),G.Defaults=ia(Vc),G.Config.agent&&(G.Defaults.agent+=" "+G.Config.agent);var Gc={ErrorInfo:_,Rest:Do,Realtime:vt,msgpack:Ar,makeProtocolMessageFromDeserialized:rr};if(typeof u.exports=="object"&&typeof c=="object"){var vi=(s,r,l,d)=>{if(r&&typeof r=="object"||typeof r=="function")for(let p of Object.getOwnPropertyNames(r))!Object.prototype.hasOwnProperty.call(s,p)&&p!==l&&Object.defineProperty(s,p,{get:()=>r[p],enumerable:!(d=Object.getOwnPropertyDescriptor(r,p))||d.enumerable});return s};u.exports=vi(u.exports,c)}return u.exports})})(Gu)),Gu.exports}var Mx=Ox();const _x=Jd(Mx),F0=15;function Nx(){const i=[];for(let a=0;a<F0;a++)for(let c=0;c<F0;c++){let u="bg-white";c<6&&a<6&&(u="bg-red-50/50"),c>8&&a<6&&(u="bg-green-50/50"),c>8&&a>8&&(u="bg-blue-50/50"),c<6&&a>8&&(u="bg-yellow-50/50"),c===7&&a>0&&a<7&&(u="bg-green-500"),c===7&&a>8&&a<14&&(u="bg-red-500"),a===7&&c>0&&c<7&&(u="bg-yellow-500"),a===7&&c>8&&c<14&&(u="bg-blue-500");const m=[[6,2],[8,1],[1,6],[2,8],[6,13],[8,12],[13,8],[12,6]],y=c===6&&a===13||c===1&&a===6||c===8&&a===1||c===13&&a===8,g=m.some(([T,C])=>T===c&&C===a);g&&(u="bg-slate-100"),c>=6&&c<=8&&a>=6&&a<=8&&(u="bg-white"),i.push(P.jsxs("div",{className:`relative border-[0.5px] border-slate-100 ${u} flex items-center justify-center`,style:{gridColumnStart:c+1,gridRowStart:a+1},children:[y&&P.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-400 opacity-50"}),g&&!y&&P.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-200"})]},`${c}-${a}`))}return P.jsxs("div",{className:"relative aspect-square w-full bg-white shadow-2xl rounded-2xl overflow-hidden border-8 border-white ring-1 ring-slate-100",children:[P.jsx("div",{className:"absolute inset-0 grid grid-cols-15 grid-rows-15",children:i}),P.jsx("div",{className:"absolute top-0 left-0 w-[40%] h-[40%] bg-red-500 p-8",children:P.jsxs("div",{className:"w-full h-full bg-white rounded-3xl shadow-inner grid grid-cols-2 grid-rows-2 p-4 gap-4",children:[P.jsx("div",{className:"bg-red-500 rounded-full shadow-md"}),P.jsx("div",{className:"bg-red-500 rounded-full shadow-md"}),P.jsx("div",{className:"bg-red-500 rounded-full shadow-md"}),P.jsx("div",{className:"bg-red-500 rounded-full shadow-md"})]})}),P.jsx("div",{className:"absolute top-0 right-0 w-[40%] h-[40%] bg-green-500 p-8",children:P.jsxs("div",{className:"w-full h-full bg-white rounded-3xl shadow-inner grid grid-cols-2 grid-rows-2 p-4 gap-4",children:[P.jsx("div",{className:"bg-green-500 rounded-full shadow-md"}),P.jsx("div",{className:"bg-green-500 rounded-full shadow-md"}),P.jsx("div",{className:"bg-green-500 rounded-full shadow-md"}),P.jsx("div",{className:"bg-green-500 rounded-full shadow-md"})]})}),P.jsx("div",{className:"absolute bottom-0 left-0 w-[40%] h-[40%] bg-yellow-500 p-8",children:P.jsxs("div",{className:"w-full h-full bg-white rounded-3xl shadow-inner grid grid-cols-2 grid-rows-2 p-4 gap-4",children:[P.jsx("div",{className:"bg-yellow-500 rounded-full shadow-md"}),P.jsx("div",{className:"bg-yellow-500 rounded-full shadow-md"}),P.jsx("div",{className:"bg-yellow-500 rounded-full shadow-md"}),P.jsx("div",{className:"bg-yellow-500 rounded-full shadow-md"})]})}),P.jsx("div",{className:"absolute bottom-0 right-0 w-[40%] h-[40%] bg-blue-500 p-8",children:P.jsxs("div",{className:"w-full h-full bg-white rounded-3xl shadow-inner grid grid-cols-2 grid-rows-2 p-4 gap-4",children:[P.jsx("div",{className:"bg-blue-500 rounded-full shadow-md"}),P.jsx("div",{className:"bg-blue-500 rounded-full shadow-md"}),P.jsx("div",{className:"bg-blue-500 rounded-full shadow-md"}),P.jsx("div",{className:"bg-blue-500 rounded-full shadow-md"})]})}),P.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[20%] h-[20%] bg-white rounded-full shadow-xl flex items-center justify-center z-10 p-1 border-4 border-white ring-1 ring-slate-100",children:[P.jsxs("div",{className:"relative w-full h-full rounded-full overflow-hidden rotate-45",children:[P.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-1/2 bg-green-500"}),P.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-1/2 bg-blue-500"}),P.jsx("div",{className:"absolute bottom-0 left-0 w-1/2 h-1/2 bg-yellow-500"}),P.jsx("div",{className:"absolute bottom-0 right-0 w-1/2 h-1/2 bg-red-500"})]}),P.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:P.jsx("div",{className:"w-4 h-4 bg-white rounded-full shadow-sm"})})]})]})}const Dx=(i,a)=>{const c=[[6,13],[6,12],[6,11],[6,10],[6,9],[5,8],[4,8],[3,8],[2,8],[1,8],[0,8],[0,7],[0,6],[1,6],[2,6],[3,6],[4,6],[5,6],[6,5],[6,4],[6,3],[6,2],[6,1],[6,0],[7,0],[8,0],[8,1],[8,2],[8,3],[8,4],[8,5],[9,6],[10,6],[11,6],[12,6],[13,6],[14,6],[14,7],[14,8],[13,8],[12,8],[11,8],[10,8],[9,8],[8,9],[8,10],[8,11],[8,12],[8,13],[8,14],[7,14],[6,14]];if(i>=0&&i<52){const[u,m]=c[i];return{x:u,y:m}}if(i>=52&&i<=57){const u=i-52;if(a==="RED")return{x:7,y:13-u};if(a==="GREEN")return{x:1+u,y:7};if(a==="YELLOW")return{x:7,y:1+u};if(a==="BLUE")return{x:13-u,y:7}}return i===58?{x:7,y:7}:{x:0,y:0}},Lx=(i,a)=>{const c={RED:[1.5,1.5],GREEN:[10.5,1.5],YELLOW:[1.5,10.5],BLUE:[10.5,10.5]},[u,m]=c[i],y=[[0,0],[1.5,0],[0,1.5],[1.5,1.5]],[g,T]=y[a];return{x:u+g,y:m+T}};function kx({color:i,index:a,position:c,canMove:u,onClick:m}){const y=c===-1?Lx(i,a):Dx(c,i),g={RED:"bg-red-500",GREEN:"bg-green-500",YELLOW:"bg-yellow-500",BLUE:"bg-blue-500"};return P.jsx(Xs.div,{initial:!1,animate:{left:`${y.x/15*100}%`,top:`${y.y/15*100}%`},transition:{type:"spring",stiffness:300,damping:30},onClick:u?m:void 0,className:`absolute w-[6.66%] h-[6.66%] p-1 z-10 ${u?"cursor-pointer":""}`,children:P.jsxs("div",{className:`w-full h-full rounded-full border-2 border-white shadow-lg relative flex items-center justify-center ${g[i]} ${u?"ring-4 ring-white ring-opacity-50 scale-110":""}`,children:[P.jsx("div",{className:"w-1/2 h-1/2 rounded-full bg-white opacity-30"}),u&&P.jsx(Xs.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1.5},className:"absolute inset-0 rounded-full border-2 border-white"})]})})}function Ux(){const{code:i}=lv(),[a,c]=k.useState(null),[u,m]=k.useState(null),[y,g]=k.useState(null),[T,C]=k.useState(!1),A=k.useRef(null),w=$u(),x=async()=>{const Y=localStorage.getItem(`session_${i}`);m(Y);try{const ae=await(await fetch("/api/game/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameCode:i,sessionId:Y})})).json();if(ae.error){console.error(ae.error);return}if(c(ae.gameState),g(ae.playerId),!A.current&&ae.sessionId){const G=new _x.Realtime({authUrl:`/api/realtime/token?sessionId=${ae.sessionId}`});A.current=G,G.channels.get(`game:${i}`).subscribe(ce=>{ce.name==="SNAPSHOT"||ce.name==="GAME_STARTED"?c(ce.data):ce.name==="TURN_CHANGED"?c(be=>be?{...be,currentTurnPlayerId:ce.data.playerId,turn:{...be.turn,...ce.data}}:null):ce.name==="DICE_ROLL"?c(be=>be?{...be,turn:{...be.turn,diceValue:ce.data.value,phase:"NEED_MOVE"}}:null):ce.name==="PIECE_MOVED"&&M()})}}catch(re){console.error("Failed to sync state:",re)}},M=async()=>{try{const re=await(await fetch(`/api/game/state?gameCode=${i}`)).json();c(re)}catch(Y){console.error("Failed to refresh state:",Y)}};k.useEffect(()=>(x(),()=>{A.current?.close()}),[i]),k.useEffect(()=>{if(!a||a.status!=="RUNNING")return;const Y=a.players.find(re=>re.id===a.currentTurnPlayerId);if(Y&&(Y.kind==="BOT"||!Y.connected)){const re=setTimeout(async()=>{try{await fetch("/api/game/ai-step",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameCode:i})})}catch(ae){console.error("AI Step failed:",ae)}},2e3);return()=>clearTimeout(re)}},[a?.currentTurnPlayerId,a?.turn.phase]);const D=async()=>{if(!(T||!a)){C(!0);try{const re=await(await fetch("/api/game/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameCode:i,sessionId:u,action:"ROLL",turnNonce:a.turn.turnNonce})})).json();re.error&&console.warn(re.error)}catch(Y){console.error(Y)}finally{C(!1)}}},B=async Y=>{if(a)try{const ae=await(await fetch("/api/game/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gameCode:i,sessionId:u,action:"MOVE",turnNonce:a.turn.turnNonce,payload:{pieceIndex:Y}})})).json();ae.error&&console.warn(ae.error)}catch(re){console.error(re)}};if(!a)return P.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center",children:[P.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-red-500 rounded-full animate-spin mb-4"}),P.jsx("p",{className:"text-slate-500 font-bold",children:"CONNECTING TO GAME..."})]});const X=a.currentTurnPlayerId===y,H=a.players.find(Y=>Y.id===a.currentTurnPlayerId),F={RED:"text-red-500",GREEN:"text-green-500",YELLOW:"text-yellow-500",BLUE:"text-blue-500"},W={RED:"bg-red-500",GREEN:"bg-green-500",YELLOW:"bg-yellow-500",BLUE:"bg-blue-500"};return P.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center p-4 md:p-8 pb-32",children:[P.jsxs("div",{className:"w-full max-w-[600px] flex items-center justify-between mb-8",children:[P.jsx("button",{onClick:()=>w("/"),className:"p-2 hover:bg-white rounded-xl transition-colors text-slate-400 hover:text-slate-900",children:P.jsx(aS,{size:24})}),P.jsxs("div",{className:"flex flex-col items-center",children:[P.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-1",children:"Game Room"}),P.jsx("div",{className:"font-mono font-black text-xl text-slate-900",children:i})]}),P.jsx("div",{className:"flex -space-x-2",children:a.players.map(Y=>P.jsx("div",{className:`w-8 h-8 rounded-full border-2 border-white shadow-sm flex items-center justify-center ${W[Y.color]} ${Y.connected?"opacity-100":"opacity-30 grayscale"}`,children:Y.id===y&&P.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})},Y.id))})]}),P.jsxs("div",{className:"w-full max-w-[600px] bg-white p-4 rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100 mb-8",children:[P.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shadow-lg transition-all ${W[H.color]} ${X?"ring-4 ring-offset-2 ring-slate-100":""}`,children:a.turn.phase==="NEED_ROLL"?P.jsx(X0,{className:"text-white",size:24}):P.jsx(wx,{className:"text-white",size:24,fill:"currentColor"})}),P.jsxs("div",{children:[P.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:X?"YOUR TURN":`${H.name.toUpperCase()}'S TURN`}),P.jsx("div",{className:`text-lg font-black ${F[H.color]}`,children:a.turn.phase==="NEED_ROLL"?"Waiting for Roll":`Moving (${a.turn.diceValue})`})]})]}),P.jsx("div",{className:"flex items-center gap-2 bg-slate-50 px-4 py-2 rounded-2xl border border-slate-100",children:P.jsx("span",{className:"text-2xl font-black text-slate-900",children:a.turn.diceValue||"-"})})]}),P.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden shadow-inner bg-slate-50",children:[P.jsx(Nx,{}),a.players.map(Y=>Y.pieces.map((re,ae)=>P.jsx(kx,{color:Y.color,index:ae,position:re.position,canMove:X&&a.turn.phase==="NEED_MOVE"&&a.turn.diceValue!==void 0,onClick:()=>B(ae)},`${Y.id}-${ae}`))),P.jsx(Yb,{children:a.status==="FINISHED"&&P.jsx(Xs.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-slate-900/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center p-8 text-center",children:P.jsxs(Xs.div,{initial:{scale:.5,y:20},animate:{scale:1,y:0},children:[P.jsx(oS,{size:80,className:"text-yellow-400 mb-6 mx-auto"}),P.jsx("h2",{className:"text-5xl font-black text-white mb-2",children:"WINNER!"}),P.jsx("p",{className:`text-2xl font-black mb-8 ${F[a.players.find(Y=>Y.id===a.winnerId).color]}`,children:a.players.find(Y=>Y.id===a.winnerId)?.name.toUpperCase()}),P.jsx("button",{onClick:()=>w("/"),className:"bg-white text-slate-900 px-12 py-4 rounded-2xl font-black shadow-xl hover:scale-105 transition-transform",children:"BACK TO HOME"})]})})})]})]}),P.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 w-full max-w-[500px] px-4",children:P.jsxs("div",{className:"bg-slate-900 rounded-[2.5rem] p-3 shadow-2xl flex items-center justify-between",children:[P.jsx("div",{className:"flex items-center gap-4 ml-4",children:P.jsxs("div",{className:"flex items-center gap-2 text-white/50",children:[P.jsx(lS,{size:16}),P.jsx("span",{className:"text-xs font-black",children:a.viewersCount})]})}),P.jsxs(Xs.button,{whileTap:{scale:.95},disabled:!X||a.turn.phase!=="NEED_ROLL"||T,onClick:D,className:`flex items-center gap-3 px-10 py-5 rounded-[2rem] font-black text-white transition-all ${X&&a.turn.phase==="NEED_ROLL"?"bg-red-500 shadow-lg shadow-red-500/20":"bg-white/10 opacity-30 grayscale"}`,children:[P.jsx(X0,{size:24,className:T?"animate-dice":""}),P.jsx("span",{children:T?"ROLLING...":"ROLL DICE"})]}),P.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-full flex items-center justify-center mr-2",children:P.jsx("div",{className:`w-3 h-3 rounded-full ${X?"bg-green-500 animate-pulse":"bg-white/10"}`})})]})})]})}function jx(){return P.jsx(nA,{children:P.jsx("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:P.jsxs(DT,{children:[P.jsx(Nu,{path:"/",element:P.jsx(Rx,{})}),P.jsx(Nu,{path:"/lobby/:code",element:P.jsx(Ex,{})}),P.jsx(Nu,{path:"/game/:code",element:P.jsx(Ux,{})})]})})})}U1.createRoot(document.getElementById("root")).render(P.jsx(x1.StrictMode,{children:P.jsx(jx,{})}));
